!function(){"use strict";var Cf=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},is=function(t){return{eq:t}},Ek=is(function(t,e){return t===e}),wf=function(t){return is(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},xf=function(t){return is(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=Ek,c=wf(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},is(function(m,p){return c.eq(u(m),u(p))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Kl=is(function(t,e){if(t===e)return!0;var n=Cf(t);return n===Cf(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?wf(Kl).eq(t,e):"object"===n&&xf(Kl).eq(t,e))});const Sk=Object.getPrototypeOf,kf=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Gl=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&kf(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Yl=t=>e=>typeof e===t,Ef=t=>e=>t===e,Fa=(t,e)=>fe(t)&&kf(t,e,(n,o)=>Sk(n)===o),st=Gl("string"),fe=Gl("object"),Sf=t=>Fa(t,Object),Ht=Gl("array"),ye=Ef(null),So=Yl("boolean"),ie=Ef(void 0),Ft=t=>null==t,Y=t=>!Ft(t),Ct=Yl("function"),nn=Yl("number"),pr=(t,e)=>{if(Ht(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},ht=()=>{},hn=(t,e)=>(...n)=>t(e.apply(null,n)),_f=(t,e)=>n=>t(e(n)),J=t=>()=>t,Ce=t=>t,Nf=(t,e)=>t===e;function ot(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const Ua=t=>e=>!t(e),Rf=t=>()=>{throw new Error(t)},Xl=t=>t(),ls=t=>{t()},Tt=J(!1),Ut=J(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return Y(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const Jl=Array.prototype.slice,_k=Array.prototype.indexOf,Nk=Array.prototype.push,Af=(t,e)=>_k.call(t,e),kt=(t,e)=>Af(t,e)>-1,Pt=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},yt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},z=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Of=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},ds=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},mt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},cs=(t,e,n)=>(Of(t,(o,r)=>{n=e(n,o,r)}),n),Be=(t,e,n)=>(z(t,(o,r)=>{n=e(n,o,r)}),n),Tf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},$t=(t,e)=>Tf(t,e,Tt),us=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},Bf=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Ht(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Nk.apply(e,t[n])}return e},Je=(t,e)=>Bf(yt(t,e)),to=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},ms=t=>{const e=Jl.call(t,0);return e.reverse(),e},za=(t,e)=>mt(t,n=>!kt(e,n)),Ql=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},_o=(t,e)=>{const n=Jl.call(t,0);return n.sort(e),n},ja=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Se=t=>ja(t,0),No=t=>ja(t,t.length-1),De=Ct(Array.from)?Array.from:t=>Jl.call(t),hr=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},_e=Object.keys,Rk=Object.hasOwnProperty,_t=(t,e)=>{const n=_e(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Ha=(t,e)=>Ak(t,(n,o)=>({k:o,v:e(n,o)})),Ak=(t,e)=>{const n={};return _t(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},Zl=t=>(e,n)=>{t[n]=e},Df=(t,e,n,o)=>{_t(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},fs=(t,e)=>{const n={};return Df(t,e,Zl(n),ht),n},td=(t,e)=>{const n=[];return _t(t,(o,r)=>{n.push(e(o,r))}),n},ed=t=>td(t,Ce),At=(t,e)=>pt(t,e)?C.from(t[e]):C.none(),pt=(t,e)=>Rk.call(t,e),br=(t,e)=>pt(t,e)&&null!=t[e],Pf=t=>{const e={};return z(t,n=>{e[n]={}}),_e(e)},Lf=t=>void 0!==t.length,nd=Array.isArray,$a=(t,e,n)=>{if(!t)return!1;if(n=n||t,Lf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(pt(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},od=(t,e)=>{const n=[];return $a(t,(o,r)=>{n.push(e(o,r,t))}),n},gs=(t,e)=>{const n=[];return $a(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},qa=(t,e,n,o)=>{let r=ie(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Mf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Ro=t=>t[t.length-1],Ao=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},If=()=>rd(0,0),rd=(t,e)=>({major:t,minor:e}),ps={nu:rd,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?If():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return rd(a(1),a(2))})(t,n)},unknown:If},Ff=(t,e)=>{const n=String(e).toLowerCase();return $t(t,o=>o.search(n))},Uf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,zf=(t,e)=>de(t,e)?t.substring(e.length):t,le=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!ie(o)||r+e.length<=o)},de=(t,e)=>Uf(t,e,0),sd=(t,e)=>Uf(t,e,t.length-e.length),ad=t=>e=>e.replace(t,""),vr=ad(/^\s+|\s+$/g),Ok=ad(/^\s+/g),jf=ad(/\s+$/g),bn=t=>t.length>0,hs=t=>!bn(t),Va=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},id=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mn=t=>e=>le(e,t),Tk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>le(t,"edge/")&&le(t,"chrome")&&le(t,"safari")&&le(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,id],search:t=>le(t,"chrome")&&!le(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>le(t,"msie")||le(t,"trident")},{name:"Opera",versionRegexes:[id,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mn("firefox")},{name:"Safari",versionRegexes:[id,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(le(t,"safari")||le(t,"mobile/"))&&le(t,"applewebkit")}],Bk=[{name:"Windows",search:Mn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>le(t,"iphone")||le(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Mn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mn("linux"),versionRegexes:[]},{name:"Solaris",search:Mn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hf={browsers:J(Tk),oses:J(Bk)},qf="Chromium",Wf="Firefox",Gf=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(qf),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Wf),isSafari:o("Safari")}},Dk=()=>Gf({current:void 0,version:ps.unknown()}),Pk=Gf,Yf=(J("Edge"),J(qf),J("IE"),J("Opera"),J(Wf),J("Safari"),"Windows"),Xf="Android",Zf="Solaris",tg="FreeBSD",eg="ChromeOS",ng=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(Yf),isiOS:o("iOS"),isAndroid:o(Xf),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Zf),isFreeBSD:o(tg),isChromeOS:o(eg)}},Lk=()=>ng({current:void 0,version:ps.unknown()}),Mk=ng,Ik=(J(Yf),J("iOS"),J(Xf),J("Linux"),J("macOS"),J(Zf),J(tg),J(eg),t=>window.matchMedia(t).matches);let Fk=Ao(()=>((t,e,n)=>{const o=Hf.browsers(),r=Hf.oses(),s=e.bind(l=>{return d=o,hr(l.brands,u=>{const m=u.brand.toLowerCase();return $t(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:ps.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return Ff(o,d=t).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Dk,Pk),a=(l=r,d=t,Ff(l,d).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(Lk,Mk),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:J(m),isiPhone:J(p),isTablet:J(g),isPhone:J(b),isTouch:J(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:J(v),isDesktop:J(y)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),Ik));const vn=()=>Fk(),Uk=navigator.userAgent,ld=vn(),yn=ld.browser,Cn=ld.os,Oo=ld.deviceType,zk=-1!==Uk.indexOf("Windows Phone"),bt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:yn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!yn.isIE(),windowsPhone:zk,browser:{current:yn.current,version:yn.version,isChromium:yn.isChromium,isEdge:yn.isEdge,isFirefox:yn.isFirefox,isIE:yn.isIE,isOpera:yn.isOpera,isSafari:yn.isSafari},os:{current:Cn.current,version:Cn.version,isAndroid:Cn.isAndroid,isChromeOS:Cn.isChromeOS,isFreeBSD:Cn.isFreeBSD,isiOS:Cn.isiOS,isLinux:Cn.isLinux,isMacOS:Cn.isMacOS,isSolaris:Cn.isSolaris,isWindows:Cn.isWindows},deviceType:{isDesktop:Oo.isDesktop,isiPad:Oo.isiPad,isiPhone:Oo.isiPhone,isPhone:Oo.isPhone,isTablet:Oo.isTablet,isTouch:Oo.isTouch,isWebView:Oo.isWebView}},jk=/^\s*|\s*$/g,og=t=>Ft(t)?"":(""+t).replace(jk,""),rg=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),$a(t,(r,s)=>!1!==e.call(o,r,s,n)&&(rg(r,e,n,o),!0)))},q={trim:og,isArray:nd,is:(t,e)=>e?!("array"!==e||!nd(t))||typeof t===e:void 0!==t,toArray:t=>{if(nd(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=st(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:$a,map:od,grep:gs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:pt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(pt(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:rg,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Ht(t)?t:""===t?[]:od(t.split(e||","),og),_addCacheSuffix:t=>{const e=bt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},yr=(t,e,n=Nf)=>t.exists(o=>n(o,e)),sg=(t,e,n=Nf)=>ge(t,e,n).getOr(t.isNone()&&e.isNone()),ge=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Cr=(t,e)=>t?C.some(e):C.none(),Hk=typeof window<"u"?window:Function("return this;")(),ag=(t,e)=>((n,o)=>{let r=o??Hk;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),$k=Object.getPrototypeOf,Nt=t=>t.dom.nodeName.toLowerCase(),ig=t=>t.dom.nodeType,Wa=t=>e=>ig(e)===t,dd=t=>Ne(t)&&(t=>{const e=ag("ownerDocument.defaultView",t);return fe(t)&&((n=e,((o,r)=>{const s=ag(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test($k(t).constructor.name));var n})(t.dom),Ne=Wa(1),Fe=Wa(3),Vk=Wa(9),Wk=Wa(11),cd=t=>e=>Ne(e)&&Nt(e)===t,lg=(t,e,n)=>{if(!(st(n)||So(n)||nn(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Zt=(t,e,n)=>{lg(t.dom,e,n)},eo=(t,e)=>{const n=t.dom;_t(e,(o,r)=>{lg(n,r,o)})},Pe=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},In=(t,e)=>C.from(Pe(t,e)),bs=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},te=(t,e)=>{t.dom.removeAttribute(e)},dg=t=>Be(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),ud=(t,e)=>{const n=Pe(t,e);return void 0===n||""===n?[]:n.split(" ")},vs=t=>void 0!==t.dom.classList,cg=t=>ud(t,"class"),ug=(t,e)=>((n,o,r)=>{const s=ud(n,o).concat([r]);return Zt(n,o,s.join(" ")),!0})(t,"class",e),mg=(t,e)=>((n,o,r)=>{const s=mt(ud(n,o),a=>a!==r);return s.length>0?Zt(n,o,s.join(" ")):te(n,o),!1})(t,"class",e),wr=(t,e)=>{vs(t)?t.dom.classList.add(e):ug(t,e)},fg=t=>{0===(vs(t)?t.dom.classList:cg(t)).length&&te(t,"class")},ys=(t,e)=>{vs(t)?t.dom.classList.remove(e):mg(t,e),fg(t)},md=(t,e)=>vs(t)&&t.dom.classList.contains(e),Cs=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ws=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Cs(n.childNodes[0])},ee=(t,e)=>{const n=(e||document).createElement(t);return Cs(n)},xr=(t,e)=>{const n=(e||document).createTextNode(t);return Cs(n)},S=Cs,gg=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},on=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},pg=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,wt=(t,e)=>t.dom===e.dom,Fn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},hg=t=>S(t.dom.ownerDocument),Un=t=>Vk(t)?t:hg(t),xs=t=>S(Un(t).dom.defaultView),Qe=t=>C.from(t.dom.parentNode).map(S),Ka=t=>C.from(t.dom.parentElement).map(S),bg=(t,e)=>{const n=Ct(e)?e:Tt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,a=S(s);if(r.push(a),!0===n(a))break;o=s}return r},To=t=>C.from(t.dom.previousSibling).map(S),ks=t=>C.from(t.dom.nextSibling).map(S),vg=t=>ms(gg(t,To)),yg=t=>gg(t,ks),re=t=>yt(t.dom.childNodes,S),kr=(t,e)=>C.from(t.dom.childNodes[e]).map(S),fd=t=>kr(t,0),gd=t=>kr(t,t.dom.childNodes.length-1),pd=t=>t.dom.childNodes.length,hd=t=>Wk(t)&&Y(t.dom.host),Cg=Ct(Element.prototype.attachShadow)&&Ct(Node.prototype.getRootNode),Gk=J(Cg),no=Cg?t=>S(t.dom.getRootNode()):Un,bd=t=>hd(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return S(n)})(Un(t)),Yk=t=>S(t.dom.host),wg=t=>{if(Gk()&&Y(t.target)){const e=S(t.target);if(Ne(e)&&Xk(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Se(n)}}return C.from(t.target)},Xk=t=>Y(t.dom.shadowRoot),Er=t=>{const e=Fe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=no(o);return hd(r)?C.some(r):C.none()})(S(e)).fold(()=>n.body.contains(e),_f(Er,Yk))};var xg=(t,e,n,o,r)=>t(n,o)?C.some(n):Ct(r)&&r(n)?C.none():e(n,o,r);const zn=(t,e,n)=>{let o=t.dom;const r=Ct(n)?n:Tt;for(;o.parentNode;){o=o.parentNode;const s=S(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},Bo=(t,e,n)=>xg((o,r)=>r(o),zn,t,e,n),Es=(t,e,n)=>zn(t,o=>on(o,e),n),Ss=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return pg(r)?C.none():C.from(r.querySelector(n)).map(S)})(e,t),Do=(t,e,n)=>xg((o,r)=>on(o,r),Es,t,e,n),Po=(t,e=!1)=>{return Er(t)?t.dom.isContentEditable:(n=t,Do(n,"[contenteditable]")).fold(J(e),o=>"true"===Jk(o));var n},Jk=t=>t.dom.contentEditable,_s=t=>void 0!==t.style&&Ct(t.style.getPropertyValue),kg=(t,e,n)=>{if(!st(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);_s(t)&&t.style.setProperty(e,n)},Eg=(t,e,n)=>{kg(t.dom,e,n)},Ga=(t,e)=>{const n=t.dom;_t(e,(o,r)=>{kg(n,r,o)})},wn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Er(t)?o:Sg(n,e)},Sg=(t,e)=>_s(t)?t.style.getPropertyValue(e):"",Ya=(t,e)=>{const o=Sg(t.dom,e);return C.from(o).filter(r=>r.length>0)},_g=t=>{const e={},n=t.dom;if(_s(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},Ng=(t,e)=>{var n,o;o=e,_s(n=t.dom)&&n.style.removeProperty(o),yr(In(t,"style").map(vr),"")&&te(t,"style")},Re=(t,e)=>{Qe(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},jn=(t,e)=>{ks(t).fold(()=>{Qe(t).each(n=>{Mt(n,e)})},n=>{Re(n,e)})},Rg=(t,e)=>{fd(t).fold(()=>{Mt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Mt=(t,e)=>{t.dom.appendChild(e.dom)},Ag=(t,e)=>{Re(t,e),Mt(e,t)},Lo=(t,e)=>{z(e,n=>{Mt(t,n)})},Sr=t=>{t.dom.textContent="",z(re(t),e=>{Ot(e)})},Ot=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Hn=t=>{const e=re(t);var n,o;e.length>0&&(n=t,z(o=e,(r,s)=>{jn(0===s?n:o[s-1],r)})),Ot(t)},vd=t=>yt(t,S),Og=t=>t.dom.innerHTML,Xa=(t,e)=>{const n=hg(t).dom,o=S(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,re(S(i))})(e,n);Lo(o,r),Sr(t),Mt(t,o)},Zk=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Tg=(t,e)=>({left:t,top:e,translate:(n,o)=>Tg(t+n,e+o)}),_r=Tg,Ja=(t,e)=>void 0!==t?t:void 0!==e?e:0,yd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?_r(n.offsetLeft,n.offsetTop):Er(t)?(o=>{const r=o.getBoundingClientRect();return _r(r.left,r.top)})(e):_r(0,0)},Cd=t=>{const e=void 0!==t?t.dom:document;return _r(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Bg=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Dg=(t,e)=>{vn().browser.isSafari()&&Ct(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Pg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Lg=t=>{const e=void 0===t?window:t,o=Cd(S(e.document));return(r=>{const s=void 0===r?window:r;return vn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Pg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Pg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Mg=(t,e)=>{let n=[];return z(re(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(Mg(o,e))}),n},se=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return pg(r)?[]:yt(r.querySelectorAll(n),S)})(e,t),Ig=(t,e,n)=>Es(t,e,n).isSome();class qt{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Mo=t=>e=>!!e&&e.nodeType===t,Qa=t=>!!t&&!Object.getPrototypeOf(t),tt=Mo(1),Ns=t=>{const e=t.toLowerCase();return n=>Y(n)&&n.nodeName.toLowerCase()===e},rn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return kt(e,o)}return!1}},Za=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(tt(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Fg=t=>e=>tt(e)&&e.hasAttribute(t),Io=t=>tt(t)&&t.hasAttribute("data-mce-bogus"),$n=t=>tt(t)&&"TABLE"===t.tagName,Ug=t=>e=>!(!tt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),wd=rn(["textarea","input"]),$=Mo(3),tE=Mo(4),eE=Mo(7),oo=Mo(8),Rs=Mo(9),xd=Mo(11),Bt=Ns("br"),zg=Ns("img"),sn=Ug("true"),Rt=Ug("false"),ti=rn(["td","th"]),nE=rn(["td","th","caption"]),xn=rn(["video","audio","object","embed"]),oE=Ns("li"),jg=Ns("details"),rE=Ns("summary"),Kt="\xa0",kd=t=>"\ufeff"===t,Ed=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Fe),ei=t=>Ed.get(t),Hg=t=>Ed.getOption(t),sE=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),ro=t=>{let e;return n=>(e=e||Ql(t,Ut),pt(e,Nt(n)))},Ue=ro(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),ni=t=>Ne(t)&&!Ue(t),Fo=t=>Ne(t)&&"br"===Nt(t),$g=ro(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Sd=ro(["ul","ol","dl"]),Os=ro(["li","dd","dt"]),aE=ro(["thead","tbody","tfoot"]),Ts=ro(["td","th"]),oi=ro(["pre","script","textarea","style"]),iE=ro(sE),lE=t=>iE(t)||ni(t),Bs=()=>{const t=ee("br");return Zt(t,"data-mce-bogus","1"),t},so=t=>{Sr(t),Mt(t,Bs())},dE=t=>{gd(t).each(e=>{To(e).each(n=>{Ue(t)&&Fo(e)&&Ue(n)&&Ot(e)})})},ne="\ufeff",ri=kd,Le=t=>t.replace(/\uFEFF/g,""),cE=tt,Nr=$,Rr=t=>(Nr(t)&&(t=t.parentNode),cE(t)&&t.hasAttribute("data-mce-caret")),ao=t=>Nr(t)&&ri(t.data),ze=t=>Rr(t)||ao(t),qg=t=>t.firstChild!==t.lastChild||!Bt(t.firstChild),_d=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset())===ne||t.isAtStart()&&ao(e.previousSibling))},Nd=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset()-1)===ne||t.isAtEnd()&&ao(e.nextSibling))},si=t=>Nr(t)&&t.data[0]===ne,ai=t=>Nr(t)&&t.data[t.data.length-1]===ne,Rd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Io(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Vg=t=>Rr(t.startContainer),Wg=sn,uE=Rt,mE=Bt,fE=$,gE=rn(["script","style","textarea"]),Kg=rn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),pE=rn(["table"]),hE=ze,Ze=t=>!hE(t)&&(fE(t)?!gE(t.parentNode):Kg(t)||mE(t)||pE(t)||Ad(t)),Ad=t=>{return!(tt(e=t)&&"true"===e.getAttribute("unselectable"))&&uE(t);var e},Gg=(t,e)=>Ze(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Ad(r))return!1;if(Wg(r))return!0}return!0})(t,e),bE=/^[ \t\r\n]*$/,io=t=>bE.test(t),vE=t=>{for(const e of t)if(!kd(e))return!1;return!0},Yg=t=>"\n"===t||"\r"===t,Xg=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Be(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Kt?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&Yg(d[c])?{pcIsSpace:!1,str:i.str+Kt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Yg(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},ii=(t,e)=>{return Ze(t)&&(o=e,!($(n=t)&&io(n.data)&&!((r,s)=>{const a=S(s),i=S(r);return Ig(i,"pre,code",ot(wt,a))})(n,o)))||(n=>tt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||yE(t);var n,o},yE=Fg("data-mce-bookmark"),CE=Fg("data-mce-bogus"),wE=t=>tt(t)&&"all"===t.getAttribute("data-mce-bogus"),It=(t,e=!0)=>((n,o)=>{let r=0;if(ii(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new qt(s,n);do{if(o){if(wE(s)){s=a.next(!0);continue}if(CE(s)){s=a.next();continue}}if(Bt(s))r++,s=a.next();else{if(ii(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),li="data-mce-block",Od=t=>{return(e=t,mt(_e(e),n=>!/[A-Z]/.test(n))).join(",");var e},Jg=(t,e)=>Y(e.querySelector(t))?(e.setAttribute(li,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(li),!1),Qg=(t,e)=>{const n=Od(t.getTransparentElements()),o=Od(t.getBlockElements());return mt(e.querySelectorAll(n),r=>Jg(o,r))},Zg=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(It(S(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Td=(t,e)=>{const n=Qg(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=S(e),s=i=>Nt(i)in o,a=i=>wt(i,r);z(vd(n),i=>{zn(i,s,a).each(l=>{const d=mt(re(i),m=>s(m)&&!t.isValidChild(Nt(l),Nt(m)));if(d.length>0){const c=Ka(l);z(d,u=>{zn(u,s,a).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();Zg(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();Zg(v,!1),It(S(b))||g.insertBefore(b,p),It(S(f))||g.insertBefore(f,p),It(S(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>Qg(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,z([...s,...Uo(o,r)?[r]:[]],a=>z(se(S(a),a.nodeName.toLowerCase()),i=>{EE(o,i.dom)&&Hn(i)}))},kE=(t,e)=>{if(Pd(t,e)){const n=Od(t.getBlockElements());Jg(n,e)}},Bd=t=>t.hasAttribute(li),Dd=(t,e)=>pt(t.getTransparentElements(),e),Pd=(t,e)=>tt(e)&&Dd(t,e.nodeName),Uo=(t,e)=>Pd(t,e)&&Bd(e),EE=(t,e)=>Pd(t,e)&&!Bd(e),Ld=(t,e)=>1===e.type&&Dd(t,e.name)&&st(e.attr(li)),SE=vn().browser,tp=t=>$t(t,Ne),ep=(t,e)=>t.children&&kt(t.children,e),np=(t,e={})=>{let n=0;const o={},r=S(t),s=Un(r),a=l=>new Promise((d,c)=>{let u;const m=q._addCacheSuffix(l),p=At(o,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[m]=p,p.count++;const f=(y,x)=>{z(y,ls),p.status=x,p.passed=[],p.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},h=()=>f(p.passed,2),g=()=>f(p.failed,3);if(d&&p.passed.push(d),c&&p.failed.push(c),1===p.status)return;if(2===p.status)return void h();if(3===p.status)return void g();p.status=1;const b=ee("link",s.dom);var v;eo(b,{rel:"stylesheet",type:"text/css",id:p.id}),e.contentCssCors&&Zt(b,"crossOrigin","anonymous"),e.referrerPolicy&&Zt(b,"referrerpolicy",e.referrerPolicy),u=b.dom,u.onload=h,u.onerror=g,v=b,Mt(bd(r),v),Zt(b,"href",m)}),i=l=>{const d=q._addCacheSuffix(l);At(o,d).each(c=>{0==--c.count&&(delete o[d],(u=>{const m=bd(r);Ss(m,"#"+u).each(Ot)})(c.id))})};return{load:a,loadAll:l=>Promise.allSettled(yt(l,d=>a(d).then(J(d)))).then(d=>{const c=ds(d,u=>"fulfilled"===u.status);return c.fail.length>0?Promise.reject(yt(c.fail,u=>u.reason)):yt(c.pass,u=>u.value)}),unload:i,unloadAll:l=>{z(l,d=>{i(d)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},op=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=no(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=np(o,n);return t.set(o,r),r})}}})(),rp=(t,e)=>Y(t)&&(ii(t,e)||ni(S(t))),sp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Md=(t,e,n)=>{var o;const r=n||e;if(tt(e)&&sp(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)Md(t,s[a],r);if(tt(e)){const a=e.childNodes;1===a.length&&sp(a[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(a[0],e))}return xd(a=e)||Rs(a)||ii(e,r)||(a=>!!tt(a)&&a.childNodes.length>0)(e)||((a,i)=>$(a)&&a.data.length>0&&((l,d)=>{const c=new qt(l,d).prev(!1),u=new qt(l,d).next(!1),m=ie(c)||rp(c,d),p=ie(u)||rp(u,d);return m&&p})(a,i))(e,r)||t.remove(e),e;var a},_E=q.makeMap,di=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ci=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NE=/[<>&\"\']/g,RE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,AE={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},zo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},OE={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ap=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!zo[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Id=ap("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ip=(t,e)=>t.replace(e?di:ci,n=>zo[n]||n),lp=(t,e)=>t.replace(e?di:ci,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":zo[n]||"&#"+n.charCodeAt(0)+";"),Fd=(t,e,n)=>{const o=n||Id;return t.replace(e?di:ci,r=>zo[r]||o[r]||r)},lo={encodeRaw:ip,encodeAllRaw:t=>(""+t).replace(NE,e=>zo[e]||e),encodeNumeric:lp,encodeNamed:Fd,getEncodeFunc:(t,e)=>{const n=ap(e)||Id,o=_E(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?di:ci,a=>void 0!==zo[a]?zo[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>Fd(r,s,n):Fd:o.numeric?lp:ip},decode:t=>t.replace(RE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):AE[n]||String.fromCharCode(n):OE[e]||Id[e]||(o=>{const r=ee("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},ae=(t,e)=>(t=q.trim(t))?t.split(e||" "):[],dp=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),ui={},Ds=q.makeMap,an=q.each,Ud=q.extend,cp=q.explode,up=(t,e={})=>{const n=Ds(t," ",Ds(t.toUpperCase()," "));return Ud(n,e)},mp=t=>up("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),zd=(t,e)=>{if(t){const n={};return st(t)&&(t={"*":t}),an(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?Ds(o,/[, ]/):cp(o,/[, ]/)}),n}},co=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(B,j,V)=>{const K=t[B];if(K)return Ds(K,/[, ]/,Ds(K.toUpperCase(),/[, ]/));{let G=ui[B];return G||(G=up(j,V),ui[B]=G),G}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(B=>{const{globalAttributes:j,phrasingContent:V,flowContent:K}=(vt=>{let be,zt,Dt,ve;return be="id accesskey class dir lang style tabindex title role",zt="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Dt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==vt&&(be+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",zt+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Dt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==vt&&(be+=" xml:lang",Dt=[Dt,"acronym applet basefont big font strike tt"].join(" "),zt=[zt,"center dir isindex noframes"].join(" "),ve=[zt,Dt].join(" ")),ve=ve||[zt,Dt].join(" "),{globalAttributes:be,blockContent:zt,phrasingContent:Dt,flowContent:ve}})(B),G={},W=(vt,be="",zt="")=>{const Dt=ae(zt),ve=ae(vt);let Ye=ve.length;for(;Ye--;){const oe=ae([j,be].join(" "));G[ve[Ye]]={attributes:Ql(oe,J({})),attributesOrder:oe,children:Ql(Dt,J({}))}}},dt=(vt,be)=>{const zt=ae(vt),Dt=ae(be);let ve=zt.length;for(;ve--;){const Ye=G[zt[ve]];for(let oe=0,Yn=Dt.length;oe<Yn;oe++)Ye.attributes[Dt[oe]]={},Ye.attributesOrder.push(Dt[oe])}};return"html5-strict"!==B&&(z(ae("acronym applet basefont big font strike tt"),vt=>{W(vt,"",V)}),z(ae("center dir isindex noframes"),vt=>{W(vt,"",K)})),W("html","manifest","head body"),W("head","","base command link meta noscript script style title"),W("title hr noscript br"),W("base","href target"),W("link","href rel media hreflang type sizes hreflang"),W("meta","name http-equiv content charset"),W("style","media type scoped"),W("script","src async defer type charset"),W("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",K),W("dd div","",K),W("address dt caption","","html4"===B?V:K),W("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",V),W("blockquote","cite",K),W("ol","reversed start type","li"),W("ul","","li"),W("li","value",K),W("dl","","dt dd"),W("a","href target rel media hreflang type","html4"===B?V:K),W("q","cite",V),W("ins del","cite datetime",K),W("img","src sizes srcset alt usemap ismap width height"),W("iframe","src name width height",K),W("embed","src type width height"),W("object","data type typemustmatch name usemap form width height",[K,"param"].join(" ")),W("param","name value"),W("map","name",[K,"area"].join(" ")),W("area","alt coords shape href target rel media hreflang type"),W("table","border","caption colgroup thead tfoot tbody tr"+("html4"===B?" col":"")),W("colgroup","span","col"),W("col","span"),W("tbody thead tfoot","","tr"),W("tr","","td th"),W("td","colspan rowspan headers",K),W("th","colspan rowspan headers scope abbr",K),W("form","accept-charset action autocomplete enctype method name novalidate target",K),W("fieldset","disabled form name",[K,"legend"].join(" ")),W("label","form for",V),W("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),W("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===B?K:V),W("select","disabled form multiple name required size","option optgroup"),W("optgroup","disabled label","option"),W("option","disabled label selected value"),W("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),W("menu","type label",[K,"li"].join(" ")),W("noscript","",K),"html4"!==B&&(W("wbr"),W("ruby","",[V,"rt rp"].join(" ")),W("figcaption","",K),W("mark rt rp summary bdi","",V),W("canvas","width height",K),W("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[K,"track source"].join(" ")),W("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[K,"track source"].join(" ")),W("picture","","img source"),W("source","src srcset type media sizes"),W("track","kind src srclang label default"),W("datalist","",[V,"option"].join(" ")),W("article section nav aside main header footer","",K),W("hgroup","","h1 h2 h3 h4 h5 h6"),W("figure","",[K,"figcaption"].join(" ")),W("time","datetime",V),W("dialog","open",K),W("command","type label icon disabled checked radiogroup command"),W("output","for form name",V),W("progress","value max",V),W("meter","value min max low high optimum",V),W("details","open",[K,"summary"].join(" ")),W("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==B&&(dt("script","language xml:space"),dt("style","xml:space"),dt("object","declare classid code codebase codetype archive standby align border hspace vspace"),dt("embed","align name hspace vspace"),dt("param","valuetype type"),dt("a","charset name rev shape coords"),dt("br","clear"),dt("applet","codebase archive code object alt name width height align hspace vspace"),dt("img","name longdesc align border hspace vspace"),dt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),dt("font basefont","size color face"),dt("input","usemap align"),dt("select"),dt("textarea"),dt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),dt("ul","type compact"),dt("li","type"),dt("ol dl menu dir","compact"),dt("pre","width xml:space"),dt("hr","align noshade size width"),dt("isindex","prompt"),dt("table","summary width frame rules cellspacing cellpadding align bgcolor"),dt("col","width align char charoff valign"),dt("colgroup","width align char charoff valign"),dt("thead","align char charoff valign"),dt("tr","align char charoff valign bgcolor"),dt("th","axis align char charoff valign nowrap bgcolor width height"),dt("form","accept"),dt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),dt("tfoot","align char charoff valign"),dt("tbody","align char charoff valign"),dt("area","nohref"),dt("body","background bgcolor text link vlink alink")),"html4"!==B&&(dt("input button select textarea","autofocus"),dt("input textarea","placeholder"),dt("a","download"),dt("link script img","crossorigin"),dt("img","loading"),dt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==B&&z([G.video,G.audio],vt=>{delete vt.children.audio,delete vt.children.video}),z(ae("a form meter progress dfn"),vt=>{G[vt]&&delete G[vt].children[vt]}),delete G.caption.children.table,delete G.script,G})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=zd(t.valid_styles),u=zd(t.invalid_styles,"map"),m=zd(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",h),y=i("move_caret_before_on_enter_elements",b+" table",h),x=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",x),k=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),R=i("transparent_elements","a ins del canvas map");an("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),B=>{a[B]=new RegExp("</"+B+"[^>]*>","gi")});const A=B=>{const j=C.from(n["@"]),V=/[*?+]/;z(((K,G)=>{const W=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Je(ae(G,","),dt=>{const vt=W.exec(dt);if(vt){const be=vt[1],zt=vt[2],Dt=vt[3],ve=vt[4],Ye=vt[5],oe={attributes:{},attributesOrder:[]};if(K.each(Yn=>{return gn=oe,_t((Wt=Yn).attributes,(Pn,Eo)=>{gn.attributes[Eo]=Pn}),void gn.attributesOrder.push(...Wt.attributesOrder);var Wt,gn}),"#"===be?oe.paddEmpty=!0:"-"===be&&(oe.removeEmpty=!0),"!"===ve&&(oe.removeEmptyAttrs=!0),Ye&&((Yn,Wt)=>{const gn=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Pn=/[*?+]/,{attributes:Eo,attributesOrder:rs}=Wt;z(ae(Yn,"|"),ql=>{const Xn=gn.exec(ql);if(Xn){const Jn={},ss=Xn[1],Ie=Xn[2].replace(/[\\:]:/g,":"),Xe=Xn[3],Ln=Xn[4];if("!"===ss&&(Wt.attributesRequired=Wt.attributesRequired||[],Wt.attributesRequired.push(Ie),Jn.required=!0),"-"===ss)return delete Eo[Ie],void rs.splice(q.inArray(rs,Ie),1);if(Xe&&("="===Xe?(Wt.attributesDefault=Wt.attributesDefault||[],Wt.attributesDefault.push({name:Ie,value:Ln}),Jn.defaultValue=Ln):"~"===Xe?(Wt.attributesForced=Wt.attributesForced||[],Wt.attributesForced.push({name:Ie,value:Ln}),Jn.forcedValue=Ln):"<"===Xe&&(Jn.validValues=q.makeMap(Ln,"?"))),Pn.test(Ie)){const Ma=Jn;Wt.attributePatterns=Wt.attributePatterns||[],Ma.pattern=dp(Ie),Wt.attributePatterns.push(Ma)}else Eo[Ie]||rs.push(Ie),Eo[Ie]=Jn}})})(Ye,oe),Dt&&(oe.outputName=zt),"@"===zt){if(!K.isNone())return[];K=C.some(oe)}return[Dt?{name:zt,element:oe,aliasName:Dt}:{name:zt,element:oe}]}return[]})})(j,B??""),({name:K,element:G,aliasName:W})=>{if(W&&(n[W]=G),V.test(K)){const dt=G;dt.pattern=dp(K),r.push(dt)}else n[K]=G})},T=B=>{r=[],z(_e(n),j=>{delete n[j]}),A(B)},L=B=>{delete ui.text_block_elements,delete ui.block_elements,z((j=>{const V=/^(~)?(.+)$/;return Je(ae(j,","),K=>{const G=V.exec(K);if(G){const W="~"===G[1];return[{inline:W,cloneName:W?"span":"div",name:G[2]}]}return[]})})(B??""),({inline:j,name:V,cloneName:K})=>{if(o[V]=o[K],s[V]=K,v[V.toUpperCase()]={},v[V]={},j||(w[V.toUpperCase()]={},w[V]={}),!n[V]){let G=n[K];G=Ud({},G),delete G.removeEmptyAttrs,delete G.removeEmpty,n[V]=G}_t(o,(G,W)=>{G[K]&&(o[W]=G=Ud({},o[W]),G[V]=G[K])})})},E=B=>{z((j=>{const V=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Je(ae(j,","),K=>{const G=V.exec(K);if(G){const W=G[1];return[{operation:W?(vt=W,"-"===vt?"remove":"add"):"replace",name:G[2],validChildren:ae(G[3],"|")}]}var vt;return[]})})(B??""),({operation:j,name:V,validChildren:K})=>{const G="replace"===j?{"#comment":{}}:o[V];z(K,W=>{"remove"===j?delete G[W]:G[W]={}}),o[V]=G})},_=B=>{const j=n[B];if(j)return j;let V=r.length;for(;V--;){const K=r[V];if(K.pattern.test(B))return K}};t.valid_elements?(T(t.valid_elements),an(d,(B,j)=>{o[j]=B.children})):(an(d,(B,j)=>{n[j]={attributes:B.attributes,attributesOrder:B.attributesOrder},o[j]=B.children}),an(ae("strong/b em/i"),B=>{const j=ae(B,"/");n[j[1]].outputName=j[0]}),an(k,(B,j)=>{n[j]&&(t.padd_empty_block_inline_children&&(n[j].paddInEmptyBlock=!0),n[j].removeEmpty=!0)}),an(ae("ol ul blockquote a table tbody"),B=>{n[B]&&(n[B].removeEmpty=!0)}),an(ae("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),B=>{n[B]&&(n[B].paddEmpty=!0)}),an(ae("span"),B=>{n[B].removeEmptyAttrs=!0})),L(t.custom_elements),E(t.valid_children),A(t.extended_valid_elements),E("+ol[ul|ol],+ul[ul|ol]"),an({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(B,j)=>{n[j]&&(n[j].parentsRequired=ae(B))}),t.invalid_elements&&an(cp(t.invalid_elements),B=>{n[B]&&delete n[B]}),_("span")||A("span[!data-mce-type|*]");const D=J(c),F=J(u),X=J(m),H=J(g),rt=J(w),nt=J(x),ct=J(k),ut=J(Object.seal(h)),Z=J(f),lt=J(v),ft=J(y),N=J(p),O=J(R),I=J(Object.seal(a)),U=J(s);return{type:l,children:o,elements:n,getValidStyles:D,getValidClasses:X,getBlockElements:rt,getInvalidStyles:F,getVoidElements:ut,getTextBlockElements:nt,getTextInlineElements:ct,getBoolAttrs:H,getElementRule:_,getSelfClosingElements:Z,getNonEmptyElements:lt,getMoveCaretBeforeOnEnterElements:ft,getWhitespaceElements:N,getTransparentElements:O,getSpecialElements:I,isValidChild:(B,j)=>{const V=o[B.toLowerCase()];return!(!V||!V[j.toLowerCase()])},isValid:(B,j)=>{const V=_(B);if(V){if(!j)return!0;{if(V.attributes[j])return!0;const K=V.attributePatterns;if(K){let G=K.length;for(;G--;)if(K[G].pattern.test(j))return!0}}}return!1},getCustomElements:U,addValidElements:A,setValidElements:T,addCustomElements:L,addValidChildren:E}},jd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)s[d[u]]="\ufeff"+u,s["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(L,E,_)=>{const D=m[L+"-top"+E];if(!D)return;const F=m[L+"-right"+E];if(!F)return;const X=m[L+"-bottom"+E];if(!X)return;const H=m[L+"-left"+E];if(!H)return;const rt=[D,F,X,H];let nt=rt.length-1;for(;nt--&&rt[nt]===rt[nt+1];);nt>-1&&_||(m[L+E]=-1===nt?rt[0]:rt.join(" "),delete m[L+"-top"+E],delete m[L+"-right"+E],delete m[L+"-bottom"+E],delete m[L+"-left"+E])},b=L=>{const E=m[L];if(!E)return;const _=E.indexOf(",")>-1?[E]:E.split(" ");let D=_.length;for(;D--;)if(_[D]!==_[0])return!1;return m[L]=_[0],!0},v=L=>(p=!0,s[L]),y=(L,E)=>(p&&(L=L.replace(/\uFEFF[0-9]/g,_=>s[_])),E||(L=L.replace(/\\([\'\";:])/g,"$1")),L),x=L=>String.fromCharCode(parseInt(L.slice(1),16)),w=L=>L.replace(/\\[0-9a-f]+/gi,x),k=(L,E,_,D,F,X)=>{if(F=F||X)return"'"+(F=y(F)).replace(/\'/g,"\\'")+"'";if(E=y(E||_||D||""),!t.allow_script_urls){const H=E.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(H)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(H))return""}return f&&(E=f.call(h,E,"style")),"url('"+E.replace(/\'/g,"\\'")+"')"};if(u){let L;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,E=>E.replace(/[;:]/g,v));L=o.exec(u);){o.lastIndex=L.index+L[0].length;let E=L[1].replace(r,"").toLowerCase(),_=L[2].replace(r,"");if(E&&_){if(E=w(E),_=w(_),-1!==E.indexOf("\ufeff")||-1!==E.indexOf('"')||!t.allow_script_urls&&("behavior"===E||/expression\s*\(|\/\*|\*\//.test(_)))continue;"font-weight"===E&&"700"===_?_="bold":"color"!==E&&"background-color"!==E||(_=_.toLowerCase()),_=_.replace(n,k),m[E]=p?y(_,!0):_}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),A="border-style",T="border-color",b(R="border-width")&&b(A)&&b(T)&&(m.border=m[R]+" "+m[A]+" "+m[T],delete m[R],delete m[A],delete m[T]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var R,A,T;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const x=b[v],w=u[x];w&&(p+=(p.length>0?" ":"")+x+": "+w+";")}};return m&&a?(f("*",a),f(m,a)):_t(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},TE={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fp=(t,e)=>{const n=e??{};for(const o in t)pt(TE,o)||(n[o]=t[o]);return Y(t.composedPath)&&(n.composedPath=()=>t.composedPath()),Y(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),n},Hd=(t,e,n,o)=>{var r;const s=fp(e,o);return s.type=t,Ft(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(Ft((a=e).preventDefault)||(i=a)instanceof Event||Ct(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ut,Ct(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ut,Ct(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ut,s.stopPropagation()},(a=>a.isDefaultPrevented===Ut||a.isDefaultPrevented===Tt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ut:Tt,s.isPropagationStopped=!0===s.cancelBubble?Ut:Tt,s.isImmediatePropagationStopped=Tt)),s;var a,i},BE=/^(?:mouse|contextmenu)|click/,$d=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},mi=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Ps=(t,e)=>{const n=Hd(t.type,t,document,e);if(Y(o=t)&&BE.test(o.type)&&ie(t.pageX)&&!ie(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},DE=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{mi(t,"DOMContentLoaded",s),mi(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():$d(t,"DOMContentLoaded",s),n.domLoaded||$d(t,"load",s)};class jo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(Ps(m||i.event),d)};if(!e||$(e)||oo(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),s.domLoaded&&"ready"===m&&"complete"===e.readyState?o.call(r,Ps({type:m})):(s.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=Ps(g||i.event);b.type="focus"===b.type?"focusin":"focusout",s.executeHandlers(b,d)}),a=s.events[d][m],a?"ready"===m&&s.domLoaded?o(Ps({type:m})):a.push({func:o,scope:r}):(s.events[d][m]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=f,a.nativeHandler=p,"ready"===m?DE(e,p,s):$d(e,h||m,p,f)))}return e=a=null,o}unbind(e,n,o){if(!e||$(e)||oo(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,s[l]=f}}o&&0!==d.length||(delete s[l],mi(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else _t(s,(a,i)=>{mi(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(pt(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||$(e)||oo(e))return this;const r=Ps({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||$(e)||oo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}jo.Event=new jo;const qd=q.each,PE=q.grep,Vd="data-mce-style",LE=q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ls=(t,e,n)=>{Ft(n)||""===n?te(t,e):Zt(t,e,n)},gp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Ar=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!$(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},pp=(t,e)=>{const n=Pe(e,"style"),o=t.serialize(t.parse(n),Nt(e));Ls(e,Vd,o)},hp=(t,e,n)=>{const o=gp(e);var r,s;Ft(n)||""===n?Ng(t,o):Eg(t,o,(s=o,nn(r=n)?pt(LE,s)?r+"":r+"px":r))},Et=(t,e={})=>{const n={},o=window,r={};let s=0;const a=op.forElement(S(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:co({}),d=jd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new jo:jo.Event,u=l.getBlockElements(),m=N=>N&&t&&st(N)?t.getElementById(N):N,p=N=>{const O=m(N);return Y(O)?S(O):null},f=(N,O,I="")=>{let U;const B=p(N);if(Y(B)&&Ne(B)){const j=ft[O];U=j&&j.get?j.get(B.dom,O):Pe(B,O)}return Y(U)?U:I},h=N=>{const O=m(N);return Ft(O)?[]:O.attributes},g=(N,O,I)=>{A(N,U=>{if(tt(U)){const B=S(U),j=""===I?null:I,V=Pe(B,O),K=ft[O];K&&K.set?K.set(B.dom,j,O):Ls(B,O,j),V!==j&&e.onSetAttrib&&e.onSetAttrib({attrElm:B.dom,attrName:O,attrValue:j})}})},b=()=>e.root_element||t.body,v=(N,O)=>((I,U,B)=>{let j=0,V=0;const K=I.ownerDocument;if(B=B||I,U){if(B===I&&U.getBoundingClientRect&&"static"===wn(S(I),"position")){const W=U.getBoundingClientRect();return j=W.left+(K.documentElement.scrollLeft||I.scrollLeft)-K.documentElement.clientLeft,V=W.top+(K.documentElement.scrollTop||I.scrollTop)-K.documentElement.clientTop,{x:j,y:V}}let G=U;for(;G&&G!==B&&G.nodeType&&!ep(G,B);)j+=G.offsetLeft||0,V+=G.offsetTop||0,G=G.offsetParent;for(G=U.parentNode;G&&G!==B&&G.nodeType&&!ep(G,B);)j-=G.scrollLeft||0,V-=G.scrollTop||0,G=G.parentNode;V+=(W=S(U),SE.isFirefox()&&"table"===Nt(W)?tp(re(W)).filter(dt=>"caption"===Nt(dt)).bind(dt=>tp(yg(dt)).map(vt=>vt.dom.offsetTop<=dt.dom.offsetTop?-dt.dom.offsetHeight:0)).getOr(0):0)}var W;return{x:j,y:V}})(t.body,m(N),O),y=(N,O,I)=>{const U=m(N);if(!Ft(U)&&tt(U))return I?wn(S(U),gp(O)):("float"===(O=O.replace(/-(\D)/g,(B,j)=>j.toUpperCase()))&&(O="cssFloat"),U.style?U.style[O]:void 0)},x=N=>{const O=m(N);if(!O)return{w:0,h:0};let I=y(O,"width"),U=y(O,"height");return I&&-1!==I.indexOf("px")||(I="0"),U&&-1!==U.indexOf("px")||(U="0"),{w:parseInt(I,10)||O.offsetWidth||O.clientWidth,h:parseInt(U,10)||O.offsetHeight||O.clientHeight}},w=(N,O)=>{if(!N)return!1;const I=Ht(N)?N:[N];return Pt(I,U=>on(S(U),O))},k=(N,O,I,U)=>{const B=[];let j=m(N);U=void 0===U;const V=I||("BODY"!==b().nodeName?b().parentNode:null);if(st(O))if("*"===O)O=tt;else{const K=O;O=G=>w(G,K)}for(;j&&!(j===V||Ft(j.nodeType)||Rs(j)||xd(j));){if(!O||O(j)){if(!U)return[j];B.push(j)}j=j.parentNode}return U?B:null},R=(N,O,I)=>{let U=O;if(N){st(O)&&(U=B=>w(B,O));for(let B=N[I];B;B=B[I])if(Ct(U)&&U(B))return B}return null},A=function(N,O,I){const U=I??this;if(Ht(N)){const B=[];return qd(N,(j,V)=>{const K=m(j);K&&B.push(O.call(U,K,V))}),B}{const B=m(N);return!!B&&O.call(U,B)}},T=(N,O)=>{A(N,I=>{_t(O,(U,B)=>{g(I,B,U)})})},L=(N,O)=>{A(N,I=>{const U=S(I);Xa(U,O)})},E=(N,O,I,U,B)=>A(N,j=>{const V=st(O)?t.createElement(O):O;return Y(I)&&T(V,I),U&&(!st(U)&&U.nodeType?V.appendChild(U):st(U)&&L(V,U)),B?V:j.appendChild(V)}),_=(N,O,I)=>E(t.createElement(N),N,O,I,!0),D=lo.encodeAllRaw,F=(N,O)=>A(N,I=>{const U=S(I);return O&&z(re(U),B=>{Fe(B)&&0===B.dom.length?Ot(B):Re(U,B)}),Ot(U),U.dom}),X=(N,O,I)=>{A(N,U=>{if(tt(U)){const B=S(U),j=O.split(" ");z(j,V=>{var K,G,dt,vt;Y(I)?(I?wr:ys)(B,V):(G=V,vs(K=B)?K.dom.classList.toggle(G):(vt=G,kt(cg(dt=K),vt)?mg(dt,vt):ug(dt,vt)),fg(K))})}})},H=(N,O,I)=>A(O,U=>{var B;const j=Ht(O)?N.cloneNode(!0):N;return I&&qd(PE(U.childNodes),V=>{j.appendChild(V)}),null===(B=U.parentNode)||void 0===B||B.replaceChild(j,U),U}),rt=N=>{if(tt(N)){const O="a"===N.nodeName.toLowerCase()&&!f(N,"href")&&f(N,"id");if(f(N,"name")||f(N,"data-mce-bookmark")||O)return!0}return!1},nt=()=>t.createRange(),ct=(N,O,I,U)=>{if(Ht(N)){let B=N.length;const j=[];for(;B--;)j[B]=ct(N[B],O,I,U);return j}return!e.collect||N!==t&&N!==o||i.push([N,O,I,U]),c.bind(N,O,I,U||lt)},ut=(N,O,I)=>{if(Ht(N)){let U=N.length;const B=[];for(;U--;)B[U]=ut(N[U],O,I);return B}if(i.length>0&&(N===t||N===o)){let U=i.length;for(;U--;){const[B,j,V]=i[U];N!==B||O&&O!==j||I&&I!==V||c.unbind(B,j,V)}}return c.unbind(N,O,I)},Z=N=>{if(N&&tt(N)){const O=N.getAttribute("data-mce-contenteditable");return O&&"inherit"!==O?O:"inherit"!==N.contentEditable?N.contentEditable:null}return null},lt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:N=>st(N)?pt(u,N):tt(N)&&(pt(u,N.nodeName)||Uo(l,N)),root:null,clone:(N,O)=>N.cloneNode(O),getRoot:b,getViewPort:N=>{const O=Lg(N);return{x:O.x,y:O.y,w:O.width,h:O.height}},getRect:N=>{const O=m(N),I=v(O),U=x(O);return{x:I.x,y:I.y,w:U.w,h:U.h}},getSize:x,getParent:(N,O,I)=>{const U=k(N,O,I,!1);return U&&U.length>0?U[0]:null},getParents:k,get:m,getNext:(N,O)=>R(N,O,"nextSibling"),getPrev:(N,O)=>R(N,O,"previousSibling"),select:(N,O)=>{var I,U;const B=null!==(U=null!==(I=m(O))&&void 0!==I?I:e.root_element)&&void 0!==U?U:t;return Ct(B.querySelectorAll)?De(B.querySelectorAll(N)):[]},is:w,add:E,create:_,createHTML:(N,O,I="")=>{let U="<"+N;for(const B in O)br(O,B)&&(U+=" "+B+'="'+D(O[B])+'"');return hs(I)&&pt(l.getVoidElements(),N)?U+" />":U+">"+I+"</"+N+">"},createFragment:N=>{const O=t.createElement("div"),I=t.createDocumentFragment();let U;for(I.appendChild(O),N&&(O.innerHTML=N);U=O.firstChild;)I.appendChild(U);return I.removeChild(O),I},remove:F,setStyle:(N,O,I)=>{A(N,U=>{const B=S(U);hp(B,O,I),e.update_styles&&pp(d,B)})},getStyle:y,setStyles:(N,O)=>{A(N,I=>{const U=S(I);_t(O,(B,j)=>{hp(U,j,B)}),e.update_styles&&pp(d,U)})},removeAllAttribs:N=>A(N,O=>{const I=O.attributes;for(let U=I.length-1;U>=0;U--)O.removeAttributeNode(I.item(U))}),setAttrib:g,setAttribs:T,getAttrib:f,getPos:v,parseStyle:N=>d.parse(N),serializeStyle:(N,O)=>d.serialize(N,O),addStyle:N=>{if(lt!==Et.DOM&&t===document){if(n[N])return;n[N]=!0}let O=t.getElementById("mceDefaultStyles");if(!O){O=t.createElement("style"),O.id="mceDefaultStyles",O.type="text/css";const I=t.head;I.firstChild?I.insertBefore(O,I.firstChild):I.appendChild(O)}O.styleSheet?O.styleSheet.cssText+=N:O.appendChild(t.createTextNode(N))},loadCSS:N=>{N||(N=""),z(N.split(","),O=>{r[O]=!0,a.load(O).catch(ht)})},addClass:(N,O)=>{X(N,O,!0)},removeClass:(N,O)=>{X(N,O,!1)},hasClass:(N,O)=>{const I=p(N),U=O.split(" ");return Y(I)&&to(U,B=>md(I,B))},toggleClass:X,show:N=>{A(N,O=>Ng(S(O),"display"))},hide:N=>{A(N,O=>Eg(S(O),"display","none"))},isHidden:N=>{const O=p(N);return Y(O)&&yr(Ya(O,"display"),"none")},uniqueId:N=>(N||"mce_")+s++,setHTML:L,getOuterHTML:N=>{const O=p(N);return Y(O)?tt(O.dom)?O.dom.outerHTML:(I=>{const U=ee("div"),B=S(I.dom.cloneNode(!0));return Mt(U,B),Og(U)})(O):""},setOuterHTML:(N,O)=>{A(N,I=>{tt(I)&&(I.outerHTML=O)})},decode:lo.decode,encode:D,insertAfter:(N,O)=>{const I=m(O);return A(N,U=>{const B=I?.parentNode,j=I?.nextSibling;return B&&(j?B.insertBefore(U,j):B.appendChild(U)),U})},replace:H,rename:(N,O)=>{if(N.nodeName!==O.toUpperCase()){const I=_(O);return qd(h(N),U=>{g(I,U.nodeName,f(N,U.nodeName))}),H(I,N,!0),I}return N},findCommonAncestor:(N,O)=>{let I=N;for(;I;){let U=O;for(;U&&I!==U;)U=U.parentNode;if(I===U)break;I=I.parentNode}return!I&&N.ownerDocument?N.ownerDocument.documentElement:I},run:A,getAttribs:h,isEmpty:(N,O,I)=>{let U=0;if(rt(N))return!1;const B=N.firstChild;if(B){const j=new qt(B,N),V=l?l.getWhitespaceElements():{},K=O||(l?l.getNonEmptyElements():null);let G=B;do{if(tt(G)){const W=G.getAttribute("data-mce-bogus");if(W){G=j.next("all"===W);continue}const dt=G.nodeName.toLowerCase();if(K&&K[dt]){if("br"===dt){U++,G=j.next();continue}return!1}if(rt(G))return!1}if(oo(G)||$(G)&&!io(G.data)&&(!I?.includeZwsp||!vE(G.data))||$(G)&&G.parentNode&&V[G.parentNode.nodeName]&&io(G.data))return!1;G=j.next()}while(G)}return U<=1},createRng:nt,nodeIndex:Ar,split:(N,O,I)=>{let U,B,j=nt();if(N&&O&&N.parentNode&&O.parentNode){const V=N.parentNode;return j.setStart(V,Ar(N)),j.setEnd(O.parentNode,Ar(O)),U=j.extractContents(),j=nt(),j.setStart(O.parentNode,Ar(O)+1),j.setEnd(V,Ar(N)+1),B=j.extractContents(),V.insertBefore(Md(lt,U),N),V.insertBefore(I||O,N),V.insertBefore(Md(lt,B),N),F(N),I||O}},bind:ct,unbind:ut,fire:(N,O,I)=>c.dispatch(N,O,I),dispatch:(N,O,I)=>c.dispatch(N,O,I),getContentEditable:Z,getContentEditableParent:N=>{const O=b();let I=null;for(let U=N;U&&U!==O&&(I=Z(U),null===I);U=U.parentNode);return I},isEditable:N=>{if(Y(N)){const O=tt(N)?N:N.parentElement;return Y(O)&&Po(S(O))}return!1},destroy:()=>{if(i.length>0){let N=i.length;for(;N--;){const[O,I,U]=i[N];c.unbind(O,I,U)}}_t(r,(N,O)=>{a.unload(O),delete r[O]})},isChildOf:(N,O)=>N===O||O.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},ft=((N,O,I)=>{const U=O.keep_values,j={style:{set:(V,K)=>{const G=S(V);U&&Ls(G,Vd,K),te(G,"style"),st(K)&&Ga(G,N.parse(K))},get:V=>{const K=S(V),G=Pe(K,Vd)||Pe(K,"style");return N.serialize(N.parse(G),Nt(K))}}};return U&&(j.href=j.src={set:(V,K,G)=>{const W=S(V);Ct(O.url_converter)&&Y(K)&&(K=O.url_converter.call(O.url_converter_scope||I(),String(K),G,V)),Ls(W,"data-mce-"+G,K),Ls(W,G,K)},get:(V,K)=>{const G=S(V);return Pe(G,"data-mce-"+K)||Pe(G,K)}}),j})(d,e,J(lt));return lt};Et.DOM=Et(document),Et.nodeIndex=Ar;const ME=Et.DOM;class qn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=ME;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=q._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{At(n.scriptLoadedCallbacks,d).each(c=>{z(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=mt(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(Je(d,({reason:c})=>Ht(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(yt(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(ls),r(d)})),i=Pf(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,d)})}):a(i)}}qn.ScriptLoader=new qn;const Gt=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Ms={},Wd=Gt("en"),bp=()=>At(Ms,Wd.get()),ln={getData:()=>Ha(Ms,t=>({...t})),setCode:t=>{t&&Wd.set(t)},getCode:()=>Wd.get(),add:(t,e)=>{let n=Ms[t];n||(Ms[t]=n={});const o=yt(_e(e),r=>r.toLowerCase());_t(e,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const d=i.indexOf(l);return-1!==d&&i.indexOf(l,d+1)>d})(o,a)?(pt(e,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:t=>{const e=bp().getOr({}),n=i=>Ct(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return pt(e,l)?n(e[l]):At(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(fe(a=t)&&pt(a,"raw"))return n(t.raw);var a,i;if(Ht(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>pt(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>bp().bind(t=>At(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>pt(Ms,t)},pe=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=mt(o,u=>u.name===l&&u.state===d);z(c,u=>u.resolve())},s=l=>pt(e,l),a=(l,d)=>{const c=ln.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||qn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&pt(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==pe.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>st(d)?st(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=st(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=pe.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():qn.ScriptLoader.add(c).then(u)},waitFor:i}};pe.languageLoad=!0,pe.baseURL="",pe.PluginManager=pe(),pe.ThemeManager=pe(),pe.ModelManager=pe();const IE=t=>{const e=Gt(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},uo=()=>{const t=(e=>{const n=Gt(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(ht);return{...t,on:e=>t.get().each(e)}},fi=(t,e)=>{let n=null;return{cancel:()=>{ye(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{ye(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Kd=(t,e)=>{let n=null;const o=()=>{ye(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},Is=J("mce-annotation"),Ho=J("data-mce-annotation"),Or=J("data-mce-annotation-uid"),Fs=J("data-mce-annotation-active"),Us=J("data-mce-annotation-classes"),zs=J("data-mce-annotation-attrs"),vp=t=>e=>wt(e,t),yp=(t,e)=>{const n=t.selection.getRng(),o=S(n.startContainer),r=S(t.getBody()),s=e.fold(()=>"."+Is(),i=>`[${Ho()}="${i}"]`),a=kr(o,n.startOffset).getOr(o);return Do(a,s,vp(r)).bind(i=>In(i,`${Or()}`).bind(l=>In(i,`${Ho()}`).map(d=>{const c=wp(t,l);return{uid:l,name:d,elements:c}})))},Cp=(t,e)=>bs(t,"data-mce-bogus")||Ig(t,'[data-mce-bogus="all"]',vp(e)),wp=(t,e)=>{const n=S(t.getBody()),o=se(n,`[${Or()}="${e}"]`);return mt(o,r=>!Cp(r,n))},xp=(t,e)=>{const n=S(t.getBody()),o=se(n,`[${Ho()}="${e}"]`),r={};return z(o,s=>{if(!Cp(s,n)){const a=Pe(s,Or()),i=At(r,a).getOr([]);r[a]=i.concat([s])}}),r};let kp=0;const js=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return kp++,t+"_"+n+kp+String(e)},Ep=(t,e)=>S(t.dom.cloneNode(e)),$o=t=>Ep(t,!1),Sp=t=>Ep(t,!0),_p=(t,e,n=Tt)=>{const o=new qt(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!$(a)&&!n(a));return C.from(a).filter($)};return{current:()=>C.from(o.current()).filter($),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},qo=(t,e)=>{const n=e||(r=>t.isBlock(r)||Bt(r)||Rt(r)),o=(r,s,a,i)=>{if($(r)){const l=i(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=_p(r,i??t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=_p(r,i??t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},Tr=Math.round,Vo=t=>t?{left:Tr(t.left),top:Tr(t.top),bottom:Tr(t.bottom),right:Tr(t.right),width:Tr(t.width),height:Tr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Np=(t,e)=>(t=Vo(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Rp=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Hs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Rp(e.top-t.bottom,t,e)},$s=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Rp(e.bottom-t.top,t,e),Ap=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},gi=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},mo=(t,e)=>{if(tt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},FE=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Op=t=>st(t)&&t.charCodeAt(0)>=768&&FE.test(t),Tp=tt,UE=Ze,Bp=Za("display","block table"),zE=Za("float","left right"),qs=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Tp,UE,Ua(zE)),jE=Ua(Za("white-space","pre pre-line pre-wrap")),Vs=$,Gd=Bt,Dp=Et.nodeIndex,pi=(t,e)=>e<0&&tt(t)&&t.hasChildNodes()?void 0:mo(t,e),Yd=t=>t?t.createRange():Et.DOM.createRng(),Xd=t=>st(t)&&/[\r\n\t ]/.test(t),Pp=t=>!!t.setStart&&!!t.setEnd,Jd=t=>{const e=t.startContainer,n=t.startOffset;if(Xd(t.toString())&&jE(e.parentNode)&&$(e)){const o=e.data;if(Xd(o[n-1])||Xd(o[n+1]))return!0}return!1},Lp=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,fo=t=>{var e;let n;const o=t.getClientRects();return n=Vo(o.length>0?o[0]:t.getBoundingClientRect()),!Pp(t)&&Gd(t)&&Lp(n)?(r=>{const s=r.ownerDocument,a=Yd(s),i=s.createTextNode(Kt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=Vo(a.getBoundingClientRect());return l.removeChild(i),d})(t):Lp(n)&&Pp(t)&&null!==(e=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&$(a)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(a),fo(d)}return null})(t))&&void 0!==e?e:n},Wo=(t,e)=>{const n=Np(t,e);return n.width=1,n.right=n.left+1,n},M=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,m;0!==c.height&&(s.length>0&&(u=c).left===(m=s[s.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||s.push(c))},i=(c,u)=>{const m=Yd(c.ownerDocument);if(u<c.data.length){if(Op(c.data[u]))return;if(Op(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!Jd(m)))return void a(Wo(fo(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),Jd(m)||a(Wo(fo(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),Jd(m)||a(Wo(fo(m),!0)))},l=r.container(),d=r.offset();if(Vs(l))return i(l,d),s;if(Tp(l))if(r.isAtEnd()){const c=pi(l,d);Vs(c)&&i(c,c.data.length),qs(c)&&!Gd(c)&&a(Wo(fo(c),!1))}else{const c=pi(l,d);if(Vs(c)&&i(c,0),qs(c)&&r.isAtEnd())return a(Wo(fo(c),!1)),s;const u=pi(r.container(),r.offset()-1);qs(u)&&!Gd(u)&&(Bp(u)||Bp(c)||!qs(c))&&a(Wo(fo(u),!1)),qs(c)&&a(Wo(fo(c),!0))}return s})(M(t,e))),n);return{container:J(t),offset:J(e),toRange:()=>{const r=Yd(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Vs(t),0===e),isAtEnd:()=>Vs(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>pi(t,r?e-1:e)}};M.fromRangeStart=t=>M(t.startContainer,t.startOffset),M.fromRangeEnd=t=>M(t.endContainer,t.endOffset),M.after=t=>M(t.parentNode,Dp(t)+1),M.before=t=>M(t.parentNode,Dp(t)),M.isAbove=(t,e)=>ge(Se(e.getClientRects()),No(t.getClientRects()),Hs).getOr(!1),M.isBelow=(t,e)=>ge(No(e.getClientRects()),Se(t.getClientRects()),$s).getOr(!1),M.isAtStart=t=>!!t&&t.isAtStart(),M.isAtEnd=t=>!!t&&t.isAtEnd(),M.isTextPosition=t=>!!t&&$(t.container()),M.isElementPosition=t=>!M.isTextPosition(t);const hi=(t,e)=>{$(e)&&0===e.data.length&&t.remove(e)},Qd=(t,e,n)=>{var o,s;xd(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>hi(o,l.previousSibling)),i.each(l=>hi(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),hi(o,s.previousSibling),hi(o,s.nextSibling))},dn=$,Mp=Io,Ip=Et.nodeIndex,Fp=t=>{const e=t.parentNode;return Mp(e)?Fp(e):e},Zd=t=>t?qa(t.childNodes,(e,n)=>(Mp(n)&&"BR"!==n.nodeName?e=e.concat(Zd(n)):e.push(n),e),[]):[],Up=t=>e=>t===e,zp=t=>(dn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Zd(Fp(e)),o=Mf(n,Up(e),e),n=n.slice(0,o+1);const r=qa(n,(s,a,i)=>(dn(a)&&dn(n[i-1])&&s++,s),0);return n=gs(n,rn([e.nodeName])),o=Mf(n,Up(e),e),o-r})(t)+"]",jp=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(dn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&dn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(zp(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=gs(a,Ua(Io)),o=o.concat(od(a,i=>zp(i))),o.reverse().join("/")+","+n},Hp=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=qa(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=Zd(d);return m=gs(m,(p,f)=>!dn(p)||!dn(m[f-1])),m=gs(m,rn([c])),m[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!dn(s)&&s.parentNode){let a;return a="after"===r?Ip(s)+1:Ip(s),M(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;dn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!dn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return dn(a)&&i>a.data.length&&(i=a.data.length),M(a,i)})(s,parseInt(r,10))},bi=Rt,$p=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if($(s))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&$(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},tc=(t,e,n)=>{let o=0;return q.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},qp=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(tt(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},Vp=t=>(qp(t,!0),qp(t,!1),t),Wp=(t,e)=>{if(tt(t)&&(t=mo(t,e),bi(t)))return t;if(ze(t)){$(t)&&Rr(t)&&(t=t.parentNode);let n=t.previousSibling;if(bi(n)||(n=t.nextSibling,bi(n)))return n}},Kp=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||bi(o)){const a=o.nodeName;return{name:a,index:tc(n.dom,a,o)}}const s=Wp((a=r).startContainer,a.startOffset)||Wp(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:tc(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=$p(c,a,l,d,!0),m=i.isForward(),p=Vg(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:$p(c,a,l,d,!1),forward:m,...p}})(t,n,e,r)},Gp=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Yp=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:tc(n,i,a)};const d=Vp(o.cloneRange());if(!s){d.collapse(!1);const u=Gp(n,r+"_end",e);Qd(n,d,u)}o=Vp(o),o.collapse(!0);const c=Gp(n,r+"_start",e);return Qd(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},ec=ot(Kp,Ce,!0),Xp=t=>{const e=s=>s(t),n=J(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Ut,isError:Tt,map:s=>we.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Jp=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:Tt,isError:Ut,map:e,mapError:o=>we.error(o(t)),bind:e,exists:Tt,forall:Ut,getOr:Ce,or:Ce,getOrThunk:Xl,orThunk:Xl,getOrDie:Rf(String(t)),each:ht,toOptional:C.none};return n},we={value:Xp,error:Jp,fromOption:(t,e)=>t.fold(()=>Jp(e),Xp)},kn=t=>{if(!Ht(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return z(t,(o,r)=>{const s=_e(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Ht(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=_e(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!to(e,m=>kt(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};kn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const HE=t=>"inline-command"===t.type||"inline-format"===t.type,$E=t=>"block-command"===t.type||"block-format"===t.type,qE=t=>{const e=o=>we.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(Ht(t.format)){if(!to(t.format,st))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!st(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return we.value(r(a))}return void 0!==t.cmd?st(t.cmd)?we.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!fe(t))return e("Raw pattern is not an object");if(!st(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!st(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?st(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):we.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},Qp=t=>mt(t,$E),Zp=t=>mt(t,HE),th=t=>{const e=(n=>{const o=[],r=[];return z(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(yt(t,qE));return z(e.errors,n=>console.error(n.message,n.pattern)),e.values},nc=vn().deviceType,VE=nc.isTouch(),WE=Et.DOM,eh=t=>Fa(t,RegExp),et=t=>e=>e.options.get(t),oc=t=>st(t)||fe(t),nh=(t,e="")=>n=>{const o=st(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Be(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[vr(c)]=vr(u),i},{})})(n);return{value:At(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},KE=et("iframe_attrs"),GE=et("doctype"),oh=et("document_base_url"),YE=et("body_id"),XE=et("body_class"),rh=et("content_security_policy"),JE=et("br_in_pre"),ce=et("forced_root_block"),Ws=et("forced_root_block_attrs"),QE=et("newline_behavior"),ZE=et("br_newline_selector"),tS=et("no_newline_selector"),eS=et("keep_styles"),nS=et("end_container_on_empty_block"),sh=et("automatic_uploads"),ah=et("images_reuse_filename"),oS=et("images_replace_blob_uris"),ih=et("icons"),rS=et("icons_url"),sS=et("images_upload_url"),aS=et("images_upload_base_path"),iS=et("images_upload_credentials"),lS=et("images_upload_handler"),dS=et("content_css_cors"),rc=et("referrer_policy"),lh=et("language"),cS=et("language_url"),dh=et("indent_use_margin"),uS=et("indentation"),mS=et("content_css"),fS=et("content_style"),ch=et("font_css"),gS=et("directionality"),pS=et("inline_boundaries_selector"),uh=et("object_resizing"),hS=et("resize_img_proportional"),bS=et("placeholder"),mh=et("event_root"),vS=et("service_message"),Br=et("theme"),yS=et("theme_url"),sc=et("model"),CS=et("model_url"),Ks=et("inline_boundaries"),wS=et("formats"),xS=et("preview_styles"),kS=et("format_empty_lines"),ES=et("format_noneditable_selector"),SS=et("custom_ui_selector"),ac=et("inline"),_S=et("hidden_input"),NS=et("submit_patch"),RS=et("add_form_submit_trigger"),AS=et("add_unload_trigger"),OS=et("custom_undo_redo_levels"),TS=et("disable_nodechange"),fh=et("readonly"),BS=et("editable_root"),gh=et("content_css_cors"),vi=et("plugins"),DS=et("external_plugins"),PS=et("block_unsupported_drop"),LS=et("visual"),MS=et("visual_table_class"),ph=et("visual_anchor_class"),IS=et("iframe_aria_text"),FS=et("setup"),US=et("init_instance_callback"),zS=et("urlconverter_callback"),jS=et("auto_focus"),HS=et("browser_spellcheck"),$S=et("protect"),qS=et("paste_block_drop"),yi=et("paste_data_images"),VS=et("paste_preprocess"),WS=et("paste_postprocess"),KS=et("newdocument_content"),GS=et("paste_webkit_styles"),YS=et("paste_remove_styles_if_webkit"),XS=et("paste_merge_formats"),JS=et("smart_paste"),QS=et("paste_as_text"),ZS=et("paste_tab_spaces"),t_=et("allow_html_data_urls"),e_=et("text_patterns"),n_=et("text_patterns_lookup"),hh=et("noneditable_class"),o_=et("editable_class"),r_=et("noneditable_regexp"),s_=et("preserve_cdata"),a_=et("highlight_on_focus"),ic=et("xss_sanitization"),i_=et("init_content_sync"),bh=t=>q.explode(t.options.get("images_file_types")),l_=et("table_tab_navigation"),d_=et("details_initial_state"),c_=et("details_serialized_state"),u_=tt,vh=$,yh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Ch=t=>{const e=Le(t);return{count:t.length-e.length,text:e}},wh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(ne));)t.deleteData(e,1)},xh=(t,e)=>(Ko(t),e),Ko=t=>{u_(t)&&ze(t)&&(qg(t)?t.removeAttribute("data-mce-caret"):yh(t)),vh(t)&&(wh(t),0===t.data.length&&yh(t))},f_=Rt,g_=xn,p_=ti,kh=(t,e,n)=>{const o=Np(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},Eh=()=>bt.browser.isFirefox(),Gs=t=>f_(t)||g_(t),Ys=t=>(Gs(t)||$n(t)&&Eh())&&Ka(S(t)).exists(Po),b_=sn,lc=Rt,v_=xn,Sh=Za("display","block table table-cell table-caption list-item"),_h=ze,Nh=Rr,y_=tt,C_=$,w_=Ze,Dr=t=>t>0,Go=t=>t<0,Ci=(t,e)=>{let n;for(;n=t(e);)if(!Nh(n))return n;return null},Xs=(t,e,n,o,r)=>{const s=new qt(t,o),a=lc(t)||Nh(t);let i;if(Go(e)){if(a&&(i=Ci(s.prev.bind(s),!0),n(i)))return i;for(;i=Ci(s.prev.bind(s),r);)if(n(i))return i}if(Dr(e)){if(a&&(i=Ci(s.next.bind(s),!0),n(i)))return i;for(;i=Ci(s.next.bind(s),r);)if(n(i))return i}return null},go=(t,e)=>{for(;t&&t!==e;){if(Sh(t))return t;t=t.parentNode}return null},En=(t,e,n)=>go(t.container(),n)===go(e.container(),n),dc=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return y_(n)?C.from(n.childNodes[o+t]):C.none()},Rh=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},x_=(t,e,n)=>go(e,t)===go(n,t),Ah=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&_h(s)&&(s=s[o]),lc(s)||v_(s)){if(x_(e,s,r))return s;break}if(w_(s))break;r=r.parentNode}return null},Js=ot(Rh,!0),Qs=ot(Rh,!1),cc=(t,e,n)=>{let o;const r=ot(Ah,!0,e),s=ot(Ah,!1,e),a=n.startContainer,i=n.startOffset;if(Rr(a)){const l=C_(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,Ys(o)))return Js(o);if("after"===d&&(o=l.previousSibling,Ys(o)))return Qs(o)}if(!n.collapsed)return n;if($(a)){if(_h(a)){if(1===t){if(o=s(a),o)return Js(o);if(o=r(a),o)return Qs(o)}if(-1===t){if(o=r(a),o)return Qs(o);if(o=s(a),o)return Js(o)}return n}if(ai(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?Js(o):n;if(si(a)&&i<=1)return-1===t&&(o=r(a),o)?Qs(o):n;if(i===a.data.length)return o=s(a),o?Js(o):n;if(0===i)return o=r(a),o?Qs(o):n}return n},Oh=(t,e)=>dc(t?0:-1,e).filter(lc),Zs=(t,e,n)=>{const o=cc(t,e,n);return-1===t?M.fromRangeStart(o):M.fromRangeEnd(o)},wi=t=>C.from(t.getNode()).map(S),uc=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},xi=(t,e)=>{const n=En(t,e);return!(n||!Bt(t.getNode()))||n};var Yt,t;(t=Yt||(Yt={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const k_=Rt,Sn=$,Th=tt,mc=Bt,Pr=Ze,Bh=t=>{return Kg(t)||!!Ad(e=t)&&!Be(De(e.getElementsByTagName("*")),(n,o)=>n||Wg(o),!1);var e},ki=Gg,Dh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Ph=(t,e)=>{if(Dr(t)){if(Pr(e.previousSibling)&&!Sn(e.previousSibling))return M.before(e);if(Sn(e))return M(e,0)}if(Go(t)){if(Pr(e.nextSibling)&&!Sn(e.nextSibling))return M.after(e);if(Sn(e))return M(e,e.data.length)}return Go(t)?mc(e)?M.before(e):M.after(e):M.before(e)},fc=(t,e,n)=>{let o,r,s,a;if(!Th(n)||!e)return null;if(e.isEqual(M.after(n))&&n.lastChild){if(a=M.after(n.lastChild),Go(t)&&Pr(n.lastChild)&&Th(n.lastChild))return mc(n.lastChild)?M.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Sn(i)){if(Go(t)&&l>0)return M(i,--l);if(Dr(t)&&l<i.length)return M(i,++l);o=i}else{if(Go(t)&&l>0&&(r=Dh(i,l-1),Pr(r)))return!Bh(r)&&(s=Xs(r,t,ki,r),s)?Sn(s)?M(s,s.data.length):M.after(s):Sn(r)?M(r,r.data.length):M.before(r);if(Dr(t)&&l<i.childNodes.length&&(r=Dh(i,l),Pr(r)))return mc(r)?((c,u)=>{const m=u.nextSibling;return m&&Pr(m)?Sn(m)?M(m,0):M.before(m):fc(Yt.Forwards,M.after(u),c)})(n,r):!Bh(r)&&(s=Xs(r,t,ki,r),s)?Sn(s)?M(s,0):M.before(s):Sn(r)?M(r,0):M.after(r);o=r||a.getNode()}if(o&&(Dr(t)&&a.isAtEnd()||Go(t)&&a.isAtStart())&&(o=Xs(o,t,Ut,n,!0),ki(o,n)))return Ph(t,o);r=o&&Xs(o,t,ki,n);const d=Ro(mt(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),k_));return!d||r&&d.contains(r)?r?Ph(t,r):null:(a=Dr(t)?M.after(d):M.before(d),a)},_n=t=>({next:e=>fc(Yt.Forwards,e,t),prev:e=>fc(Yt.Backwards,e,t)}),Lh=t=>M.isTextPosition(t)?0===t.offset():Ze(t.getNode()),Mh=t=>{if(M.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Ze(t.getNode(!0))},Ih=(t,e)=>!M.isTextPosition(t)&&!M.isTextPosition(e)&&t.getNode()===e.getNode(!0),je=(t,e,n)=>{const o=_n(e);return C.from(t?o.next(n):o.prev(n))},Lr=(t,e,n)=>je(t,e,n).bind(o=>{return En(n,o,e)&&(s=n,a=o,t?!Ih(s,a)&&(M.isTextPosition(i=s)||!Bt(i.getNode()))&&Mh(s)&&Lh(a):!Ih(a,s)&&Lh(s)&&Mh(a))?je(t,e,o):C.some(o);var s,a,i}),Fh=(t,e,n,o)=>Lr(t,e,n).bind(r=>o(r)?Fh(t,e,r,o):C.some(r)),Mr=(t,e)=>{const n=t?e.firstChild:e.lastChild;return $(n)?C.some(M(n,t?0:n.data.length)):n?Ze(n)?C.some(t?M.before(n):Bt(o=n)?M.before(o):M.after(o)):((r,s,a)=>{const i=r?M.before(a):M.after(a);return je(r,s,i)})(t,e,n):C.none();var o},xe=ot(je,!0),Ae=ot(je,!1),ue=ot(Mr,!0),tn=ot(Mr,!1),gc="_mce_caret",en=t=>tt(t)&&t.id===gc,Yo=(t,e)=>{let n=e;for(;n&&n!==t;){if(en(n))return n;n=n.parentNode}return null},Uh=t=>pt(t,"name"),zh=t=>q.isArray(t.start),Ei=t=>!(!Uh(t)&&So(t.forward))||t.forward,jh=(t,e)=>(tt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),E_=(t,e)=>tn(t).fold(Tt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Hh=(t,e,n)=>!(e.hasChildNodes()||!Yo(t,e)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(ne);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),$h=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(Hh(s,a,o))return!0;if(r[l]>d.length-1)return!!Hh(s,a,o)||E_(a,o);a=d[r[l]]}$(a)&&(i=Math.min(r[0],a.data.length)),tt(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},pc=t=>$(t)&&t.data.length>0,qh=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===e?s?o.hasChildNodes()?(a=o.firstChild,i=1):pc(o.nextSibling)?(a=o.nextSibling,i=0):pc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):pc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for(q.each(q.grep(o.childNodes),u=>{$(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if($(d)&&$(l)&&!bt.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return C.some(M(a,i))}return C.none()},S_=(t,e,n)=>((o,r,s=!1)=>{return 2===r?Kp(Le,s,o):3===r?(a=>{const i=a.getRng();return{start:jp(a.dom.getRoot(),M.fromRangeStart(i)),end:jp(a.dom.getRoot(),M.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:Yp(o,!1);var a})(t,e,n),__=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(zh(o))return((s,a)=>{const i=s.createRng();return $h(s,!0,a,i)&&$h(s,!1,a,i)?C.some({range:i,forward:Ei(a)}):C.none()})(r,o);if(st(o.start))return((s,a)=>{const i=C.from(Hp(s.getRoot(),a.start)),l=C.from(Hp(s.getRoot(),a.end));return ge(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:Ei(a)}})})(r,o);if(pt(o,"id"))return((s,a)=>{const i=qh(s,"start",a),l=qh(s,"end",a);return ge(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(jh(s,d.container()),d.offset()),u.setEnd(jh(s,c.container()),c.offset()),{range:u,forward:Ei(a)}})})(r,o);if(Uh(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>pt(s,"rng"))(o))return C.some({range:o.rng,forward:Ei(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},He=t=>tt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Si=(Vh=Kt,t=>Vh===t);var Vh;const Ir=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),hc=t=>!Ir(t)&&!Si(t)&&!kd(t),bc=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},N_=t=>{return{value:(n=bc(t.red)+bc(t.green)+bc(t.blue),zf(n,"#").toUpperCase())};var n},R_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,A_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Wh=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Kh=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return Wh(r,s,a,i)},_i=t=>(e=>{if("transparent"===e)return C.some(Wh(0,0,0,0));const n=R_.exec(e);if(null!==n)return C.some(Kh(n[1],n[2],n[3],"1"));const o=A_.exec(e);return null!==o?C.some(Kh(o[1],o[2],o[3],o[4])):C.none()})(t).map(N_).map(e=>"#"+e.value).getOr(t),vc=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Gh=(t,e)=>{const n=se(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:mt(Je(t,s=>{const a=gi(s);return a?[S(a)]:[]}),Ts)},Fr=t=>Gh(vc(t.selection.getSel()),S(t.getBody())),ta=(t,e)=>Es(t,"table",e),Yh=t=>fd(t).fold(J([t]),e=>[t].concat(Yh(e))),yc=t=>gd(t).fold(J([t]),e=>"br"===Nt(e)?To(e).map(n=>[t].concat(yc(n))).getOr([]):[t].concat(yc(e))),Cc=(t,e)=>ge((n=>{const o=n.startContainer,r=n.startOffset;return $(o)?0===r?C.some(S(o)):C.none():C.from(o.childNodes[r]).map(S)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return $(o)?r===o.data.length?C.some(S(o)):C.none():C.from(o.childNodes[r-1]).map(S)})(e),(n,o)=>{const r=$t(Yh(t),ot(wt,n)),s=$t(yc(t),ot(wt,o));return r.isSome()&&s.isSome()}).getOr(!1),wc=(t,e,n,o)=>{const r=n,s=new qt(n,r),a=fs(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!kt(["td","th","table"],d.toLowerCase()));let i=n;do{if($(i)&&0!==q.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Ni=t=>{const e=t.selection.getSel();return Y(e)&&e.rangeCount>0},xc=(t,e)=>{const n=Fr(t);n.length>0?z(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},Xh=(t,e,n)=>{const o=Yp(t,e);n(o),t.moveToBookmark(o)},ea=t=>nn(t?.nodeType),kc=t=>tt(t)&&!He(t)&&!en(t)&&!Io(t),Xo=t=>!0===t.isContentEditable,Jh=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=Rt(s);Xh(o,!0,()=>{e()}),a&&Rt(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&O_(r,o)},O_=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(kc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&tt(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new qt(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new qt(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if($(c)&&!Sc(c))return r.setStart(c,0),void e.setRng(r)}}},Qh=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(tt(t)||!Sc(t))return t}},Ec=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Uo(t,e),Ur=(t,e,n)=>t.schema.isValidChild(e,n),Sc=(t,e=!1)=>{if(Y(t)&&$(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return io(n)}return!1},Zh=(t,e)=>{const n=t.dom;return kc(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=ES(o),i=hs(a)?s:`${s},${a}`;return on(S(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},po=(t,e)=>Ct(t)?t(e):(Y(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),_c=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Nc=(t,e)=>{if(Ft(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=_i(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Ri=(t,e,n)=>{const o=t.getStyle(e,n);return Nc(o,n)},tb=(t,e)=>{let n;return t.getParent(e,o=>!!tt(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},Ai=(t,e,n)=>t.getParents(e,n,t.getRoot()),Rc=(t,e,n)=>{const o=t.formatter.get(e);return Y(o)&&Pt(o,n)},Nn=t=>br(t,"block"),$e=t=>br(t,"selector"),Vt=t=>br(t,"inline"),Ac=t=>$e(t)&&!1!==t.expand&&!Vt(t),zr=He,eb=Ai,nb=Sc,T_=Ec,ob=(t,e)=>{let n=e;for(;n;){if(tt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},rb=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},B_=(t,e,n)=>rb(t,e,n,o=>Si(o)||Ir(o)),D_=(t,e,n)=>rb(t,e,n,hc),sb=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=qo(t);return C.from((r?m.backwards:m.forwards)(d,c,(f,h)=>zr(f.parentNode)?-1:(a=f,u(r,f,h)),i))};return l(n,o,B_).bind(d=>s?l(d.container,d.offset+(r?-1:0),D_):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},ab=(t,e,n,o,r)=>{const s=o[r];$(o)&&hs(o.data)&&s&&(o=s);const a=eb(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!Y(d.collapsed)||d.collapsed===n.collapsed)&&$e(d)&&t.is(a[i],d.selector))return a[i]}return o},ib=(t,e,n,o)=>{var r;let s=n;const a=t.getRoot(),i=e[0];if(Nn(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:a;s=t.getParent($(n)?n.parentNode:n,d=>d!==a&&T_(t.schema,d),l)}if(s&&Nn(i)&&i.wrapper&&(s=eb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!_c(s,"br")););return s||n},lb=(t,e,n,o)=>{const r=n.parentNode;return!Y(n[o])&&(!(r!==e&&!Ft(r)&&!t.isBlock(r))||lb(t,e,r,o))},Oi=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if($(n)&&!nb(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=$(d)&&!lb(t,i,d,a);if(!zr(d)&&(!Bt(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!nb(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},db=t=>zr(t.parentNode)||zr(t),Jo=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return tt(r)&&r.hasChildNodes()&&(r=mo(r,s),$(r)&&(s=0)),tt(a)&&a.hasChildNodes()&&(a=mo(a,e.collapsed?i:i-1),$(a)&&(i=a.data.length)),r=ob(t,r),a=ob(t,a),db(r)&&(r=zr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,$(r)&&(s=e.collapsed?r.length:0)),db(a)&&(a=zr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,$(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(sb(t,t.getRoot(),r,s,!0,o).each(({container:d,offset:c})=>{r=d,s=c}),sb(t,t.getRoot(),a,i,!1,o).each(({container:d,offset:c})=>{a=d,i=c})),(Vt(l)||l.block_expand)&&(Vt(l)&&$(r)&&0!==s||(r=Oi(t,n,r,s,!0)),Vt(l)&&$(a)&&i!==a.data.length||(a=Oi(t,n,a,i,!1))),Ac(l)&&(r=ab(t,n,e,r,"previousSibling"),a=ab(t,n,e,a,"nextSibling")),(Nn(l)||$e(l))&&(r=ib(t,n,r,"previousSibling"),a=ib(t,n,a,"nextSibling"),Nn(l)&&(t.isBlock(r)||(r=Oi(t,n,r,s,!0)),t.isBlock(a)||(a=Oi(t,n,a,i,!1)))),tt(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),tt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},na=(t,e,n)=>{var o;const r=e.startOffset,s=mo(e.startContainer,r),a=e.endOffset,i=mo(e.endContainer,a-1),l=g=>{const b=g[0];$(b)&&b===s&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===a&&g.length>0&&v===i&&$(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let x=g,w=x.parentNode;x&&x!==b;x=w){w=x.parentNode;const k=d(x===g?x:x[y],y);k.length&&(v||k.reverse(),n(l(k)))}};if(s===i)return n(l([s]));const m=null!==(o=t.findCommonAncestor(s,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,i))return u(s,m,!0);if(t.isChildOf(i,s))return u(i,m);const p=c(s,m)||s,f=c(i,m)||i;u(s,p,!0);const h=d(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},P_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cb=(t,e,n,o,r,s)=>{const{uid:a=e,...i}=n;wr(t,Is()),Zt(t,`${Or()}`,a),Zt(t,`${Ho()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(eo(t,l),c=t,z(d,m=>{wr(c,m)}),s){d.length>0&&Zt(t,`${Us()}`,d.join(","));const c=_e(l);c.length>0&&Zt(t,`${zs()}`,c.join(","))}var c},ub=(t,e,n,o,r)=>{const s=ee("span",t);return cb(s,e,n,o,r,!1),s},mb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>At(s,a).map(i=>i.settings),getNames:()=>_e(s)}})();((s,a)=>{const i=Ho(),l=c=>C.from(c.attr(i)).bind(a.lookup),d=c=>{var u,m;c.attr(Or(),null),c.attr(Ho(),null),c.attr(Fs(),null);const p=C.from(c.attr(zs())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(Us())).map(b=>b.split(",")).getOr([]);z(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=za(h,[Is()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(Us(),null),c.attr(zs(),null)};s.serializer.addTempAttr(Fs()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=Gt({}),l=()=>({listeners:[],previous:uo()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(At(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{z(wp(s,p),h=>{f?Zt(h,Fs(),"true"):te(h,Fs())})},m=Kd(()=>{const p=_o(a.getNames());z(p,f=>{c(f,h=>{const g=h.previous.get();return yp(s,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{z(y.listeners,x=>x(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var x,w,k;yr(g,b)||(g.each(x=>u(x,!1)),w=b,k=y,d(x=v,R=>{z(R.listeners,A=>A(!0,x,{uid:w,nodes:yt(k,T=>T.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=cd("span"),r=s=>{z(s,a=>{o(a)?Hn(a):(i=>{ys(i,Is()),te(i,`${Or()}`),te(i,`${Ho()}`),te(i,`${Fs()}`);const l=In(i,`${zs()}`).map(u=>u.split(",")).getOr([]),d=In(i,`${Us()}`).map(u=>u.split(",")).getOr([]);var c;z(l,u=>te(i,u)),c=i,z(d,u=>{ys(c,u)}),te(i,`${Us()}`),te(i,`${zs()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,d,c,u;d=s,c=i,u=a,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=Fr(l).length>0,h=js("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=Jo(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=ub(l.getDoc(),h,u,d,c.decorate);Xa(g,Kt),m.getRng().insertNode(g.dom),m.select(g.dom)}else Xh(m,!1,()=>{xc(l,g=>{((t,e,n,o,r,s)=>{const a=[],i=ub(t.getDoc(),n,s,o,r),l=uo(),d=()=>{l.clear()},c=m=>{z(m,u)},u=m=>{switch(p=t,f=m,h="span",g=Nt(m),Qe(f).fold(()=>"skipping",b=>{return"br"===g||Fe(v=f)&&ei(v)===ne?"valid":(v=>Ne(v)&&md(v,Is()))(f)?"existing":en(f.dom)?"caret":Pt(P_,v=>on(f,v))?"valid-block":Ur(p,h,g)&&Ur(p,Nt(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=re(m);c(p),d();break}case"valid-block":d(),cb(m,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=$o(i);return a.push(f),l.set(f),f});Ag(m,p);break}}var p,f,h,g};na(t.dom,e,m=>{d(),(p=>{const f=yt(p,S);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{yp(t,C.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();r(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();_t(xp(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=xp(t,s);return Ha(a,i=>yt(i,l=>l.dom))}}},oa=t=>({getBookmark:ot(S_,t),moveToBookmark:ot(__,t)});oa.isBookmarkNode=He;const fb=(t,e,n)=>!n.collapsed&&Pt(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),gb=(t,e,n)=>{t.dispatch(e,n)},pb=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},hb=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},bb=(t,e)=>t.dispatch("SetContent",e),vb=(t,e)=>t.dispatch("GetContent",e),yb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Q={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Q.metaKeyPressed(t),metaKeyPressed:t=>bt.os.isMacOS()||bt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Qo="data-mce-selected",Cb=Math.abs,Ti=Math.round,Oc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},wb=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,m,p,f,h,g,b,v,y,x;const w=Z=>Y(Z)&&(zg(Z)||n.is(Z,"figure.image")),k=Z=>xn(Z)||n.hasClass(Z,"mce-preview-object"),R=Z=>{const lt=Z.target;((ft,N)=>{if("longpress"===(O=ft).type||0===O.type.indexOf("touch")){const O=ft.touches[0];return w(ft.target)&&!fb(O.clientX,O.clientY,N)}var O;return w(ft.target)&&!fb(ft.clientX,ft.clientY,N)})(Z,e.selection.getRng())&&!Z.isDefaultPrevented()&&e.selection.select(lt)},A=Z=>n.hasClass(Z,"mce-preview-object")&&Y(Z.firstElementChild)?[Z,Z.firstElementChild]:n.is(Z,"figure.image")?[Z.querySelector("img")]:[Z],T=Z=>{const lt=uh(e);return!!lt&&"false"!==Z.getAttribute("data-mce-resize")&&Z!==e.getBody()&&(n.hasClass(Z,"mce-preview-object")&&Y(Z.firstElementChild)?on(S(Z.firstElementChild),lt):on(S(Z),lt))},L=(Z,lt,ft)=>{if(Y(ft)){const N=A(Z);z(N,O=>{O.style[lt]||!e.schema.isValid(O.nodeName.toLowerCase(),lt)?n.setStyle(O,lt,ft):n.setAttrib(O,lt,""+ft)})}},E=(Z,lt,ft)=>{L(Z,"width",lt),L(Z,"height",ft)},_=Z=>{let lt,ft,N,O,I;lt=Z.screenX-u,ft=Z.screenY-m,b=lt*d[2]+p,v=ft*d[3]+f,b=b<5?5:b,v=v<5?5:v,N=(w(a)||k(a))&&!1!==hS(e)?!Q.modifierPressed(Z):Q.modifierPressed(Z),N&&(Cb(lt)>Cb(ft)?(v=Ti(b*h),b=Ti(v/h)):(b=Ti(v/h),v=Ti(b*h))),E(i,b,v),O=d.startPos.x+lt,I=d.startPos.y+ft,O=O>0?O:0,I=I>0?I:0,n.setStyles(l,{left:O,top:I,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),lt=s.scrollWidth-y,ft=s.scrollHeight-x,lt+ft!==0&&n.setStyles(l,{left:O-lt,top:I-ft}),g||(e.dispatch("ObjectResizeStart",{target:a,width:p,height:f,origin:"corner-"+d.name}),g=!0)},D=()=>{const Z=g;g=!1,Z&&(L(a,"width",b),L(a,"height",v)),n.unbind(o,"mousemove",_),n.unbind(o,"mouseup",D),r!==o&&(n.unbind(r,"mousemove",_),n.unbind(r,"mouseup",D)),n.remove(i),n.remove(l),n.remove(c),F(a),Z&&(e.dispatch("ObjectResized",{target:a,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},F=Z=>{ct();const lt=n.getPos(Z,s),ft=lt.x,N=lt.y,O=Z.getBoundingClientRect(),I=O.width||O.right-O.left,U=O.height||O.bottom-O.top;a!==Z&&(H(),a=Z,b=v=0);const B=e.dispatch("ObjectSelected",{target:Z});T(Z)&&!B.isDefaultPrevented()?_t(Oc,(j,V)=>{let K=n.get("mceResizeHandle"+V);K&&n.remove(K),K=n.add(s,"div",{id:"mceResizeHandle"+V,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+V+"-resize; margin:0; padding:0"}),n.bind(K,"mousedown",G=>{G.stopImmediatePropagation(),G.preventDefault(),(W=>{const dt=A(a)[0];var vt;u=W.screenX,m=W.screenY,p=dt.clientWidth,f=dt.clientHeight,h=f/p,d=j,d.name=V,d.startPos={x:I*j[0]+ft,y:U*j[1]+N},y=s.scrollWidth,x=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=k(vt=a)?n.create("img",{src:bt.transparentSrc}):vt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:ft,top:N,margin:0}),E(i,I,U),i.removeAttribute(Qo),s.appendChild(i),n.bind(o,"mousemove",_),n.bind(o,"mouseup",D),r!==o&&(n.bind(r,"mousemove",_),n.bind(r,"mouseup",D)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(G)}),j.elm=K,n.setStyles(K,{left:I*j[0]+ft-K.offsetWidth/2,top:U*j[1]+N-K.offsetHeight/2})}):H(!1)},X=fi(F,0),H=(Z=!0)=>{X.cancel(),ct(),a&&Z&&a.removeAttribute(Qo),_t(Oc,(lt,ft)=>{const N=n.get("mceResizeHandle"+ft);N&&(n.unbind(N),n.remove(N))})},rt=(Z,lt)=>n.isChildOf(Z,lt),nt=Z=>{if(g||e.removed||e.composing)return;const lt="mousedown"===Z.type?Z.target:t.getNode(),ft=Do(S(lt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(O=>O.dom).filter(O=>n.isEditable(O.parentElement)).getOrUndefined(),N=Y(ft)?n.getAttrib(ft,Qo,"1"):"1";if(z(n.select(`img[${Qo}],hr[${Qo}]`),O=>{O.removeAttribute(Qo)}),Y(ft)&&rt(ft,s)&&e.hasFocus()){ut();const O=t.getStart(!0);if(rt(O,ft)&&rt(t.getEnd(!0),ft))return n.setAttrib(ft,Qo,N),void X.throttle(ft)}H()},ct=()=>{_t(Oc,Z=>{Z.elm&&(n.unbind(Z.elm),delete Z.elm)})},ut=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{ut(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",nt),e.on("keyup compositionend",Z=>{a&&"TABLE"===a.nodeName&&nt(Z)}),e.on("hide blur",H),e.on("contextmenu longpress",R,!0)}),e.on("remove",ct),{isResizable:T,showResizeRect:F,hideResizeRect:H,updateResizeRect:nt,destroy:()=>{X.cancel(),a=i=c=null}}},xb=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},Tc=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},ra=kn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),kb=(t,e,n)=>e(S(n.startContainer),n.startOffset,S(n.endContainer),n.endOffset),Eb=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),M_=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),C.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,Bc=kn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Vn={before:Bc.before,on:Bc.on,after:Bc.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(Ce,Ce,Ce)},Bi=kn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),jr={domRange:Bi.domRange,relative:Bi.relative,exact:Bi.exact,exactFromRange:t=>Bi.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>S(o.startContainer),relative:(o,r)=>Vn.getStart(o),exact:(o,r,s,a)=>o});return xs(e)},range:Eb},Di=(t,e)=>{const n=Nt(t);return"input"===n?Vn.after(t):kt(["br","img"],n)?0===e?Vn.before(t):Vn.after(t):Vn.on(t,e)},I_=(t,e)=>{const n=t.fold(Vn.before,Di,Vn.after),o=e.fold(Vn.before,Di,Vn.after);return jr.relative(n,o)},Sb=(t,e,n,o)=>{const r=Di(t,e),s=Di(n,o);return jr.relative(r,s)},Dc=(t,e)=>{const n=(e||document).createDocumentFragment();return z(t,o=>{n.appendChild(o.dom)}),S(n)},_b=(t,e,n)=>{return(o=xs(S(n)).dom,r=t,s=e,((a,i,l)=>{const d=S(a.document);return M_(d,i,l).map(c=>Eb(S(c.startContainer),c.startOffset,S(c.endContainer),c.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},Pc=(t,e)=>Y(t)&&Y(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Nb=(t,e,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),U_=(t,e,n)=>Nb(t,e,o=>o.nodeName===n),z_=(t,e)=>ze(t)&&!Nb(t,e,en),Rb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new qt(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Bt(s))return!0}return!1},Lc=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||s;if(o&&Bt(r)&&e&&t.isEmpty(c))return C.some(M(i,t.nodeIndex(r)));const u=new qt(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||z_(d,s))return C.none();if($(d)&&d.data.length>0)return U_(d,s,"A")?C.none():C.some(M(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return C.none();l=d}return oo(l)?C.none():n&&l?C.some(M(l,0)):C.none()},Ab=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=tt(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(ze(i))return C.none();if(tt(i)&&l>i.childNodes.length-1&&(u=!1),Rs(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&(ze(s)||c[s.nodeName]||$n(s)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=$(i)&&d?i.data.length:0,!e&&i===r.lastChild&&$n(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(Rt(f))return!0;f=f.parentNode}return!1})(r,i)||ze(i))return C.none();if(i.hasChildNodes()&&!$n(i)){s=i;const m=new qt(i,r);do{if(Rt(s)||ze(s)){a=!1;break}if($(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!nE(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?m.next():m.prev())}}}return e&&($(i)&&0===l&&Lc(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),tt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Bt(s)||"A"===(null===(f=s.previousSibling)||void 0===f?void 0:f.nodeName)||Rb(t,s,!1)||Rb(t,s,!0)||Lc(t,d,e,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),u&&!e&&$(i)&&l===i.data.length&&Lc(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?C.some(M(i,l)):C.none();var f},Pi=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=M.fromRangeStart(e);return Ab(t,n,!0,o).each(s=>{n&&M.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Ab(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),Pc(e,o)?C.none():C.some(o)},Li=(t,e)=>t.splitText(e),Mi=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&$(e)){if(n>0&&n<e.data.length)if(o=Li(e,n),e=o.previousSibling,r>n){r-=n;const s=Li(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if($(e)&&n>0&&n<e.data.length&&(e=Li(e,n),n=0),$(o)&&r>0&&r<o.data.length){const s=Li(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Zo=t=>({walk:(e,n)=>na(t,e,n),split:Mi,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=Jo(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>Pi(t,e).fold(Tt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Zo.compareRanges=Pc,Zo.getCaretRangeFromPoint=_b,Zo.getSelectedNode=gi,Zo.getNode=mo;const j_=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return Er(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=wn(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Be(s,(a,i)=>{const l=wn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!nn(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;_s(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),Ob=()=>S(document),Tb=(t,e)=>t.view(e).fold(J([]),n=>{const o=t.owner(n),r=Tb(t,o);return[n].concat(r)});var H_=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(S)},owner:t=>Un(t)});const Mc=t=>"textarea"===Nt(t),Bb=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return _r(a.offsetLeft,a.offsetTop);const d=Ja(i?.pageYOffset,l.scrollTop),c=Ja(i?.pageXOffset,l.scrollLeft),u=Ja(l.clientTop,a.clientTop),m=Ja(l.clientLeft,a.clientLeft);return yd(r).translate(c-m,d-u)})(t),o=j_.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},Db=(t,e,n,o)=>{q_(t,(r,s)=>$_(t,e,n,o),n)},Pb=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,Cd(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},$_=(t,e,n,o)=>{S(t.getBody());const s=S(t.getDoc()),a=((i,l)=>{const d=((u,m)=>{const p=re(u);if(0===p.length||Mc(u))return{element:u,offset:m};if(m<p.length&&!Mc(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return Mc(f)?{element:u,offset:m}:"img"===Nt(f)?{element:f,offset:1}:Fe(f)?{element:f,offset:ei(f).length}:{element:f,offset:re(f).length}}})(i,l),c=ws('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Re(d.element,c),Bb(c,()=>Ot(c))})(S(n.startContainer),n.startOffset);Pb(t,s,e,a,o),a.cleanup()},Lb=(t,e,n,o)=>{const r=S(t.getDoc());Pb(t,r,n,Bb(S(e),ht),o)},q_=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(S(o),S(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},Ic=(t,e,n,o,r)=>{const s=e.pos;if(o)Bg(s.left,s.top,r);else{const a=s.top-n+e.height;Bg(-t.getBody().getBoundingClientRect().left,a,r)}},Mb=(t,e,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,d=l-i>=o;i<n?Ic(t,r,o,!1!==s,e):i>a?Ic(t,r,o,d?!1!==s:!0===s,e):l>a&&!d&&Ic(t,r,o,!0===s,e)},Ib=(t,e,n,o,r)=>{const s=xs(e).dom.innerHeight;Mb(t,e,n,s,o,r)},Fb=(t,e,n,o,r)=>{const s=xs(e).dom.innerHeight;Mb(t,e,n,s,o,r);const a=(l=>{const d=Ob(),c=Cd(d),u=((f,h)=>{const g=h.owner(f);return Tb(h,g)})(l,H_),m=yd(l),p=cs(u,(f,h)=>{const g=yd(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return _r(p.left+m.left+c.left,p.top+m.top+c.top)})(o.element),i=Lg(window);a.top<i.y?Dg(o.element,!1!==r):a.top>i.bottom&&Dg(o.element,!0===r)},V_=(t,e,n)=>Db(t,Ib,e,n),W_=(t,e,n)=>Lb(t,e,Ib,n),K_=(t,e,n)=>Db(t,Fb,e,n),G_=(t,e,n)=>Lb(t,e,Fb,n),sa=(t,e,n)=>{(t.inline?V_:K_)(t,e,n)},Ub=t=>t.dom.focus(),zb=t=>{const e=no(t).dom;return t.dom===e.activeElement},Fc=(t=Ob())=>C.from(t.dom.activeElement).map(S),jb=(t,e)=>{const n=Fe(e)?ei(e).length:re(e).length+1;return t>n?n:t<0?0:t},Y_=t=>jr.range(t.start,jb(t.soffset,t.start),t.finish,jb(t.foffset,t.finish)),Hb=(t,e)=>!Qa(e.dom)&&(Fn(t,e)||wt(t,e)),$b=t=>e=>Hb(t,e.start)&&Hb(t,e.finish),X_=t=>jr.range(S(t.startContainer),t.startOffset,S(t.endContainer),t.endOffset),J_=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},Uc=t=>{const e=t.inline||bt.browser.isFirefox()?(n=S(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(X_)})(xs(n).dom).filter($b(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},zc=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=S(t.getBody()),C.from(e).filter($b(n)).map(Y_);var n}).bind(J_),qb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},qe={setEditorTimeout:(t,e,n)=>{return nn(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(nn(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Hr;const jc=Et.DOM,Hc=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Ii=(t,e)=>{const n=SS(t);return null!==jc.getParent(e,r=>{return tt(s=r)&&qb.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},$c=t=>{try{const e=no(S(t.getElement()));return Fc(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},Q_=(t,e)=>{const n=e.editor;(r=>{const s=fi(()=>{Uc(r)},0);r.on("init",()=>{var a,d;r.inline&&((a,i)=>{const l=()=>{i.throttle()};Et.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Et.DOM.unbind(document,"mouseup",l)})})(r,s),d=s,(a=r).on("mouseup touchend",c=>{d.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||Uc(a)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{a_(r)&&!0!==r.inline&&s(S(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;Hc($c(n))&&o(n,wr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{qe.setEditorTimeout(n,()=>{const r=t.focusedEditor;Hc($c(n))&&r===n||o(n,ys),Ii(n,$c(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Hr||(Hr=r=>{const s=t.activeEditor;s&&wg(r).each(a=>{a.ownerDocument===document&&(a===document.body||Ii(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},jc.bind(document,"focusin",Hr))},Z_=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Hr&&(jc.unbind(document,"focusin",Hr),Hr=null)},Vb=(t,e)=>{var n,o,r;(n=S(t.getBody()),o=e,(r=o,r.collapsed?C.from(mo(r.startContainer,r.startOffset)).map(S):C.none()).bind(r=>aE(r)?C.some(r):Fn(n,r)?C.none():C.some(n))).bind(n=>ue(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},qc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},tr=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=S(n),zb(o)||(r=o,Fc(no(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):Y((e=t).iframeElement)&&zb(S(e.iframeElement));var e},Vc=t=>t.editorManager.setActive(t),Wb=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(S).map(i=>o&&e.collapsed?i:kr(i,r(i,a)).getOr(i)).bind(i=>Ne(i)?C.some(i):Qe(i).filter(Ne)).map(i=>i.dom).getOr(t)},Kb=(t,e,n=!1)=>Wb(t,e,!0,n,(o,r)=>Math.min(pd(o),r)),Gb=(t,e,n=!1)=>Wb(t,e,!1,n,(o,r)=>r>0?r-1:r),Yb=(t,e)=>{const n=t;for(;t&&$(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Wc=(t,e)=>yt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),tN=["img","br"],Xb=t=>{return Hg(t).filter(n=>0!==n.trim().length||n.indexOf(Kt)>-1).isSome()||kt(tN,Nt(t))||dd(n=t)&&"false"===Pe(n,"contenteditable");var n},Jb="[data-mce-autocompleter]",Qb=t=>Ss(t,Jb),nN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Fi=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},oN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!io(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Zb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class ke{static create(e,n){const o=new ke(e,nN[e]||1);return n&&_t(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!st(e))return Y(e)&&_t(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new ke(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Fi(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Fi(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(Zb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Zb(a))return!1}if(8===a.type||3===a.type&&!oN(a)||3===a.type&&a.parent&&n[a.parent.name]&&io(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=Fi(a,s));return!0}walk(e){return Fi(this,null,e)}}const rN=q.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),t0=t=>st(t.nodeValue)&&t.nodeValue.includes(ne),e0=t=>(0===t.length?"":`${yt(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',n0=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>t0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),o0=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(t0(e)){const n=e.parentNode;return n&&pt(rN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),sN=t=>null!==n0(t).nextNode(),aN=t=>null!==o0(t).nextNode(),iN=(t,e)=>null!==e.querySelector(e0(t)),lN=(t,e)=>{z(e.querySelectorAll(e0(t)),n=>{const o=S(n);"all"===Pe(o,"data-mce-bogus")?Ot(o):z(t,r=>{bs(o,r)&&te(o,r)})})},r0=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},dN=hn(r0,n0),cN=hn(r0,o0),s0=(t,e)=>{const n=[{condition:ot(iN,e),action:ot(lN,e)},{condition:sN,action:dN},{condition:aN,action:cN}];let o=t,r=!1;return z(n,({condition:s,action:a})=>{s(o)&&(r||(o=t.cloneNode(!0),r=!0),a(o))}),o},a0=t=>{const e=se(t,"[data-mce-bogus]");z(e,n=>{"all"===Pe(n,"data-mce-bogus")?Ot(n):Fo(n)?(Re(n,xr("\ufeff")),Ot(n)):Hn(n)})},i0=t=>{const e=se(t,"input");z(e,n=>{te(n,"name")})},l0=q.makeMap,d0=t=>{const e=[],n=(t=t||{}).indent,o=l0(t.indent_before||""),r=l0(t.indent_after||""),s=lo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',s(m.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},ho=(t={},e=co())=>{const n=d0(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(p)}while(p=p.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},c0=new Set;z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{c0.add(t)});const u0=["font","text-decoration","text-emphasis"],Kc=(t,e)=>_e(t.parseStyle(t.getAttrib(e,"style"))),mN=(t,e,n)=>{const o=Kc(t,e),r=Kc(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return bn(d)&&bn(c)&&d!==c};return Pt(o,a=>{const i=l=>Pt(l,d=>d===a);if(!i(r)&&i(u0)){const l=mt(r,d=>Pt(u0,c=>de(d,c)));return Pt(l,s)}return s(a)})},m0=(t,e,n)=>C.from(n.container()).filter($).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),Gc=ot(m0,!0,Ir),Yc=ot(m0,!1,Ir),fN=t=>{const e=t.container();return $(e)&&(0===e.data.length||ri(e.data)&&oa.isBookmarkNode(e.parentNode))},bo=(t,e)=>n=>dc(t?0:-1,n).filter(e).isSome(),f0=t=>zg(t)&&"block"===wn(S(t),"display"),g0=t=>{return Rt(t)&&!(tt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},gN=bo(!0,f0),pN=bo(!1,f0),aa=bo(!0,xn),ia=bo(!1,xn),p0=bo(!0,$n),h0=bo(!1,$n),vo=bo(!0,g0),yo=bo(!1,g0),b0=(t,e)=>{return r=Tt,Fn(o=e,n=t)?bg(n,s=>r(s)||wt(s,o)).slice(0,-1):[];var n,o,r},Wn=(t,e)=>[t].concat(b0(t,e)),Xc=(t,e,n)=>Fh(t,e,n,fN),v0=(t,e)=>$t(Wn(S(e.container()),t),Ue),y0=(t,e,n)=>Xc(t,e.dom,n).forall(o=>v0(e,n).fold(()=>!En(o,n,e.dom),r=>!En(o,n,e.dom)&&Fn(r,S(o.container())))),C0=(t,e,n)=>v0(e,n).fold(()=>Xc(t,e.dom,n).forall(o=>!En(o,n,e.dom)),o=>Xc(t,o.dom,n).isNone()),Jc=ot(C0,!1),w0=ot(C0,!0),hN=ot(y0,!1),bN=ot(y0,!0),vN=t=>wi(t).exists(Fo),Ui=(t,e,n)=>{const o=mt(Wn(S(n.container()),e),Ue),r=Se(o).getOr(e);return je(t,r.dom,n).filter(vN)},Qc=(t,e)=>wi(e).exists(Fo)||Ui(!0,t,e).isSome(),Zc=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(S)).exists(Fo)||Ui(!1,t,e).isSome();var n},yN=ot(Ui,!1),CN=ot(Ui,!0),x0=t=>M.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),k0=(t,e)=>{const n=mt(Wn(S(e.container()),t),Ue);return Se(n).getOr(t)},E0=(t,e)=>x0(e)?Yc(e):Yc(e)||Ae(k0(t,e).dom,e).exists(Yc),S0=(t,e)=>x0(e)?Gc(e):Gc(e)||xe(k0(t,e).dom,e).exists(Gc),tu=t=>wi(t).bind(e=>Bo(e,Ne)).exists(e=>{return n=wn(e,"white-space"),kt(["pre","pre-wrap"],n);var n}),_0=(t,e)=>n=>{return o=new qt(n,t)[e](),Y(o)&&Rt(o)&&Sh(o);var o},N0=(t,e)=>{return!tu(e)&&(Ae((n=t).dom,o=e).isNone()||xe(n.dom,o).isNone()||Jc(n,o)||w0(n,o)||Zc(n,o)||Qc(n,o)||E0(t,e)||S0(t,e));var n,o},la=(t,e)=>!tu(e)&&(Jc(t,e)||hN(t,e)||Zc(t,e)||E0(t,e)||((n,o)=>{const r=Ae(n.dom,o).getOr(o),s=_0(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),da=(t,e)=>!tu(e)&&(w0(t,e)||bN(t,e)||Qc(t,e)||S0(t,e)||((n,o)=>{const r=xe(n.dom,o).getOr(o),s=_0(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),eu=(t,e)=>la(t,e)||da(t,(n=>{const o=n.container(),r=n.offset();return $(o)&&r<o.data.length?M(o,r+1):n})(e)),R0=(t,e)=>Si(t.charAt(e)),A0=(t,e)=>Ir(t.charAt(e)),O0=(t,e,n)=>{const o=e.data,r=M(e,0);return n||!R0(o,0)||eu(t,r)?!!(n&&A0(o,0)&&la(t,r))&&(e.data=Kt+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},T0=(t,e,n)=>{const o=e.data,r=M(e,o.length-1);return n||!R0(o,o.length-1)||eu(t,r)?!!(n&&A0(o,o.length-1)&&da(t,r))&&(e.data=o.slice(0,-1)+Kt,!0):(e.data=o.slice(0,-1)+" ",!0)},B0=(t,e,n)=>{if(0===n)return;const o=S(t),r=zn(o,Ue).getOr(o),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&da(r,M(t,t.data.length)),i=0===e&&la(r,M(t,0));t.replaceData(e,n,Xg(s,4,i,a))},zi=(t,e)=>{const n=t.data.slice(e),o=n.length-Ok(n).length;B0(t,e,o)},nu=(t,e)=>{const n=t.data.slice(0,e),o=n.length-jf(n).length;B0(t,e-o,o)},ou=(t,e,n,o=!0)=>{const r=jf(t.data).length,s=o?t:e,a=o?e:t;return o?s.appendData(a.data):s.insertData(0,a.data),Ot(S(a)),n&&zi(s,r),s},xN=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!M.isTextPosition(n)&&r===o.parentNode&&s>M.before(o).offset()})(e,t)?M(e.container(),e.offset()-1):e,D0=t=>{return Ze(t.previousSibling)?C.some($(e=t.previousSibling)?M(e,e.data.length):M.after(e)):t.previousSibling?tn(t.previousSibling):C.none();var e},P0=t=>{return Ze(t.nextSibling)?C.some($(e=t.nextSibling)?M(e,0):M.before(e)):t.nextSibling?ue(t.nextSibling):C.none();var e},L0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},EN=(t,e)=>e&&pt(t.schema.getBlockElements(),Nt(e)),SN=t=>{if(It(t)){const e=ws('<br data-mce-bogus="1">');return Sr(t),Mt(t,e),C.some(M.before(e.dom))}return C.none()},er=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,P0(i=s).orThunk(()=>D0(i)).orThunk(()=>{return xe(l=a,M.after(d=i)).orThunk(()=>Ae(l,M.before(d)));var l,d})):((a,i)=>D0(i).orThunk(()=>P0(i)).orThunk(()=>{return l=a,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>Ae(l,M.before(c))).orThunk(()=>xe(l,M.after(d)));var l,d}))(r,s)).map(ot(xN,n));var o,r,s,a,i})(e,t.getBody(),n.dom),s=zn(n,ot(EN,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,d,c)=>{const u=To(l).filter(Fe),m=ks(l).filter(Fe);return Ot(l),(p=u,f=m,h=d,g=(b,v,y)=>{const x=b.dom,w=v.dom,k=x.data.length;return ou(x,w,c),y.container()===w?M(x,k):y},p.isSome()&&f.isSome()&&h.isSome()?C.some(g(p.getOrDie(),f.getOrDie(),h.getOrDie())):C.none()).orThunk(()=>(c&&(u.each(b=>nu(b.dom,b.dom.length)),m.each(b=>zi(b.dom,0))),d));var p,f,h,g})(n,r,(d=n,pt(t.schema.getTextInlineElements(),Nt(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(SN).fold(()=>{o&&L0(t,e,i)},l=>{o&&L0(t,e,C.some(l))})},_N=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,nr=(t,e)=>on(S(e),pS(t))&&!Uo(t.schema,e)&&t.dom.isEditable(e),M0=t=>{var e,n;return"rtl"===Et.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",_N.test(n))},Co=(t,e,n)=>{const o=(r=t,s=e,mt(Et.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},Ve=(t,e)=>{const n=e.container(),o=e.offset();return t?ao(n)?$(n.nextSibling)?M(n.nextSibling,0):M.after(n):_d(e)?M(n,o+1):e:ao(n)?$(n.previousSibling)?M(n.previousSibling,n.previousSibling.data.length):M.before(n):Nd(e)?M(n,o-1):e},I0=ot(Ve,!0),F0=ot(Ve,!1),U0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},ru=t=>U0(t,"Delete"),NN=t=>$g(t)||Os(t),ji=(t,e)=>{return Fn(t,e)?Bo(e,NN,(n=t,o=>yr(Qe(o),n,wt))):C.none();var n},su=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},z0=(t,e,n)=>ge(ue(n),tn(n),(o,r)=>{const s=Ve(!0,o),a=Ve(!1,r),i=Ve(!1,e);return t?xe(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):Ae(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),j0=t=>{var e;return(8===ig(e=t)||"#comment"===Nt(e)?To(t):gd(t)).bind(j0).orThunk(()=>C.some(t))},H0=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=j0(n).getOr(n),a=S(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?su(t,o):It(a)&&(so(a),o&&t.selection.setCursorLocation(a.dom,0)),!wt(n,a)){const l=yr(Qe(a),n)?[]:Qe(i=a).map(re).map(d=>mt(d,c=>!wt(i,c))).getOr([]);z(l.concat(re(n)),d=>{wt(d,a)||Fn(d,a)||!It(d)||Ot(d)})}var i},au=t=>se(t,"td,th"),iu=(t,e)=>({start:t,end:e}),ca=kn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Hi=(t,e)=>Do(S(t),"td,th",e),$0=t=>!wt(t.start,t.end),q0=(t,e)=>ta(t.start,e).bind(n=>ta(t.end,e).bind(o=>Cr(wt(n,o),n))),lu=t=>e=>q0(e,t).map(n=>({rng:e,table:n,cells:au(n)})),V0=(t,e,n,o)=>{if(n.collapsed||!t.forall($0))return C.none();if(e.isSameTable){const r=t.bind(lu(o));return C.some({start:r,end:r})}{const r=Hi(n.startContainer,o),s=Hi(n.endContainer,o),a=r.bind((l=o,d=>ta(d,l).bind(c=>No(au(c)).map(u=>iu(d,u))))).bind(lu(o)),i=s.bind((l=>d=>ta(d,l).bind(c=>Se(au(c)).map(u=>iu(u,d))))(o)).bind(lu(o));return C.some({start:a,end:i})}var l},W0=(t,e)=>us(t,n=>wt(n,e)),du=t=>ge(W0(t.cells,t.rng.start),W0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),K0=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},G0=t=>z(t,e=>{te(e,"contenteditable"),so(e)}),cu=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),uu(t,r,e,!1).each(s=>s())},Y0=t=>{const e=Fr(t),n=S(t.selection.getNode());ti(n.dom)&&It(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Pt(e,o=>wt(o,n))&&Zt(n,"data-mce-selected","1")},X0=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=C.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(S);var d;s.deleteContents(),((d,c,u)=>{u.each(m=>{c?Ot(m):(so(m),d.selection.setCursorLocation(m.dom,0))})})(t,a,i.filter(It));const l=a?e[0]:e[e.length-1];return cu(t,l,o,a),It(l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);G0(r),Y0(t)}),AN=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];cu(t,s,r,!0),cu(t,a,r,!1);const i=It(s)?e:e.slice(1),l=It(a)?n:n.slice(0,-1);G0(i.concat(l)),o.deleteContents(),Y0(t)}),uu=(t,e,n,o=!0)=>C.some(()=>{H0(t,e,n,o)}),ON=(t,e)=>C.some(()=>er(t,!1,e)),J0=(t,e)=>$t(Wn(e,t),Ts),mu=(t,e)=>$t(Wn(e,t),cd("caption")),$i=(t,e)=>C.some(()=>{so(e),t.selection.setCursorLocation(e.dom,0)}),Q0=(t,e)=>t?p0(e):h0(e),fu=(t,e)=>{const n=S(t.selection.getStart(!0)),o=Fr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=S(t.getBody());return mu(o,n).fold(()=>((r,s,a,i)=>{const l=M.fromRangeStart(r.selection.getRng());return J0(a,i).bind(d=>{return It(d)?$i(r,d):(u=a,p=d,f=l,Lr(s,r.getBody(),f).bind(h=>J0(u,S(h.getNode())).bind(g=>wt(g,p)?C.none():C.some(ht))));var u,p,f})})(t,e,o,n).orThunk(()=>Cr(((r,s)=>{const a=M.fromRangeStart(r.selection.getRng());return Q0(s,a)||je(s,r.getBody(),a).exists(i=>Q0(s,i))})(t,e),ht)),r=>((s,a,i,l)=>{const d=M.fromRangeStart(s.selection.getRng());return It(l)?$i(s,l):(u=i,p=l,f=d,Lr(m=a,(c=s).getBody(),f).fold(()=>C.some(ht),h=>{return b=m,v=f,y=h,ue((g=p).dom).bind(x=>tn(g.dom).map(w=>b?v.isEqual(x)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(x))).getOr(!0)?((g,b)=>$i(g,b))(c,p):((g,b,v)=>mu(g,S(v.getNode())).fold(()=>C.some(ht),y=>Cr(!wt(y,b),ht)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=S(r.getBody()),l=r.selection.getRng();return 0!==a.length?X0(r,a,C.none()):(d=r,u=l,mu(c=i,s).fold(()=>{return p=d,((t,e)=>{const n=(s=t,a=>wt(s,a)),o=((s,a)=>{const i=Hi(s.startContainer,a),l=Hi(s.endContainer,a);return ge(i,l,iu)})(e,n),r=((s,a)=>{const i=p=>ta(S(p),a),l=i(s.startContainer),d=i(s.endContainer),c=l.isSome(),u=d.isSome(),m=ge(l,d,wt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:m,isMultiTable:!m&&c&&u}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!$0(d=l)&&q0(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&Cc(l.start,a);var d,c}))(o,e,n)?o.map(s=>ca.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>V0(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(du).getOr([]),m=c.bind(du).getOr([]);if(u.length>0&&m.length>0){const p=K0(i,a);return C.some(ca.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((s,a,i,l)=>V0(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=du(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(ca.fullTable(d.table));if(u.length>0){if(c)return C.some(ca.partialTable(u,C.none()));{const m=K0(i,a);return C.some(ca.partialTable(u,C.some({...a,rng:m})))}}return C.none()}))(o,r,e,n)})(c,u).bind(g=>g.fold(ot(uu,p),ot(ON,p),ot(X0,p),ot(AN,p)));var p},p=>$i(d,p)));var d,c,u})(t,n,o)},or=(t,e)=>{let n=e;for(;n&&n!==t;){if(sn(n)||Rt(n))return n;n=n.parentNode}return null},BN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],DN=q.each,gu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>Pt(BN,s=>de(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return DN(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(pt(l,c)){const u=d[c];if(ie(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(pt(d,c))return!1;return!0};return!(tt(r)&&tt(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||He(r)||He(s))},isAttributeInternal:o}},Z0=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},tv=(t,e)=>{const n=(o,r)=>{_t(o,s=>{const a=De(s.nodes);z(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?void 0!==d.attr(s.filter.name):d.name===s.filter.name)&&!Ft(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},ev=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)Z0(s,a,u,l)})(i),l})(t,e,n);tv(r,o)},pu=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new ke("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new ke("#text",3)).value=Kt},nv=(t,e)=>{const n=t?.firstChild;return Y(n)&&n===t.lastChild&&n.name===e},ua=(t,e,n,o)=>o.isEmpty(e,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,r)),PN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},hu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&hu(r,e,n);t.unwrap()}},bu=(t,e,n,o=ht)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=q.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(e.isValidChild(m.name,u.name)){h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}ua(e,s,a,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(ua(e,s,a,m)||nv(m,"br"))&&m.empty().remove()}else hu(u,e);else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new ke("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new ke("div",1);o(g),u.wrap(g)}else hu(u,e)}}},ov=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),vu=t=>t.collapsed?t:(e=>{const n=M.fromRangeStart(e),o=M.fromRangeEnd(e),r=e.commonAncestorContainer;return je(!1,r,o).map(s=>!En(n,o,r)&&En(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),yu=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},rv=(t,e)=>{const n=M.after(t),o=_n(e).prev(n);return o?o.toRange():null},FN=["pre"],Cu=ti,UN=(t,e,n)=>{var o,r;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,d=ho({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=Le(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=s.getRng();const m=u.startContainer,p=t.getBody();var y,x;m===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&(y=t,Y(x=p.firstChild)&&!y.schema.getVoidElements()[x.nodeName])&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(y=>{const x=y.dom,w=vu(y.selection.getRng());y.selection.setRng(w);const k=x.getParent(w.startContainer,Cu);var R,A,T;R=x,A=w,Y(T=k)&&T===R.getParent(A.endContainer,Cu)&&Cc(S(T),A)?uu(y,w,S(k)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&$(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=s.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return Y(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&Y((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Kt)(l.firstChild)));var l,d})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,x)=>!!yu(y,x))(a,f))return u=((t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),s=yu(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||Y(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Kt||Bt(o)))?t.slice(0,-1):t;var o,e,n})((i=r.firstChild,mt(null!==(l=i?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName)));var i,l;const d=e.getRoot(),c=u=>{const m=M.fromRangeStart(n),p=_n(e.getRoot()),f=1===u?p.prev(m):p.next(m),h=f?.getNode();return!h||yu(e,h)!==s};return s?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&q.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=M.before(h),v=_n(g).next(b);return v?v.toRange():null})(u,p)})(s,a,d):c(2)?(u=s,p=d,e.insertAfter((m=a).reverse(),u),rv(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),x=v.cloneRange();return y.setStartBefore(b),x.setEndAfter(b),[y.cloneContents(),x.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),q.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),rv(m[m.length-1],p)})(s,a,d,n):null;var u,m,p})(d,a,s.getRng(),g),u&&s.setRng(u),e;!0===n.paste&&((y,x,w,k)=>{var R;const A=x.firstChild,T=x.lastChild,L=A===("bookmark"===T.attr("data-mce-type")?T.prev:T),E=kt(FN,A.name);if(L&&E){const _="false"!==A.attr("contenteditable"),D=(null===(R=y.getParent(w,y.isBlock))||void 0===R?void 0:R.nodeName.toLowerCase())===A.name,F=C.from(or(k,w)).forall(sn);return _&&D&&F}return!1})(a,g,f,t.getBody())&&(null===(o=g.firstChild)||void 0===o||o.unwrap()),(y=>{let x=y;for(;x=x.walk();)1===x.type&&x.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid){t.selection.setContent(c);let y,x=s.getNode();const w=t.getBody();for(Rs(x)?x=y=w:y=x;y&&y!==w;)x=y,y=y.parentNode;e=x===w?w.innerHTML:a.getOuterHTML(x);const k=i.parse(e),R=(_=>{for(let D=_;D;D=D.walk())if("mce_marker"===D.attr("id"))return C.some(D);return C.none()})(k),A=R.bind(PN).getOr(k);R.each(_=>_.replace(g));const T=g.children(),L=null!==(r=g.parent)&&void 0!==r?r:k;g.unwrap();const E=mt(T,_=>ov(t.schema,_,L));bu(E,t.schema,A),ev(i.getNodeFilters(),i.getAttributeFilters(),k),e=d.serialize(k),x===w?a.setHTML(w,e):a.setOuterHTML(x,e)}else e=d.serialize(g),((y,x,w)=>{var k;if("all"===w.getAttribute("data-mce-bogus"))null===(k=w.parentNode)||void 0===k||k.insertBefore(y.dom.createFragment(x),w);else{const R=w.firstChild;!R||R===w.lastChild&&"BR"===R.nodeName?y.dom.setHTML(w,x):y.selection.setContent(x,{no_events:!0})}})(t,e,f);var v;return((y,x)=>{const w=y.schema.getTextInlineElements(),k=y.dom;if(x){const R=y.getBody(),A=gu(y);q.each(k.select("*[data-mce-fragment]"),T=>{if(Y(w[T.nodeName.toLowerCase()])&&to(Kc(k,T),_=>!c0.has(_)))for(let L=T.parentElement;Y(L)&&L!==R&&!mN(k,T,L);L=L.parentElement)if(A.compare(L,T)){k.remove(T,!0);break}})}})(t,l),((y,x)=>{var w,k,R;let A;const T=y.dom,L=y.selection;if(!x)return;L.scrollIntoView(x);const E=or(y.getBody(),x);if(E&&"false"===T.getContentEditable(E))return T.remove(x),void L.select(E);let _=T.createRng();const D=x.previousSibling;if($(D)){_.setStart(D,null!==(k=null===(w=D.nodeValue)||void 0===w?void 0:w.length)&&void 0!==k?k:0);const X=x.nextSibling;$(X)&&(D.appendData(X.data),null===(R=X.parentNode)||void 0===R||R.removeChild(X))}else _.setStartBefore(x),_.setEndBefore(x);const F=T.getParent(x,T.isBlock);if(T.remove(x),F&&T.isEmpty(F)){const X=Cu(F);Sr(S(F)),_.setStart(F,0),_.setEnd(F,0),X||F.getAttribute("data-mce-fragment")||!(A=(H=>{let rt=M.fromRangeStart(H);return rt=_n(y.getBody()).next(rt),rt?.toRange()})(_))?T.add(F,T.create("br",X?{}:{"data-mce-bogus":"1"})):(_=A,T.remove(F))}L.setRng(_)})(t,a.get("mce_marker")),v=t.getBody(),q.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,x)=>{C.from(y.getParent(x,"td,th")).map(S).each(dE)})(a,s.getStart()),((y,x,w)=>{const k=bg(S(w),R=>wt(R,S(x)));ja(k,k.length-2).filter(Ne).fold(()=>Td(y,x),R=>Td(y,R.dom))})(t.schema,t.getBody(),s.getStart()),e},qi=t=>t instanceof ke,wu=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&tr(o=t)&&ue(o.getBody()).each(r=>{const s=r.getNode(),a=$n(s)?ue(s).getOr(r):r;o.selection.setRng(a.toRange())})},sv=t=>Ct(t)?t:Tt,xu=(t,e,n)=>{const o=e(t),r=sv(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=sv(i);for(;l.parentNode;){l=l.parentNode;const c=S(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},ku=_c,av=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if($e(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Eu=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!av(t,i,n)||i.parentNode===s||!!Rn(t,i,n,o,!0));return!!Rn(t,a,n,o,r)},Vi=(t,e,n)=>!(!Vt(n)||!ku(e,n.inline))||!(!Nn(n)||!ku(e,n.block))||!!$e(n)&&tt(e)&&t.is(e,n.selector),iv=(t,e,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(Ct(n.onmatch))return n.onmatch(e,n,o);if(a)if(Lf(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Ri(t,e,a[l]))return!0}else for(const l in a)if(pt(a,l)){const d=i?t.getAttrib(e,l):Ri(t,e,l),c=po(a[l],s),u=Ft(d)||hs(d);if(u&&Ft(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!ku(d,Nc(c,l)))return!1}return!0},Rn=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&tt(e))for(let i=0;i<s.length;i++){const l=s[i];if(Vi(t.dom,e,l)&&iv(a,e,l,"attributes",r,o)&&iv(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,po(d[c],o)))return;return l}}},Su=(t,e,n,o,r)=>{if(o)return Eu(t,o,e,n,r);if(o=t.selection.getNode(),Eu(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Eu(t,s,e,n,r))},$r=ne,lv=t=>(e=>{const n=[];let o=e;for(;o;){if($(o)&&o.data!==$r||o.childNodes.length>1)return[];tt(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,dv=t=>{if(t){const e=new qt(t,t);for(let n=e.current();n;n=e.next())if($(n))return n}return null},_u=t=>{const e=ee("span");return eo(e,{id:gc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Mt(e,xr($r)),e},Nu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(lv(e))er(t,!1,S(e),n);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(m=>{const p=dv(m);return p&&p.data.charAt(0)===$r&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&so(S(a)),r.setRng(s)}},Ru=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)Nu(t,e,n);else if(!(e=Yo(t.getBody(),r.getStart())))for(;e=o.get(gc);)Nu(t,e,n)},cv=(t,e)=>(t.appendChild(e),e),uv=(t,e)=>{var n;const o=cs(t,(s,a)=>cv(s,a.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return cv(o,r.createTextNode($r))},mv=t=>{const e=_u(!1),n=uv(t,e.dom);return{caretContainer:e,caretPosition:M(n,0)}},fv=(t,e)=>{const{caretContainer:n,caretPosition:o}=mv(e);return Re(S(t),n),Ot(S(t)),o},gv=(t,e)=>{const n=t.schema.getTextInlineElements();return pt(n,Nt(e))&&!en(e.dom)&&!Io(e.dom)},pv=t=>en(t.dom)&&lv(t.dom),ma={},hv=rn(["pre"]);((t,e)=>{ma[t]||(ma[t]=[]),ma[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=mt(mt(o,hv),(s=o,a=>{const i=a.previousSibling;return hv(i)&&kt(s,i)}));z(r,s=>{((a,i)=>{const l=S(i),d=Un(l).dom;Ot(l),Lo(S(a),[ee("br",d),ee("br",d),...re(l)])})(s.previousSibling,s)})}var s})})("pre");const bv=["fontWeight","fontStyle","color","fontSize","fontFamily"],vv=(t,e)=>{const n=t.get(e);return Ht(n)?$t(n,o=>{return Vt(o)&&"span"===o.inline&&fe((r=o).styles)&&Pt(_e(r.styles),s=>kt(bv,s));var r}):C.none()},yv=(t,e)=>Ae(e,M.fromRangeStart(t)).isNone(),Cv=(t,e)=>!1===xe(e,M.fromRangeEnd(t)).exists(n=>!Bt(n.getNode())||xe(e,n).isSome()),wv=t=>e=>oE(e)&&t.isEditable(e),xv=t=>mt(t.getSelectedBlocks(),wv(t.dom)),Au=q.each,Ou=t=>tt(t)&&!He(t)&&!en(t)&&!Io(t),kv=(t,e)=>{for(let n=t;n;n=n[e]){if($(n)&&bn(n.data))return t;if(tt(n)&&!He(n))return n}return t},Ev=(t,e,n)=>{const o=gu(t),r=tt(e)&&Xo(e),s=tt(n)&&Xo(n);if(r&&s){const a=kv(e,"previousSibling"),i=kv(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),q.each(q.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Sv=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=Ev(t,Qh(o),o))&&void 0!==r?r:o;Ev(t,s,Qh(s,!0))}},Tu=(t,e,n)=>{Au(t.childNodes,o=>{Ou(o)&&(e(o)&&n(o),o.hasChildNodes()&&Tu(o,e,n))})},_v=(t,e)=>n=>!(!n||!Ri(t,n,e)),Nv=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},rr=kn([{keep:[]},{rename:["name"]},{removed:[]}]),HN=/^(src|href|style)$/,Bu=q.each,Wi=_c,Rv=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Av=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(tt(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return $(o)&&n&&r>=o.data.length&&(o=new qt(o,t.getBody()).next()||o),$(o)&&!n&&0===r&&(o=new qt(o,t.getBody()).prev()||o),o},Ov=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},Du=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},Tv=(t,e,n,o,r)=>{const s=S(e),a=S(t.create(o,r)),i=n?yg(s):vg(s);return Lo(a,i),n?(Re(s,a),Rg(a,s)):(jn(s,a),Mt(a,s)),a.dom},Bv=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,a=ce(t);var i;Nn(n)&&o===s.getRoot()&&(n.list_block&&Wi(e,n.list_block)||z(De(e.childNodes),i=>{Ur(t,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=Du(s,i,a),s.setAttribs(r,Ws(t))):r=null})),$e(i=n)&&Vt(i)&&yr(At(i,"mixed"),!0)&&!Wi(n.inline,e)||s.remove(e,!0)},Dv=(t,e,n)=>nn(t)?{name:e,value:null}:{name:t,value:po(e,n)},Pv=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Lv=(t,e,n,o,r)=>{let s=!1;Bu(n.styles,(a,i)=>{const{name:l,value:d}=Dv(i,a,o),c=Nc(d,l);(n.remove_similar||ye(d)||!tt(r)||Wi(Ri(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&Pv(t,e)},Mv=(t,e,n,o,r)=>{const s=t.dom,a=gu(t),i=t.schema;if(Vt(e)&&Dd(i,e.inline)&&Uo(i,o)&&o.parentElement===t.getBody())return Bv(t,o,e),rr.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Vi(s,o,e)&&(!e.links||"A"!==o.nodeName))return rr.keep();const l=o,d=e.preserve_attributes;if(Vt(e)&&"all"===e.remove&&Ht(d)){const c=mt(s.getAttribs(l),u=>kt(d,u.name.toLowerCase()));if(s.removeAllAttribs(l),z(c,u=>s.setAttrib(l,u.name,u.value)),c.length>0)return rr.rename("span")}if("all"!==e.remove){Lv(s,l,e,n,r),Bu(e.attributes,(u,m)=>{const{name:p,value:f}=Dv(m,u,n);if(e.remove_similar||ye(f)||!tt(r)||Wi(s.getAttrib(r,p),f)){if("class"===p){const h=s.getAttrib(l,p);if(h){let g="";if(z(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void s.setAttrib(l,p,g)}}if(HN.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&rn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),Bu(e.classes,u=>{u=po(u,n),tt(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const c=s.getAttribs(l);for(let u=0;u<c.length;u++)if(!a.isAttributeInternal(c[u].nodeName))return rr.keep()}return"none"!==e.remove?(Bv(t,l,e),rr.removed()):rr.keep()},$N=(t,e,n,o)=>Mv(t,e,n,o,o).fold(J(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),J(null)),Iv=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,a,i,l,d)=>{const c=s.formatter.get(a),u=c[0],m=s.dom,p=s.selection,f=y=>{const x=((w,k,R,A,T)=>{let L;return k.parentNode&&z(Ai(w.dom,k.parentNode).reverse(),E=>{if(!L&&tt(E)&&"_start"!==E.id&&"_end"!==E.id){const _=Rn(w,E,R,A,T);_&&!1!==_.split&&(L=E)}}),L})(s,y,a,i,d);return((w,k,R,A,T,L,E,_)=>{var D,F;let X,H;const rt=w.dom;if(R){const nt=R.parentNode;for(let ct=A.parentNode;ct&&ct!==nt;ct=ct.parentNode){let ut=rt.clone(ct,!1);for(let Z=0;Z<k.length&&(ut=$N(w,k[Z],_,ut),null!==ut);Z++);ut&&(X&&ut.appendChild(X),H||(H=ut),X=ut)}E.mixed&&rt.isBlock(R)||(A=null!==(D=rt.split(R,A))&&void 0!==D?D:A),X&&H&&(null===(F=T.parentNode)||void 0===F||F.insertBefore(X,T),H.appendChild(T),Vt(E)&&Sv(w,E,0,X))}return A})(s,c,x,y,y,0,u,i)},h=y=>Pt(c,x=>fa(s,x,i,y,y)),g=y=>{const x=De(y.childNodes),w=h(y)||Pt(c,R=>Vi(m,y,R)),k=y.parentNode;if(!w&&Y(k)&&Ac(u)&&h(k),u.deep&&x.length)for(let R=0;R<x.length;R++)g(x[R]);z(["underline","line-through","overline"],R=>{tt(y)&&s.dom.getStyle(y,"text-decoration")===R&&y.parentNode&&tb(m,y.parentNode)===R&&fa(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:R}},void 0,y)})},b=y=>{const x=m.get(y?"_start":"_end");if(x){let w=x[y?"firstChild":"lastChild"];return He(k=w)&&tt(k)&&("_start"===k.id||"_end"===k.id)&&(w=w[y?"firstChild":"lastChild"]),$(w)&&0===w.data.length&&(w=y?x.previousSibling||x.nextSibling:x.nextSibling||x.previousSibling),m.remove(x,!0),w}var k;return null},v=y=>{let x,w,k=Jo(m,y,c,y.collapsed);if(u.split){if(k=Mi(k),x=Av(s,k,!0),w=Av(s,k),x!==w){if(x=Ov(x,!0),w=Ov(w,!1),Rv(m,x,w)){const A=C.from(x.firstChild).getOr(x);return f(Tv(m,A,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(Rv(m,w,x)){const A=C.from(w.lastChild).getOr(w);return f(Tv(m,A,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}x=Du(m,x,"span",{id:"_start","data-mce-type":"bookmark"}),w=Du(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const R=m.createRng();R.setStartAfter(x),R.setEndBefore(w),na(m,R,A=>{z(A,T=>{He(T)||He(T.parentNode)||f(T)})}),f(x),f(w),x=b(!0),w=b()}else x=w=f(x);k.startContainer=x.parentNode?x.parentNode:x,k.startOffset=m.nodeIndex(x),k.endContainer=w.parentNode?w.parentNode:w,k.endOffset=m.nodeIndex(w)+1}na(m,k,R=>{z(R,g)})};if(l){if(ea(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);hb(s,a,l,i)}else p.isCollapsed()&&Vt(u)&&!Fr(s).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;$(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Rn(t,u,e,n,o)){p=u;break}u.nextSibling&&(a=!0),m.push(u),u=u.parentNode}if(p)if(a){const f=s.getBookmark();l.collapse(!0);let h=Jo(r,l,i,!0);h=Mi(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(f)}else{const f=Yo(t.getBody(),p),h=_u(!1).dom;((v,y,x)=>{var w,k;const R=v.dom,A=R.getParent(x,ot(Ec,v.schema));A&&R.isEmpty(A)?null===(w=x.parentNode)||void 0===w||w.replaceChild(y,x):((T=>{const L=se(T,"br"),E=mt((_=>{const D=[];let F=_.dom;for(;F;)D.push(S(F)),F=F.lastChild;return D})(T).slice(-1),Fo);L.length===E.length&&z(E,Ot)})(S(x)),R.isEmpty(x)?null===(k=x.parentNode)||void 0===k||k.replaceChild(y,x):R.insertAfter(y,x))})(t,h,f??p);const g=((v,y,x,w,k,R)=>{const A=v.formatter,T=v.dom,L=mt(_e(A.get()),_=>_!==w&&!le(_,"removeformat")),E=(_=v,D=x,Be(L,(X,H)=>{const rt=Rc(_,H,ut=>{const Z=lt=>Ct(lt)||lt.length>1&&"%"===lt.charAt(0);return Pt(["styles","attributes"],lt=>At(ut,lt).exists(ft=>{const N=Ht(ft)?ft:ed(ft);return Pt(N,Z)}))});return _.formatter.matchNode(D,H,{},rt)?X.concat([H]):X},[]));var _,D;if(mt(E,_=>!((D,F,X)=>{const H=["inline","block","selector","attributes","styles","classes"],rt=nt=>fs(nt,(ct,ut)=>Pt(H,Z=>Z===ut));return Rc(D,F,nt=>{const ct=rt(nt);return Rc(D,X,ut=>{const Z=rt(ut);return((lt,ft,N=Kl)=>xf(N).eq(lt,ft))(ct,Z)})})})(v,_,w)).length>0){const _=x.cloneNode(!1);return T.add(y,_),A.remove(w,k,_,R),T.remove(_),C.some(_)}return C.none()})(t,h,p,e,n,o),b=uv(m.concat(g.toArray()),h);f&&Nu(t,f,!1),s.setCursorLocation(b,1),r.isEmpty(p)&&r.remove(p)}})(s,a,i,d):(Jh(s,()=>xc(s,v),y=>Vt(u)&&Su(s,a,i,y)),s.nodeChanged()),y=s,w=i,"removeformat"===(x=a)?z(xv(y.selection),k=>{z(bv,R=>y.dom.setStyle(k,R,"")),Pv(y.dom,k)}):vv(y.formatter,x).each(k=>{z(xv(y.selection),R=>Lv(y.dom,R,k,w,null))}),hb(s,a,l,i);var y,x,w})(t,e,n,o,r)},fa=(t,e,n,o,r)=>Mv(t,e,n,o,r).fold(Tt,s=>(t.dom.rename(o,s),!0),Ut),Fv=q.each,Ki=q.each,Uv=(t,e,n,o)=>{if(Ki(n.styles,(r,s)=>{t.setStyle(e,s,po(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},qN=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=s)=>{Ct(h.onformat)&&h.onformat(f,h,n,o),Uv(i,f,h,n),Ki(h.attributes,(g,b)=>{i.setAttrib(f,b,po(g,n))}),Ki(h.classes,g=>{const b=po(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return Ki(f,b=>!(!$e(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!Y(b.collapsed)||b.collapsed===a)&&i.is(h,b.selector)&&!en(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=s.inline||s.block,x=(f=>{if(st(f)){const h=i.create(f);return d(h),h}return null})(y);na(f,h,w=>{let k;const R=A=>{let T=!1,L=v,E=!1;const _=A.parentNode,D=_.nodeName.toLowerCase(),F=f.getContentEditable(A);Y(F)&&(L=v,v="true"===F,T=!0,E=Zh(t,A));const X=v&&!T;if(Bt(A)&&!((H,rt,nt,ct)=>{if(kS(H)&&Vt(rt)&&nt.parentNode){const ut=mp(H.schema),Z=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=S(r.parentNode),$t(s.dom.childNodes,i=>(s=>!wt(n,s)&&o(s))(S(i))).map(S)):C.none();var s})(t,e).isSome())(S(nt),lt=>en(lt.dom));return br(ut,ct)&&It(S(nt.parentNode),!1)&&!Z}return!1})(t,s,A,D))return k=null,void(Nn(s)&&f.remove(A));if(H=A,Nn(rt=s)&&!0===rt.wrapper&&Rn(t,H,e,n))k=null;else{if(((H,rt,nt)=>{const ct=Nn(ut=s)&&!0!==ut.wrapper&&Ec(t.schema,H)&&Ur(t,rt,y);var ut;return nt&&ct})(A,D,X)){const H=f.rename(A,y);return d(H),b.push(H),void(k=null)}if($e(s)){let H=c(r,A);if(!H&&Y(_)&&Ac(s)&&(H=c(r,_)),!Vt(s)||H)return void(k=null)}Y(x)&&((H,rt,nt,ct)=>{const ut=H.nodeName.toLowerCase(),Z=Ur(t,y,ut)&&Ur(t,rt,y),lt=!g&&$(H)&&ri(H.data),ft=en(H),N=!Vt(s)||!f.isBlock(H);return(nt||ct)&&Z&&!lt&&!ft&&N})(A,D,X,E)?(k||(k=f.clone(x,!1),_.insertBefore(k,A),b.push(k)),E&&T&&(v=L),k.appendChild(A)):(k=null,z(De(A.childNodes),R),T&&(v=L),k=null)}var H,rt};z(w,R)}),!0===s.links&&z(b,w=>{const k=R=>{"A"===R.nodeName&&d(R,s),z(De(R.childNodes),k)};k(w)}),z(b,w=>{const k=(R=>{let A=0;return z(R.childNodes,T=>{var L;Y(L=T)&&$(L)&&0===L.length||He(T)||A++}),A})(w);var R;!(b.length>1)&&f.isBlock(w)||0!==k?(Vt(s)||Nn(s)&&s.wrapper)&&(s.exact||1!==k||(w=$t((R=w).childNodes,kc).filter(T=>"false"!==f.getContentEditable(T)&&Vi(f,T,s)).map(T=>{const L=f.clone(T,!1);return d(L),f.replace(L,R,!0),f.remove(T,!0),L}).getOr(R)),((R,A,T,L)=>{Fv(A,E=>{var _,D,F;Vt(E)&&Fv(R.dom.select(E.inline,L),_=>{Ou(_)&&fa(R,E,T,_,E.exact?_:null)}),_=R.dom,F=L,(D=E).clear_child_styles&&Au(_.select(D.links?"*:not(a)":"*",F),H=>{Ou(H)&&Xo(H)&&Au(D.styles,(rt,nt)=>{_.setStyle(H,nt,"")})})})})(t,r,n,w),((R,A,T,L,E)=>{const _=E.parentNode;Rn(R,_,T,L)&&fa(R,A,L,E)||A.merge_with_parents&&_&&R.dom.getParent(_,D=>!!Rn(R,D,T,L)&&(fa(R,A,L,E),!0))})(t,s,e,n,w),((R,A,T,L)=>{if(A.styles&&A.styles.backgroundColor){const E=_v(R,"fontSize");Tu(L,_=>E(_)&&Xo(_),Nv(R,"backgroundColor",po(A.styles.backgroundColor,T)))}})(f,s,n,w),((R,A,T,L)=>{const E=_=>{if(tt(_)&&tt(_.parentNode)&&Xo(_)){const D=tb(R,_.parentNode);R.getStyle(_,"color")&&D?R.setStyle(_,"text-decoration",D):R.getStyle(_,"text-decoration")===D&&R.setStyle(_,"text-decoration",null)}};A.styles&&(A.styles.color||A.styles.textDecoration)&&(q.walk(L,E,"childNodes"),E(L))})(f,s,0,w),((R,A,T,L)=>{if(Vt(A)&&("sub"===A.inline||"sup"===A.inline)){const E=_v(R,"fontSize");Tu(L,D=>E(D)&&Xo(D),Nv(R,"fontSize",""));const _=mt(R.select("sup"===A.inline?"sub":"sup",L),Xo);R.remove(_,!0)}})(f,s,0,w),Sv(t,s,0,w)):f.remove(w,!0)})},p=ea(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!Zh(t,p))return c(r,o=p),void pb(t,e,o,n);if(s){if(o)if(ea(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,Jo(i,f,r),!0)}}else m(i,o,!0);else a&&Vt(s)&&!Fr(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const x=v.getRng();let w=x.startOffset;const k=x.startContainer.nodeValue;b=Yo(f.getBody(),v.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&w>0&&w<k.length&&R.test(k.charAt(w))&&R.test(k.charAt(w-1))){const L=v.getBookmark();x.collapse(!0);let E=Jo(f.dom,x,y);E=Mi(E),f.formatter.apply(h,g,E),v.moveToBookmark(L)}else{let L=b?dv(b):null;b&&L?.data===$r||(A=f.getDoc(),T=_u(!0).dom,b=A.importNode(T,!0),L=b.firstChild,x.insertNode(b),w=1),f.formatter.apply(h,g,b),v.setCursorLocation(L,w)}var A,T})(t,e,n):(l.setRng(vu(l.getRng())),Jh(t,()=>{xc(t,(f,h)=>{const g=h?f:Jo(i,f,r);m(i,g,!1)})},Ut),t.nodeChanged()),vv(t.formatter,e).each(f=>{var h;z(mt((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return yv(v,b[0])&&Cv(v,b[0])?b:[];{const y=Se(b).filter(k=>yv(v,k)).toArray(),x=No(b).filter(k=>Cv(v,k)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(x)}})(h=t.selection),wv(h.dom)),h=>Uv(i,h,f,n))});h=t,pt(ma,f=e)&&z(ma[f],g=>{g(h)})}var f,h;pb(t,e,o,n)},zv=(t,e,n,o)=>{(o||t.selection.isEditable())&&qN(t,e,n,o)},jv=t=>pt(t,"vars"),Hv=t=>t.selection.getStart(),$v=(t,e,n,o,r)=>Tf(e,s=>{const a=t.formatter.matchNode(s,n,r??{},o);return!ie(a)},s=>!!av(t,s,n)||!o&&Y(t.formatter.matchNode(s,n,r,!0))),qv=(t,e)=>{const n=e??Hv(t);return mt(Ai(t.dom,n),o=>tt(o)&&!Io(o))},Vv=(t,e,n)=>{const o=qv(t,e);_t(n,(r,s)=>{const a=i=>{const l=$v(t,o,s,i.similar,jv(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);jv(i)?i.callback(d,{node:c,format:s,parents:o}):z(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};z([r.withSimilar,r.withoutSimilar],a),z(r.withVars,a)})},Wv=q.explode,Kv=()=>{const t={};return{addFilter:(e,n)=>{z(Wv(e),o=>{pt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>ed(t),removeFilter:(e,n)=>{z(Wv(e),o=>{if(pt(t,o))if(Y(n)){const r=t[o],s=mt(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},Gv=(t,e,n)=>{e.addNodeFilter("br",(o,r,s)=>{const a=q.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const d=c=>c.name in a||Ld(n,c);for(let c=0,u=o.length;c<u;c++){let m=o[c],p=m.parent;if(p&&d(p)&&m===p.lastChild){let f=m.prev;for(;f;){const h=f.name;if("span"!==h||"bookmark"!==f.attr("data-mce-type")){"br"===h&&(m=null);break}f=f.prev}if(m&&(m.remove(),ua(n,i,l,p))){const h=n.getElementRule(p.name);h&&(h.removeEmpty?p.remove():h.paddEmpty&&pu(t,s,d,p))}}else{let f=m;for(;p&&p.firstChild===f&&p.lastChild===f&&(f=p,!a[p.name]);)p=p.parent;if(f===p){const h=new ke("#text",3);h.value=Kt,m.replace(h)}}}})},Pu=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:a,base64Encoded:s})}return C.none()},Yv=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},Xv=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let WN=0;const Jv=(t,e,n)=>Pu(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const a=s?o:btoa(o);return n(a,r)}}),Qv=(t,e,n)=>{const o=t.create("blobid"+WN++,e,n);return t.add(o),o},Zv=(t,e,n=!1)=>Jv(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>Yv(r,o).map(s=>Qv(t,s,o))));function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Lu(t,e){return(Lu=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function Mu(t,e,n){return(Mu=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,r,s){var a=[null];a.push.apply(a,r);var i=new(Function.bind.apply(o,a));return s&&Lu(i,s.prototype),i}).apply(null,arguments)}function cn(t){return function(e){if(Array.isArray(e))return Iu(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Iu(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Iu(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var GN=Object.hasOwnProperty,ty=Object.setPrototypeOf,YN=Object.isFrozen,XN=Object.getPrototypeOf,JN=Object.getOwnPropertyDescriptor,Oe=Object.freeze,An=Object.seal,QN=Object.create,ey=typeof Reflect<"u"&&Reflect,Gi=ey.apply,Fu=ey.construct;Gi||(Gi=function(t,e,n){return t.apply(e,n)}),Oe||(Oe=function(t){return t}),An||(An=function(t){return t}),Fu||(Fu=function(t,e){return Mu(t,cn(e))});var ny,ZN=un(Array.prototype.forEach),tR=un(Array.prototype.pop),ga=un(Array.prototype.push),Yi=un(String.prototype.toLowerCase),eR=un(String.prototype.match),wo=un(String.prototype.replace),nR=un(String.prototype.indexOf),oR=un(String.prototype.trim),Te=un(RegExp.prototype.test),Uu=(ny=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Fu(ny,e)});function un(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Gi(t,e,o)}}function xt(t,e){ty&&ty(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=Yi(o);r!==o&&(YN(e)||(e[n]=r),o=r)}t[o]=!0}return t}function ar(t){var e,n=QN(null);for(e in t)Gi(GN,t,[e])&&(n[e]=t[e]);return n}function Xi(t,e){for(;null!==t;){var n=JN(t,e);if(n){if(n.get)return un(n.get);if("function"==typeof n.value)return un(n.value)}t=XN(t)}return function(o){return console.warn("fallback value for",o),null}}var oy=Oe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zu=Oe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ju=Oe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rR=Oe(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hu=Oe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sR=Oe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ry=Oe(["#text"]),sy=Oe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$u=Oe(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ay=Oe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ji=Oe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),aR=An(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iR=An(/<%[\w\W]*|[\w\W]*%>/gm),lR=An(/^data-[\-\w.\u00B7-\uFFFF]/),dR=An(/^aria-[\-\w]+$/),cR=An(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uR=An(/^(?:\w+script|data):/i),mR=An(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fR=An(/^html$/i),pR=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=function(P){return t(P)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,m=e.HTMLFormElement,p=e.DOMParser,f=e.trustedTypes,h=l.prototype,g=Xi(h,"cloneNode"),b=Xi(h,"nextSibling"),v=Xi(h,"childNodes"),y=Xi(h,"parentNode");if("function"==typeof a){var x=r.createElement("template");x.content&&x.content.ownerDocument&&(r=x.content.ownerDocument)}var w=function(P,gt){if("object"!==sr(P)||"function"!=typeof P.createPolicy)return null;var at=null,St="data-tt-policy-suffix";gt.currentScript&&gt.currentScript.hasAttribute(St)&&(at=gt.currentScript.getAttribute(St));var jt="dompurify"+(at?"#"+at:"");try{return P.createPolicy(jt,{createHTML:function(me){return me}})}catch{return console.warn("TrustedTypes policy "+jt+" could not be created."),null}}(f,o),k=w?w.createHTML(""):"",A=r.implementation,T=r.createNodeIterator,L=r.createDocumentFragment,E=r.getElementsByTagName,_=o.importNode,D={};try{D=ar(r).documentMode?r.documentMode:{}}catch{}var F={};n.isSupported="function"==typeof y&&A&&void 0!==A.createHTMLDocument&&9!==D;var X,H,rt=aR,nt=iR,ct=lR,ut=dR,Z=uR,lt=mR,ft=cR,N=null,O=xt({},[].concat(cn(oy),cn(zu),cn(ju),cn(Hu),cn(ry))),I=null,U=xt({},[].concat(cn(sy),cn($u),cn(ay),cn(Ji))),B=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,V=null,K=!0,G=!0,W=!1,dt=!1,vt=!1,be=!1,zt=!1,Dt=!1,ve=!1,Ye=!1,oe=!0,Yn=!0,Wt=!1,gn={},Pn=null,Eo=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),rs=null,ql=xt({},["audio","video","img","source","image","track"]),Xn=null,Jn=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ss="http://www.w3.org/1998/Math/MathML",Ie="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml",Ln=Xe,Ma=!1,ZT=["application/xhtml+xml","text/html"],as=null,tB=r.createElement("form"),pk=function(P){return P instanceof RegExp||P instanceof Function},vf=function(P){as&&as===P||(P&&"object"===sr(P)||(P={}),P=ar(P),N="ALLOWED_TAGS"in P?xt({},P.ALLOWED_TAGS):O,I="ALLOWED_ATTR"in P?xt({},P.ALLOWED_ATTR):U,Xn="ADD_URI_SAFE_ATTR"in P?xt(ar(Jn),P.ADD_URI_SAFE_ATTR):Jn,rs="ADD_DATA_URI_TAGS"in P?xt(ar(ql),P.ADD_DATA_URI_TAGS):ql,Pn="FORBID_CONTENTS"in P?xt({},P.FORBID_CONTENTS):Eo,j="FORBID_TAGS"in P?xt({},P.FORBID_TAGS):{},V="FORBID_ATTR"in P?xt({},P.FORBID_ATTR):{},gn="USE_PROFILES"in P&&P.USE_PROFILES,K=!1!==P.ALLOW_ARIA_ATTR,G=!1!==P.ALLOW_DATA_ATTR,W=P.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=P.SAFE_FOR_TEMPLATES||!1,vt=P.WHOLE_DOCUMENT||!1,Dt=P.RETURN_DOM||!1,ve=P.RETURN_DOM_FRAGMENT||!1,Ye=P.RETURN_TRUSTED_TYPE||!1,zt=P.FORCE_BODY||!1,oe=!1!==P.SANITIZE_DOM,Yn=!1!==P.KEEP_CONTENT,Wt=P.IN_PLACE||!1,ft=P.ALLOWED_URI_REGEXP||ft,Ln=P.NAMESPACE||Xe,P.CUSTOM_ELEMENT_HANDLING&&pk(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&pk(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(B.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X=X=-1===ZT.indexOf(P.PARSER_MEDIA_TYPE)?"text/html":P.PARSER_MEDIA_TYPE,H="application/xhtml+xml"===X?function(gt){return gt}:Yi,dt&&(G=!1),ve&&(Dt=!0),gn&&(N=xt({},cn(ry)),I=[],!0===gn.html&&(xt(N,oy),xt(I,sy)),!0===gn.svg&&(xt(N,zu),xt(I,$u),xt(I,Ji)),!0===gn.svgFilters&&(xt(N,ju),xt(I,$u),xt(I,Ji)),!0===gn.mathMl&&(xt(N,Hu),xt(I,ay),xt(I,Ji))),P.ADD_TAGS&&(N===O&&(N=ar(N)),xt(N,P.ADD_TAGS)),P.ADD_ATTR&&(I===U&&(I=ar(I)),xt(I,P.ADD_ATTR)),P.ADD_URI_SAFE_ATTR&&xt(Xn,P.ADD_URI_SAFE_ATTR),P.FORBID_CONTENTS&&(Pn===Eo&&(Pn=ar(Pn)),xt(Pn,P.FORBID_CONTENTS)),Yn&&(N["#text"]=!0),vt&&xt(N,["html","head","body"]),N.table&&(xt(N,["tbody"]),delete j.tbody),Oe&&Oe(P),as=P)},hk=xt({},["mi","mo","mn","ms","mtext"]),bk=xt({},["foreignobject","desc","title","annotation-xml"]),eB=xt({},["title","style","font","a","script"]),Vl=xt({},zu);xt(Vl,ju),xt(Vl,rR);var yf=xt({},Hu);xt(yf,sR);var Qn=function(P){ga(n.removed,{element:P});try{P.parentNode.removeChild(P)}catch{try{P.outerHTML=k}catch{P.remove()}}},Wl=function(P,gt){try{ga(n.removed,{attribute:gt.getAttributeNode(P),from:gt})}catch{ga(n.removed,{attribute:null,from:gt})}if(gt.removeAttribute(P),"is"===P&&!I[P])if(Dt||ve)try{Qn(gt)}catch{}else try{gt.setAttribute(P,"")}catch{}},vk=function(P){var gt,at;if(zt)P="<remove></remove>"+P;else{var St=eR(P,/^[\r\n\t ]+/);at=St&&St[0]}"application/xhtml+xml"===X&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");var jt=w?w.createHTML(P):P;if(Ln===Xe)try{gt=(new p).parseFromString(jt,X)}catch{}if(!gt||!gt.documentElement){gt=A.createDocument(Ln,"template",null);try{gt.documentElement.innerHTML=Ma?"":jt}catch{}}var me=gt.body||gt.documentElement;return P&&at&&me.insertBefore(r.createTextNode(at),me.childNodes[0]||null),Ln===Xe?E.call(gt,vt?"html":"body")[0]:vt?gt.documentElement:me},yk=function(P){return T.call(P.ownerDocument||P,P,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Ia=function(P){return"object"===sr(i)?P instanceof i:P&&"object"===sr(P)&&"number"==typeof P.nodeType&&"string"==typeof P.nodeName},Zn=function(P,gt,at){F[P]&&ZN(F[P],function(St){St.call(n,gt,at,as)})},Ck=function(P){var gt,at;if(Zn("beforeSanitizeElements",P,null),(at=P)instanceof m&&("string"!=typeof at.nodeName||"string"!=typeof at.textContent||"function"!=typeof at.removeChild||!(at.attributes instanceof u)||"function"!=typeof at.removeAttribute||"function"!=typeof at.setAttribute||"string"!=typeof at.namespaceURI||"function"!=typeof at.insertBefore)||Te(/[\u0080-\uFFFF]/,P.nodeName))return Qn(P),!0;var St=H(P.nodeName);if(Zn("uponSanitizeElement",P,{tagName:St,allowedTags:N}),P.hasChildNodes()&&!Ia(P.firstElementChild)&&(!Ia(P.content)||!Ia(P.content.firstElementChild))&&Te(/<[/\w]/g,P.innerHTML)&&Te(/<[/\w]/g,P.textContent)||"select"===St&&Te(/<template/i,P.innerHTML))return Qn(P),!0;if(!N[St]||j[St]){if(!j[St]&&xk(St)&&(B.tagNameCheck instanceof RegExp&&Te(B.tagNameCheck,St)||B.tagNameCheck instanceof Function&&B.tagNameCheck(St)))return!1;if(Yn&&!Pn[St]){var jt=y(P)||P.parentNode,me=v(P)||P.childNodes;if(me&&jt)for(var Xt=me.length-1;Xt>=0;--Xt)jt.insertBefore(g(me[Xt],!0),b(P))}return Qn(P),!0}return P instanceof l&&!function(pn){var Jt=y(pn);Jt&&Jt.tagName||(Jt={namespaceURI:Xe,tagName:"template"});var Qt=Yi(pn.tagName),gr=Yi(Jt.tagName);return pn.namespaceURI===Ie?Jt.namespaceURI===Xe?"svg"===Qt:Jt.namespaceURI===ss?"svg"===Qt&&("annotation-xml"===gr||hk[gr]):!!Vl[Qt]:pn.namespaceURI===ss?Jt.namespaceURI===Xe?"math"===Qt:Jt.namespaceURI===Ie?"math"===Qt&&bk[gr]:!!yf[Qt]:pn.namespaceURI===Xe&&!(Jt.namespaceURI===Ie&&!bk[gr])&&!(Jt.namespaceURI===ss&&!hk[gr])&&!yf[Qt]&&(eB[Qt]||!Vl[Qt])}(P)?(Qn(P),!0):"noscript"!==St&&"noembed"!==St||!Te(/<\/no(script|embed)/i,P.innerHTML)?(dt&&3===P.nodeType&&(gt=wo(gt=P.textContent,rt," "),gt=wo(gt,nt," "),P.textContent!==gt&&(ga(n.removed,{element:P.cloneNode()}),P.textContent=gt)),Zn("afterSanitizeElements",P,null),!1):(Qn(P),!0)},wk=function(P,gt,at){if(oe&&("id"===gt||"name"===gt)&&(at in r||at in tB))return!1;if((!G||V[gt]||!Te(ct,gt))&&(!K||!Te(ut,gt)))if(!I[gt]||V[gt]){if(!(xk(P)&&(B.tagNameCheck instanceof RegExp&&Te(B.tagNameCheck,P)||B.tagNameCheck instanceof Function&&B.tagNameCheck(P))&&(B.attributeNameCheck instanceof RegExp&&Te(B.attributeNameCheck,gt)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(gt))||"is"===gt&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&Te(B.tagNameCheck,at)||B.tagNameCheck instanceof Function&&B.tagNameCheck(at))))return!1}else if(!Xn[gt]&&!Te(ft,wo(at,lt,""))&&("src"!==gt&&"xlink:href"!==gt&&"href"!==gt||"script"===P||0!==nR(at,"data:")||!rs[P])&&(!W||Te(Z,wo(at,lt,"")))&&at)return!1;return!0},xk=function(P){return P.indexOf("-")>0},kk=function(P){var gt,at,St,jt;Zn("beforeSanitizeAttributes",P,null);var me=P.attributes;if(me){var Xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I};for(jt=me.length;jt--;){var pn=gt=me[jt],Jt=pn.name,Qt=pn.namespaceURI;at="value"===Jt?gt.value:oR(gt.value),St=H(Jt);var gr=at;if(Xt.attrName=St,Xt.attrValue=at,Xt.keepAttr=!0,Xt.forceKeepAttr=void 0,Zn("uponSanitizeAttribute",P,Xt),at=Xt.attrValue,!Xt.forceKeepAttr)if(Xt.keepAttr)if(Te(/\/>/i,at))Wl(Jt,P);else{dt&&(at=wo(at,rt," "),at=wo(at,nt," "));var oB=H(P.nodeName);if(wk(oB,St,at)){if(at!==gr)try{Qt?P.setAttributeNS(Qt,Jt,at):P.setAttribute(Jt,at)}catch{Wl(Jt,P)}}else Wl(Jt,P)}else Wl(Jt,P)}Zn("afterSanitizeAttributes",P,null)}},nB=function P(gt){var at,St=yk(gt);for(Zn("beforeSanitizeShadowDOM",gt,null);at=St.nextNode();)Zn("uponSanitizeShadowNode",at,null),Ck(at)||(at.content instanceof s&&P(at.content),kk(at));Zn("afterSanitizeShadowDOM",gt,null)};return n.sanitize=function(P,gt){var at,St,jt,me,Xt;if((Ma=!P)&&(P="\x3c!--\x3e"),"string"!=typeof P&&!Ia(P)){if("function"!=typeof P.toString)throw Uu("toString is not a function");if("string"!=typeof(P=P.toString()))throw Uu("dirty is not a string, aborting")}if(!n.isSupported){if("object"===sr(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof P)return e.toStaticHTML(P);if(Ia(P))return e.toStaticHTML(P.outerHTML)}return P}if(be||vf(gt),n.removed=[],"string"==typeof P&&(Wt=!1),Wt){if(P.nodeName){var pn=H(P.nodeName);if(!N[pn]||j[pn])throw Uu("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof i)1===(St=(at=vk("\x3c!----\x3e")).ownerDocument.importNode(P,!0)).nodeType&&"BODY"===St.nodeName||"HTML"===St.nodeName?at=St:at.appendChild(St);else{if(!Dt&&!dt&&!vt&&-1===P.indexOf("<"))return w&&Ye?w.createHTML(P):P;if(!(at=vk(P)))return Dt?null:Ye?k:""}at&&zt&&Qn(at.firstChild);for(var Jt=yk(Wt?P:at);jt=Jt.nextNode();)3===jt.nodeType&&jt===me||Ck(jt)||(jt.content instanceof s&&nB(jt.content),kk(jt),me=jt);if(me=null,Wt)return P;if(Dt){if(ve)for(Xt=L.call(at.ownerDocument);at.firstChild;)Xt.appendChild(at.firstChild);else Xt=at;return I.shadowroot&&(Xt=_.call(o,Xt,!0)),Xt}var Qt=vt?at.outerHTML:at.innerHTML;return vt&&N["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&Te(fR,at.ownerDocument.doctype.name)&&(Qt="<!DOCTYPE "+at.ownerDocument.doctype.name+">\n"+Qt),dt&&(Qt=wo(Qt,rt," "),Qt=wo(Qt,nt," ")),w&&Ye?w.createHTML(Qt):Qt},n.setConfig=function(P){vf(P),be=!0},n.clearConfig=function(){as=null,be=!1},n.isValidAttribute=function(P,gt,at){as||vf({});var St=H(P),jt=H(gt);return wk(St,jt,at)},n.addHook=function(P,gt){"function"==typeof gt&&(F[P]=F[P]||[],ga(F[P],gt))},n.removeHook=function(P){if(F[P])return tR(F[P])},n.removeHooks=function(P){F[P]&&(F[P]=[])},n.removeAllHooks=function(){F={}},n}();const iy=q.each,hR=q.trim,bR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vR={ftp:21,http:80,https:443,mailto:25},yR=["img","video"],ly=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(Y(r=t.allow_svg_data_urls)?!r:!Y(s)||!kt(yR,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class mn{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=lo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!ly(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=hR(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new mn(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&iy(bR,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new mn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new mn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?vR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];iy(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)0!==a[u].length&&"."!==a[u]&&(".."!==a[u]?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?ms(l).join("/"):i.slice(0,d).join("/")+"/"+ms(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const CR=q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),qu="data-mce-type";let dy=0;const cy=(t,e,n,o)=>{var r,s,a,i;const l=e.validate,d=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(r=t.nodeValue)&&void 0!==r?r:"")&&(t.nodeValue=" "+t.nodeValue);const c=null!==(s=o?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===c)return;const u=S(t),m=bs(u,qu),p=Pe(u,"data-mce-bogus");if(!m&&st(p))return void("all"===p?Ot(u):Hn(u));const f=n.getElementRule(c);if(!l||f){if(Y(o)&&(o.allowedTags[c]=!0),l&&f&&!m){if(z(null!==(a=f.attributesForced)&&void 0!==a?a:[],h=>{Zt(u,h.name,"{$uid}"===h.value?"mce_"+dy++:h.value)}),z(null!==(i=f.attributesDefault)&&void 0!==i?i:[],h=>{bs(u,h.name)||Zt(u,h.name,"{$uid}"===h.value?"mce_"+dy++:h.value)}),f.attributesRequired&&!Pt(f.attributesRequired,h=>bs(u,h))||f.removeEmptyAttrs&&(h=>{const g=h.dom.attributes;return null==g||0===g.length})(u))return void Hn(u);f.outputName&&f.outputName!==c&&((h,g)=>{const b=((y,x)=>{const w=ee(x),k=dg(y);return eo(w,k),w})(h,g);jn(h,b);const v=re(h);Lo(b,v),Ot(h)})(u,f.outputName)}}else pt(d,c)?Ot(u):Hn(u)},uy=(t,e,n,o,r)=>!(o in CR&&ly(t,r,n))&&(!t.validate||e.isValid(n,o)||de(o,"data-")||de(o,"aria-")),my=(t,e)=>t.hasAttribute(qu)&&("id"===e||"class"===e||"style"===e),fy=(t,e)=>t in e.getBoolAttrs(),wR=(t,e,n)=>{const{attributes:o}=t;for(let r=o.length-1;r>=0;r--){const s=o[r],a=s.name,i=s.value;uy(e,n,t.tagName.toLowerCase(),a,i)||my(t,a)?fy(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},gy=q.makeMap,py=q.extend,hy=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],d=new ke(l.nodeName.toLowerCase(),l.nodeType);if(tt(l)){const c=l.attributes;for(let u=0,m=c.length;u<m;u++){const p=c[u];d.attr(p.name,p.value)}}else $(l)?(d.value=l.data,r&&(d.raw=!0)):(oo(l)||tE(l)||eE(l))&&(d.value=l.data);hy(d,l,n),t.append(d)}},qr=(t={},e=co())=>{const n=Kv(),o=Kv(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((h,g)=>{if(h.sanitize){const b=((t,e)=>{const n=pR();return n.addHook("uponSanitizeElement",(o,r)=>{cy(o,t,e,r)}),n.addHook("uponSanitizeAttribute",(o,r)=>{const s=o.tagName.toLowerCase(),{attrName:a,attrValue:i}=r;r.keepAttr=uy(t,e,s,a,i),r.keepAttr?(r.allowedAttributes[a]=!0,fy(a,e)&&(r.attrValue=a),t.allow_svg_data_urls&&de(i,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):my(o,a)&&(r.forceKeepAttr=!0)}),n})(h,g);return(v,y)=>{b.sanitize(v,((x,w)=>{const k={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return k.PARSER_MEDIA_TYPE=w,x.allow_script_urls?k.ALLOWED_URI_REGEXP=/.*/:x.allow_html_data_urls&&(k.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),k})(h,y)),b.removed=[]}}return(b,v)=>{const y=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=y.nextNode();)cy(x,h,g),tt(x)&&wR(x,h,g)}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,g)=>{const b=st(g.attr(qu)),v=1===g.type&&!pt(h,g.name)&&!Ld(e,g);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=r.validate,y=null!==(b=g.context)&&void 0!==b?b:r.root_name,x=((D,F,X="html")=>{const H="xhtml"===X?"application/xhtml+xml":"text/html",rt=pt(e.getSpecialElements(),F.toLowerCase()),nt=rt?`<${F}>${D}</${F}>`:D,ut=s.parseFromString("xhtml"===X?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${nt}</body></html>`:`<body>${nt}</body>`,H).body;return a(ut,H),rt?ut.firstChild:ut})(h,y,g.format);Td(e,x);const w=new ke(y,11);hy(w,x,e.getSpecialElements()),x.innerHTML="";const[k,R]=((D,F,X,H)=>{const rt=X.validate,nt=F.getNonEmptyElements(),ct=F.getWhitespaceElements(),ut=py(gy("script,style,head,html,body,title,meta,param"),F.getBlockElements()),Z=mp(F),lt=/[ \t\r\n]+/g,ft=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,O=B=>{let j=B.parent;for(;Y(j);){if(j.name in ct)return!0;j=j.parent}return!1},I=B=>B.name in ut||Ld(F,B),U=(B,j)=>!Y(j?B.prev:B.next)&&!Ft(B.parent)&&I(B.parent)&&(B.parent!==D||!0===H.isRootContent);return[B=>{var j,K,G;if(3===B.type&&!O(B)){let V=null!==(j=B.value)&&void 0!==j?j:"";V=V.replace(lt," "),G=I,(Y(K=B.prev)&&(G(K)||"br"===K.name)||U(B,!0))&&(V=V.replace(ft,"")),0===V.length?B.remove():B.value=V}},B=>{var j,G,W;if(1===B.type){const V=F.getElementRule(B.name);if(rt&&V){const K=ua(F,nt,ct,B);V.paddInEmptyBlock&&K&&(G=>{let W=G;for(;Y(W);){if(W.name in Z)return ua(F,nt,ct,W);W=W.parent}return!1})(B)?pu(X,H,I,B):V.removeEmpty&&K?I(B)?B.remove():B.unwrap():V.paddEmpty&&(K||nv(G=B,"#text")&&(null===(W=G?.firstChild)||void 0===W?void 0:W.value)===Kt)&&pu(X,H,I,B)}}else if(3===B.type&&!O(B)){let V=null!==(j=B.value)&&void 0!==j?j:"";(B.next&&I(B.next)||U(B,!1))&&(V=V.replace(N,"")),0===V.length?B.remove():B.value=V}}]})(w,e,r,g),A=[],L={nodes:{},attributes:{}},E=D=>Z0(l(),u(),D,L);if(((D,F,X)=>{const H=[];for(let rt=D,nt=rt;rt;nt=rt,rt=rt.walk()){const ct=rt;z(F,ut=>ut(ct)),Ft(ct.parent)&&ct!==D?rt=nt:H.push(ct)}for(let rt=H.length-1;rt>=0;rt--){const nt=H[rt];z(X,ct=>ct(nt))}})(w,[k,E],[R,v?D=>{return X=A,void(ov(e,F=D)&&X.push(F));var F,X}:ht]),A.reverse(),v&&A.length>0)if(g.context){const{pass:D,fail:F}=ds(A,X=>X.parent===w);bu(F,e,w,E),g.invalid=D.length>0}else bu(A,e,w,E);const _=((D,F)=>{var X;const H=null!==(X=F.forced_root_block)&&void 0!==X?X:D.forced_root_block;return!1===H?"":!0===H?"p":H})(r,g);return _&&("body"===w.name||g.isRootContent)&&((D,F)=>{const X=py(gy("script,style,head,html,body,title,meta,param"),e.getBlockElements()),H=/^[ \t\r\n]+/,rt=/[ \t\r\n]+$/;let nt=D.firstChild,ct=null;const ut=Z=>{var lt,ft;Z&&(nt=Z.firstChild,nt&&3===nt.type&&(nt.value=null===(lt=nt.value)||void 0===lt?void 0:lt.replace(H,"")),nt=Z.lastChild,nt&&3===nt.type&&(nt.value=null===(ft=nt.value)||void 0===ft?void 0:ft.replace(rt,"")))};if(e.isValidChild(D.name,F.toLowerCase())){for(;nt;){const Z=nt.next;p(X,nt)?(ct||(ct=new ke(F,1),ct.attr(r.forced_root_block_attrs),D.insert(ct,nt)),ct.append(nt)):(ut(ct),ct=null),nt=Z}ut(ct)}})(w,_),g.invalid||tv(L,g),w}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&Gv(e,t,n),t.addAttributeFilter("href",r=>{let s=r.length;const a=i=>{const l=i?q.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=r[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let s,a,i,l,d=r.length;for(;d--;)if(l=r[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let s,a,i=r.length;for(;i--;)if(s=r[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new ke("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var s;let a=r.length;for(;a--;){const i=r[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",d=q.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=o["*"];f&&f[m]&&(p=!0),f=o[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((r,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===bt.transparentSrc||Y(c.attr("data-mce-placeholder"))||(c=>Y(c.attr("data-mce-bogus")))(l)||Ft(d)||Zv(a,d,!0).each(c=>{l.attr("src",c.blobUri())})};r.addAttributeFilter("src",l=>z(l,i))}})(t,e)})(f,r),(g=r).inline_styles&&((t,e,n)=>{var o;const r=jd();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=r,i=q.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{z(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&Va(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",a.serialize(c)),f=d,z(["color","face","size"],g=>{f.attr(g,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d="html4"!==a.type;z(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(f,g,e),f;var g},by=(t,e,n)=>{const o=qi(s=t)?ho({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(qi(t)){if(r.content!==o){const s=qr({validate:!1,forced_root_block:!1,sanitize:n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},vy=(t,e)=>{if(e.no_events)return we.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?we.error(vb(t,{content:"",...n}).content):we.value(n)}},yy=(t,e,n)=>n.no_events?e:by(e,r=>vb(t,{...n,content:r}),ic(t)).content,Vu=(t,e)=>{if(e.no_events)return we.value(e);{const n=by(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},ic(t));return n.isDefaultPrevented()?(bb(t,n),we.error(void 0)):we.value(n)}},Wu=(t,e,n)=>{n.no_events||bb(t,{...n,content:e})},Ku=(t,e,n)=>({element:t,width:e,rows:n}),Cy=(t,e)=>({element:t,cells:e}),kR=(t,e)=>({x:t,y:e}),wy=(t,e)=>In(t,e).bind(Va).getOr(1),ER=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},xy=t=>Be(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),ky=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(wt(r[s],e))return C.some(kR(s,o))}return C.none()},Ey=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(Cy(a[i].element,d))}return s},SR=t=>((e,n)=>{const o=$o(e.element),r=ee("tbody");return Lo(r,n),Mt(o,r),o})(t,yt(t.rows,n=>{const o=yt(n.cells,s=>{const a=Sp(s);return te(a,"colspan"),te(a,"rowspan"),a}),r=$o(n.element);return Lo(r,o),r})),Sy=()=>Dc([]),Qi=(t,e)=>e>=0&&e<t.length&&Ir(t.charAt(e)),_y=t=>Le(t.innerText),Ny=t=>tt(t)?t.outerHTML:$(t)?lo.encodeRaw(t.data,!1):oo(t)?"\x3c!--"+t.data+"--\x3e":"",OR=Ao(()=>document.implementation.createHTMLDocument("undo")),Zi=t=>{const e=t.serializer.getTempAttrs(),n=s0(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:mt(yt(De(n.childNodes),hn(Le,Ny)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Le(n.innerHTML),bookmark:null,beforeBookmark:null}},Gu=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;z(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(d,a.childNodes[l]):a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let x,w,k,R,A;for(s[1+y]=u,a[1+y]=m+1,x=0;x<=y;++x){for(w=-x;w<=x;w+=2){for(k=w+y,s[k]=w===-x||w!==x&&s[k-1]<s[k+1]?s[k+1]:s[k-1]+1,R=s[k],A=R-u+p-w;R<m&&A<f&&n[R]===o[A];)s[k]=++R,++A;if(b%2!=0&&b-x<=w&&w<=b+x&&a[k-b]<=s[k])return l(a[k-b],w+u-p,m,f)}for(w=b-x;w<=b+x;w+=2){for(k=w+y-b,a[k]=w===b-x||w!==b+x&&a[k+1]<=a[k-1]?a[k+1]-1:a[k-1],R=a[k]-1,A=R-u+p-w;R>=u&&A>=p&&n[R]===o[A];)a[k]=R--,A--;if(b%2==0&&-x<=w&&w<=x&&a[k]<=s[k+b])return l(a[k],w+u-p,m,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(yt(De(e.childNodes),Ny),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!Y(o)||!zh(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},Yu=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Ry=t=>{const e=ee("body",OR());return Xa(e,Yu(t)),z(se(e,"*[data-mce-bogus]"),Hn),Og(e)},Xu=(t,e)=>{return!(!t||!e)&&(o=e,!(Yu(t)!==Yu(o))||((n,o)=>Ry(n)===Ry(o))(t,e));var o},Ju=t=>0===t.get(),tl=(t,e,n)=>{Ju(n)&&(t.typing=e)},Ay=(t,e)=>{t.typing&&(tl(t,!1,e),t.add())},Oy=t=>({init:{bindEvents:ht},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(Ju(e)&&s.set(ec(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,m,p)=>{const f=Zi(i),h=q.extend(m||{},f);if(!Ju(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&Xu(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=OS(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=ec(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,tl(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Gu(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Gu(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!Xu(Zi(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,Ay(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];Gu(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Su(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Rn(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Rn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Ai(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!$e(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>wt(s,S(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>xu(S(s),a=>hr(o,i=>{return Rn(n,a.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>zv(t,e,n,o),remove:(e,n,o,r)=>Iv(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Su(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?zv(r,s,a,i):Iv(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((m,p,f,h,g,b)=>{const v=p.get();z(f.split(","),y=>{const x=At(v,y).getOrThunk(()=>{const k={withSimilar:{state:Gt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Gt(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=k,k}),w=()=>{const k=qv(m);return $v(m,k,y,g,b).isSome()};if(ie(b)){const k=g?x.withSimilar:x.withoutSimilar;k.callbacks.push(h),1===k.callbacks.length&&k.state.set(w())}else x.withVars.push({state:Gt(w()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=o,r,s),{unbind:()=>((m,p,f)=>{const h=m.get();z(p.split(","),g=>At(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:mt(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:mt(b.withoutSimilar.callbacks,v=>v!==f)},withVars:mt(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(J("tree"===o.format?new ke("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?q.trim(Le(s0(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((r,s)=>{const a=r.getDoc(),i=no(S(r.getBody())),l=ee("div",a);Zt(l,"data-mce-bogus","all"),Ga(l,{position:"fixed",left:"-9999999px",top:"0"}),Xa(l,s.innerHTML),a0(l),i0(l);const d=hd(u=i)?u:S(Un(u).dom.body);var u;Mt(d,l);const c=Le(l.dom.innerText);return Ot(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const a=ce(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!oi(S(n))&&st(o)?q.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(a=>qi(r)?((i,l,d,c)=>{ev(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=ho({validate:!1},i.schema).serialize(d),m=Le(oi(S(l))?u:q.trim(u));return wu(i,m,c.no_selection),{content:d,html:m}})(o,a,r,s):((i,l,d,c)=>{if(0===(d=Le(d)).length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=ce(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,Ws(i),d)):d||(d=u),wu(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=ho({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=oi(S(l))?d:q.trim(d);return wu(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:qi(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>UN(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=Y(o)?o:n.getBody();z(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=MS(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=ph(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(i=s,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return vy(o,a).fold(Ce,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(k=>k.nodeName).getOr("div").toLowerCase(),b=S(m.cloneContents());a0(b),i0(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=_y(v),x=Le(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Qi(x,0)||Qi(x,x.length-1)){const w=f.getOr(h),k=_y(w),R=k.indexOf(y);return-1===R?y:(Qi(k,R-1)?" ":"")+y+(Qi(k,R+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=Wc(m,vc(g)),v=p.contextual?((t,e)=>{const n=Gh(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],Es(o,"table",ot(wt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Ku($o(a),0,[]);return z(se(a,"tr"),(l,d)=>{z(se(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=wy(g,"rowspan"),v=wy(g,"colspan"),y=m.rows;for(let x=f;x<f+b;x++){y[x]||(y[x]=Cy(Sp(h),[]));for(let w=p;w<p+v;w++)y[x].cells[w]=x===f&&w===p?g:$o(g)}})(i,((m,p,f)=>{for(;ER(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),Ku(i.element,xy(i.rows),i.rows)})(n);return(a=s,i=o,l=r,ky(a,i).bind(d=>ky(a,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?Ey(u,f,h,g,b):Ey(u,f,b,g,h);return Ku(u.element,xy(v),v)})(a,d,c)))).map(a=>Dc([SR(a)]));var a,i,l}).getOrThunk(Sy);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?Sy():(s=o,((i,l)=>{const d=Be(l,(c,u)=>(Mt(u,c),u),i);return l.length>0?Dc([d]):d})(S((a=r[0]).cloneContents()),((t,e)=>{const n=S(e.commonAncestorContainer),o=Wn(n,t),r=mt(o,lE),s=(l=e,$t(i=o,d=>"li"===Nt(d)&&Cc(d,l)).fold(J([]),d=>{return(c=i,$t(c,u=>"ul"===Nt(u)||"ol"===Nt(u))).map(c=>{const u=ee(Nt(c)),m=fs(_g(c),(p,f)=>de(f,"list-style"));return Ga(u,m),[ee("li"),u]}).getOr([]);var c})),a=r.concat(s.length?s:(i=>Os(i)?Qe(i).filter(Sd).fold(J([]),l=>[i,l]):Sd(i)?[i]:[])(n));var i,l;return yt(a,$o)})(s,a))));var o,r,s,a})(S(m.getBody()),b).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return yy(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Qb(S(t.getBody())).isNone()){const o=ws('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Mt(o,S(e.extractContents())),e.insertNode(o.dom),Qe(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=re(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return C.some(c);const u=a(c);if(u.isSome())return u}return C.none()};return a(r)})(n,Xb)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Nt(s=r)?1:Hg(s).fold(()=>re(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=S(t.getBody()),Qb(n).each(o=>{const r=e.selection.getBookmark();Hn(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),On=t=>pt(t.plugins,"rtc"),Qu=t=>t.rtcInstance?t.rtcInstance:Oy(t),Lt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Ty=t=>Lt(t).init.bindEvents(),By=t=>0===t.dom.length?(Ot(t),C.none()):C.some(t),Dy=(t,e,n,o)=>{t.bind(r=>((o?nu:zi)(r.dom,o?r.dom.length:0),e.filter(Fe).map(s=>((a,i,l,d)=>{const c=a.dom,u=i.dom,m=d?c.length:u.length;d?(ou(c,u,!1,!d),l.setStart(u,m)):(ou(u,c,!1,!d),l.setEnd(u,m))})(r,s,n,o)))).orThunk(()=>{return(s=e,a=o,s.filter(i=>oa.isBookmarkNode(i.dom)).bind(a?ks:To)).or(e).filter(Fe).map(s=>((a,i)=>{Qe(a).each(l=>{const d=a.dom;i&&la(l,M(d,0))?zi(d,0):!i&&da(l,M(d,d.length))&&nu(d,d.length)})})(s,o));var s,a})},Py=(t,e,n)=>{if(pt(t,e)){const o=mt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},Ly=t=>!(!t||!t.ownerDocument)&&Fn(S(t.ownerDocument),S(t)),My=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((g,b)=>{let v,y;const x=(k,R)=>$t(R,A=>g.is(A,k)),w=k=>g.getParents(k,void 0,g.getRoot());return{selectorChangedWithUnbind:(k,R)=>(v||(v={},y={},b.on("NodeChange",A=>{const T=A.element,L=w(T),E={};_t(v,(_,D)=>{x(D,L).each(F=>{y[D]||(z(_,X=>{X(!0,{node:F,selector:D,parents:L})}),y[D]=_),E[D]=_})}),_t(y,(_,D)=>{E[D]||(delete y[D],z(_,F=>{F(!1,{node:T,selector:D,parents:L})}))})})),v[k]||(v[k]=[]),v[k].push(R),x(k,w(b.selection.getStart())).each(()=>{y[k]=v[k]}),{unbind:()=>{Py(v,k,R),Py(y,k,R)}})}})(t,o),i=(g,b)=>((v,y,x={})=>{const w=(k=x,R=y,{format:"html",...k,set:!0,selection:!0,content:R});var k,R;Vu(v,w).each(k=>{const R=((T,L)=>{if("raw"!==L.format){const E=T.selection.getRng(),_=T.dom.getParent(E.commonAncestorContainer,T.dom.isBlock),D=_?{context:_.nodeName.toLowerCase()}:{},F=T.parser.parse(L.content,{forced_root_block:!1,...D,...L});return ho({validate:!1},T.schema).serialize(F)}return L.content})(v,k),A=v.selection.getRng();((T,L)=>{const E=C.from(L.firstChild).map(S),_=C.from(L.lastChild).map(S);T.deleteContents(),T.insertNode(L);const D=E.bind(To).filter(Fe).bind(By),F=_.bind(ks).filter(Fe).bind(By);Dy(D,E,T,!0),Dy(F,_,T,!1),T.collapse(!1)})(A,A.createContextualFragment(R)),v.selection.setRng(A),sa(v,A),Wu(v,R,k)})})(o,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,x,w)=>{try{return x.compareBoundaryPoints(y,w)}catch{return-1}},v=e.document;if(Y(o.bookmark)&&!tr(o)){const y=zc(o);if(y.isSome())return y.map(x=>Wc(o,[x])[0]).getOr(v.createRange())}try{const y=d();y&&!Qa(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=Wc(o,[g])[0])}catch{}if(g||(g=v.createRange()),Rs(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&s&&(0===b(g.START_TO_START,g,r)&&0===b(g.END_TO_END,g,r)?g=s:(r=null,s=null)),g},u=(g,b)=>{if(!((y=g)&&Ly(y.startContainer)&&Ly(y.endContainer)))return;var y;const v=d();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){s=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&v?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=g?.anchorNode,v=g?.focusNode;if(!g||!b||!v||Qa(b)||Qa(v))return!0;const y=t.createRng(),x=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),x.setStart(v,g.focusOffset),x.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,x)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(Zo(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();Y(g)&&Y(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(wc(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return x=v.format?v.format:"html",w=v,Lt(b).selection.getContent(x,w);var x,w})(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,x=b,C.from(y).bind(w=>C.from(w.parentNode).map(k=>{const R=v.nodeIndex(w),A=v.createRng();return A.setStart(k,R),A.setEnd(k,R+1),x&&(wc(v,A,w,!0),wc(v,A,w,!1)),A}))).each(u),g;var v,y,x},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?to(b,v=>t.isEditable(v.parentElement)):g.startContainer===g.endContainer?t.isEditable(g.startContainer):t.isEditable(g.startContainer)&&t.isEditable(g.endContainer)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const x=b.startOffset,w=b.endOffset;let k=b.commonAncestorContainer;b.collapsed||(v===y&&w-x<2&&v.hasChildNodes()&&(k=v.childNodes[x]),$(v)&&$(y)&&(v=v.length===x?Yb(v.nextSibling,!0):v.parentNode,y=0===w?Yb(y.previousSibling,!1):y.parentNode,v&&v===y&&(k=v)));const R=$(k)?k.parentNode:k;return tt(R)?R:g})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>Kb(o.getBody(),c(),g),getEnd:g=>Gb(o.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,x,w)=>{const k=[],R=v.getRoot(),A=v.getParent(x||Kb(R,y,y.collapsed),v.isBlock),T=v.getParent(w||Gb(R,y,y.collapsed),v.isBlock);if(A&&A!==R&&k.push(A),A&&T&&A!==T){let L;const E=new qt(A,R);for(;(L=E.next())&&L!==T;)v.isBlock(L)&&k.push(L)}return T&&A!==T&&T!==R&&k.push(T),k})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(vc(b).length>1)&&Ni(o)){const v=Pi(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(a(g,b),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;Y(g)?((v=o).inline?W_:G_)(v,g,b):sa(o,c(),b)},placeCaretAt:(g,b)=>u(_b(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?M.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},f=oa(p),h=wb(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},TR=(t,e,n)=>{-1===q.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},Iy=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:Et.DOM,s=e&&e.schema?e.schema:co(o),a=qr(o,s);return l=o,d=r,(i=a).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!ri(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("noscript",c=>{var u;let m=c.length;for(;m--;){const p=c[m].firstChild;p&&(p.value=lo.decode(null!==(u=p.value)&&void 0!==u?u:""))}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=g?.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===p?.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===p?.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{z(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&Gv(l,i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,Y(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const x=g.dom;let w=b.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const R=k.createHTMLDocument("");q.each("BODY"===w.nodeName?w.childNodes:[w],A=>{R.body.appendChild(R.importNode(A,!0))}),w="BODY"!==w.nodeName?R.body.firstChild:R.body,y=x.doc,x.doc=R}return A={...v,node:w},g.dispatch("PreProcess",A),y&&(x.doc=y),w;var A})(p,f,h):f),u=((p,f,h)=>{const g=Le(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||oi(S(f))?g:q.trim(g)})(r,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>"br"===w?.name,x=v.lastChild;if(y(x)){const w=x.prev;y(w)&&(x.remove(),w.remove())}})(b),b})(a,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var w;return((y,x,w)=>{return!x.no_events&&y?(R=y,A={...x,content:w},R.dispatch("PostProcess",A)).content:w;var R,A})(p,b,(w=g,ho(f,h).serialize(w)))})(e,o,s,m,d)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:ot(TR,a,n),getTempAttrs:J(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,d})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Zu=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Vu(t,o).map(r=>{const s=(i=r.content,l=r,Qu(t).editor.setContent(i,l));var i,l;return Wu(t,s.html,r),s.content}).getOr(e)},DR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),PR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),LR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Fy=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Uy=(t,e)=>{const n=mt(e,o=>pt(t,o));return _o(n)},zy=(t,e)=>{const n=q.makeMap(t.plugins," "),o=mt(e,r=>pt(n,r));return _o(o)},zR=t=>$t(Fy,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),el=Et.DOM,nl=t=>C.from(t).each(e=>e.destroy()),ol=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>pt(t,e)}})(),Vr=pe.ModelManager,jy=(t,e)=>e.dom[t],Hy=(t,e)=>parseInt(wn(e,t),10),jR=ot(jy,"clientWidth"),HR=ot(jy,"clientHeight"),$R=ot(Hy,"margin-top"),qR=ot(Hy,"margin-left"),$y=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{z(e,l=>{l.reposition()})},s=l=>{us(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(S)).map(Er).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),$t(e,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),o().fold(()=>t.focus(),u=>Ub(S(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=J(e);return(l=t).on("SkinLoaded",()=>{const d=vS(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{z(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Wr=pe.PluginManager,ir=pe.ThemeManager,qy=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=mt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Uc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{z(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},Vy=(t,e)=>{t.notificationManager.open({type:"error",text:e})},rl=(t,e)=>{t._skinLoaded?Vy(t,e):t.on("SkinLoaded",()=>{Vy(t,e)})},pa=(t,e,n)=>{gb(t,e,{message:n}),console.error(n)},ha=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,sl=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Wy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return yt(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},Ky=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let WR=0;const Gy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Yy=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&st(f.location)?c((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=Ct(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{q.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=q.grep(c=l,m=>!t.isUploaded(m.blobUri())),Promise.all(q.map(c,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=r,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=ht)},x=k=>{y(),t.markUploaded(p.blobUri(),k),i(p.blobUri(),s(p,k)),g(s(p,k))},w=k=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),a(p,k)),g(a(p,k))};v=k=>{k<0||k>100||C.from(b).orThunk(()=>C.from(h).map(Xl)).each(R=>{b=R,R.progressBar.value(k)})},f(p,v).then(x,k=>{w(st(k)?{message:k}:k)})}catch(y){g(a(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:sS(t),basePath:aS(t),credentials:iS(t),handler:lS(t)}),Xy={remove_similar:!0,inherit:!1},Kr={selector:"td,th",...Xy},YR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Kr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Kr},tablecellbordercolor:{styles:{borderColor:"%value"},...Kr},tablecellclass:{classes:["%value"],...Kr},tableclass:{selector:"table",classes:["%value"],...Xy},tablecellborderstyle:{styles:{borderStyle:"%value"},...Kr},tablecellborderwidth:{styles:{borderWidth:"%value"},...Kr}},XR=J(YR),al=q.each,We=Et.DOM,tm=t=>Y(t)&&fe(t),Jy=(t,e)=>{const n=e&&e.schema||co({}),o=a=>{const i=st(a)?{name:a,classes:[],attrs:{}}:a,l=We.create(i.name);return d=l,(c=i).classes.length>0&&We.addClass(d,c.classes.join(" ")),We.setAttribs(d,c.attrs),l;var d,c},r=(a,i,l)=>{let d;const c=i[0],u=tm(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=b?.parentsRequired;return!(!v||!v.length)&&(g&&kt(v,g)?g:v[0])})(a,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return a;const p=d?o(d):We.create("div");p.appendChild(a),l&&q.each(l,h=>{const g=o(h);p.insertBefore(g,a)});const f=tm(d)?d.siblings:void 0;return r(p,i,f)},s=We.create("div");if(t.length>0){const a=t[0],i=o(a),l=tm(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},JR=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=q.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==q.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},QR=(t,e)=>{let n="",o=xS(t);if(""===o)return"";const r=p=>st(p)?p.replace(/%(\w+)/g,""):"",s=(p,f)=>We.getStyle(f??t.getBody(),p,!0);if(st(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let a,i=e.block||e.inline||"span";const l=st(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),q.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=q.map(p.split(/(?:~\+|~|\+)/),JR),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=Jy(l,t)):a=Jy([i],t);const c=We.select(i,a)[0]||a.firstChild;al(e.styles,(p,f)=>{const h=r(p);h&&We.setStyle(c,f,h)}),al(e.attributes,(p,f)=>{const h=r(p);h&&We.setAttrib(c,f,h)}),al(e.classes,p=>{const f=r(p);We.hasClass(c,f)||We.addClass(c,f)}),t.dispatch("PreviewFormats"),We.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return al(o.split(" "),p=>{let f=s(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=s(p),"#ffffff"===_i(f).toLowerCase())||"color"===p&&"#000000"===_i(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),We.remove(a),n},Qy=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(st(a)?(Ht(i)||(i=[i]),z(i,l=>{ie(l.deep)&&(l.deep=!$e(l)),ie(l.split)&&(l.split=!$e(l)||Vt(l)),ie(l.remove)&&$e(l)&&!Vt(l)&&(l.remove="none"),$e(l)&&Vt(l)&&(l.mixed=!0,l.block_expand=!0),st(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):_t(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>tt(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{q.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=c?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(XR()),s(wS(o)),{get:a=>Y(a)?r[a]:r,has:a=>pt(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=Gt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var s;((a,i,l)=>{const d=a.selection,c=a.getBody();Ru(a,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==$r||Ru(a,Yo(c,d.getStart())),37!==i&&39!==i||Ru(a,Yo(c,d.getStart()))})(o,r.keyCode,(s=o.selection.getRng().endContainer,$(s)&&sd(s.data,Kt)))}),On(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Vv(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=C.from(s.node).map(i=>ea(i)?i:i.startContainer).bind(i=>tt(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>Hv(r));Vv(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Lt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Lt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Lt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Lt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Lt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Lt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Lt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Lt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,m=a,Lt(t).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:ot(QR,t)};var o},Zy=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},tC=t=>{const e=uo(),n=Gt(0),o=Gt(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Lt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,m=s,p=a,Lt(t).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{t.setDirty(!0);const s=Zi(t);s.bookmark=ec(t.selection),t.dispatch("change",{level:s,lastLevel:ja(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,Lt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Lt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Lt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Lt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Lt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Lt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Lt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Lt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Lt(t).undoManager.extra(l,d,c,u)}};return On(t)||((s,a,i)=>{const l=Gt(!1),d=c=>{tl(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{Zy(c.command)||(Ay(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{Zy(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=bt.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!Xu(Zi(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((bt.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&a.beforeChange()):(a.beforeChange(),tl(a,!0,i),a.add({},c),void l.set(!0));a.typing&&d(c)}}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},ZR=[9,27,Q.HOME,Q.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Q.DOWN,Q.UP,Q.LEFT,Q.RIGHT].concat(bt.browser.isFirefox()?[224]:[]),eC="data-mce-placeholder",nC=t=>"keydown"===t.type||"keyup"===t.type,oC=t=>{const e=t.keyCode;return e===Q.BACKSPACE||e===Q.DELETE},tA=(t,e)=>({from:t,to:e}),em=(t,e)=>{const n=S(t),o=S(e.container());return ji(n,o).map(r=>({block:r,position:e}))},rC=(t,e)=>Bo(e,n=>Ts(n)||sn(n.dom),n=>wt(n,t)).filter(Ne).getOr(t),sC=t=>{const e=(n=>{const o=re(n);return us(o,Ue).fold(J(o),r=>o.slice(0,r))})(t);return z(e,Ot),e},aC=(t,e)=>{const n=Wn(e,t);return $t(n.reverse(),o=>It(o)).each(Ot)},eA=(t,e,n,o)=>{if(It(n))return so(n),ue(n.dom);0===mt(vg(o),s=>!It(s)).length&&It(e)&&Re(o,ee("br"));const r=Ae(n.dom,M.before(o.dom));return z(sC(e),s=>{Re(o,s)}),aC(t,e),r},nA=(t,e,n)=>{if(It(n)){if(It(e)){const s=cs((a=>{const i=(l,d)=>fd(l).fold(()=>d,c=>ni(c)?i(c,d.concat($o(c))):d);return i(a,[])})(n),(a,i)=>(Ag(a,i),i),Bs());Sr(e),Mt(e,s)}return Ot(n),ue(e.dom)}const o=tn(n.dom);return z(sC(e),r=>{Mt(n,r)}),aC(t,e),o},iC=(t,e)=>{Mr(t,e.dom).bind(n=>C.from(n.getNode())).map(S).filter(Fo).each(Ot)},lC=(t,e,n)=>{return iC(!0,e),iC(!1,n),(o=e,r=n,Fn(r,o)?((s,a)=>{const i=Wn(a,s);return C.from(i[i.length-1])})(r,o):C.none()).fold(ot(nA,t,e,n),ot(eA,t,e,n));var o,r},dC=(t,e,n,o)=>e?lC(t,o,n):lC(t,n,o),nm=(t,e)=>{const n=S(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=em(i,M.fromRangeStart(d)),u=c.bind(m=>je(l,i,m.position).bind(p=>em(i,p).map(f=>{return h=i,g=l,Bt((b=f).position.getNode())&&!It(b.block)?Mr(!1,b.block.dom).bind(v=>v.isEqual(b.position)?je(g,h,v).bind(y=>em(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return ge(c,u,tA).filter(m=>{return!wt((p=m).from.block,p.to.block)&&((p,f)=>{const h=S(p);return wt(rC(h,f.from.block),rC(h,f.to.block))})(i,m)&&(p=>!1===Rt(p.from.block.dom)&&!1===Rt(p.to.block.dom))(m)&&(p=>{const f=h=>$g(h)||Bd(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(r,s,a):C.none()).map(r=>()=>{dC(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},cC=(t,e)=>{const n=S(e),o=ot(wt,t);return zn(n,Ts,o).isSome()},om=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=S(t.getBody());return((n,o)=>{const r=Ae(n.dom,M.fromRangeStart(o)).isNone(),s=xe(n.dom,M.fromRangeEnd(o)).isNone();return!(cC(a=n,(i=o).startContainer)||cC(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return ge(ji(n,S(r.startContainer)),ji(n,S(r.endContainer)),(s,a)=>wt(s,a)?C.none():C.some(()=>{r.deleteContents(),dC(n,!0,s,a).each(i=>{o.setRng(i.toRange())})})).getOr(C.none())})(e,t.selection);var n})(t),Kn=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),ba=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),rm=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=cc(1,o.getBody(),r),i=M.fromRangeStart(a),l=i.getNode();if(Gs(l))return Kn(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Gs(d))return Kn(1,o,d,!1,!1);const c=or(o.dom.getRoot(),i.getNode());return Gs(c)?Kn(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,rA=t=>vo(t)||aa(t),sA=t=>yo(t)||ia(t),uC=(t,e,n,o,r,s)=>{var a,i;Kn(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,$(i=n)&&0===i.data.length&&a.remove(i)},sm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!$(r.commonAncestorContainer))return C.none();const s=o?Yt.Forwards:Yt.Backwards,a=_n(n.getBody()),i=ot(uc,o?a.next:a.prev),l=o?rA:sA,d=Zs(s,n.getBody(),r),c=i(d),u=c&&Ve(o,c);if(!u||!xi(d,u))return C.none();if(l(u))return C.some(()=>uC(n,r,d.getNode(),s,o,u));const m=i(u);return m&&l(m)&&xi(u,m)?C.some(()=>uC(n,r,d.getNode(),s,o,m)):C.none()})(t,e),am=(t,e)=>{const n=t.getBody();return e?ue(n).filter(vo):tn(n).filter(yo)},im=t=>{const e=t.selection.getRng();return!e.collapsed&&(am(t,!0).exists(n=>n.isEqual(M.fromRangeStart(e)))||am(t,!1).exists(n=>n.isEqual(M.fromRangeEnd(e))))},Ke=kn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),mC=(t,e,n)=>je(e,t,n).bind(o=>{return r=o.getNode(),Y(r)&&(Ts(S(r))||Os(S(r)))||((s,a,i,l)=>{const d=c=>ni(S(c))&&!En(i,l,s);return Oh(!a,i).fold(()=>Oh(a,l).fold(Tt,d),d)})(t,e,n,o)?C.none():e&&Rt(o.getNode())||!e&&Rt(o.getNode(!0))?((s,a,i,l)=>{const d=l.getNode(!a);return ji(S(s),S(i.getNode())).map(c=>It(c)?Ke.remove(c.dom):Ke.moveToElement(d)).orThunk(()=>C.some(Ke.moveToElement(d)))})(t,e,n,o):e&&yo(n)||!e&&vo(n)?C.some(Ke.moveToPosition(o)):C.none();var r}),fC=(t,e)=>C.from(or(t.getBody(),e)),gC=t=>{const e=t.dom,n=t.selection,o=or(t.getBody(),n.getNode());if(sn(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(M.before(r).toRange())}return!0},lm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return fC(t,n).filter(Rt).fold(()=>((o,r,s)=>{const a=cc(r?1:-1,o,s),i=M.fromRangeStart(a),l=S(o);return!r&&yo(i)?C.some(Ke.remove(i.getNode(!0))):r&&vo(i)?C.some(Ke.remove(i.getNode())):!r&&vo(i)&&Zc(l,i)?yN(l,i).map(d=>Ke.remove(d.getNode())):r&&yo(i)&&Qc(l,i)?CN(l,i).map(d=>Ke.remove(d.getNode())):(d=o,((m,p)=>{const f=p.getNode(!m),h=m?"after":"before";return tt(f)&&f.getAttribute("data-mce-caret")===h})(c=r,u=i)?(m=c,p=u.getNode(!c),Ft(p)?C.none():m&&Rt(p.nextSibling)?C.some(Ke.moveToElement(p.nextSibling)):!m&&Rt(p.previousSibling)?C.some(Ke.moveToElement(p.previousSibling)):C.none()).orThunk(()=>mC(d,c,u)):mC(d,c,u).bind(m=>((p,f,h)=>h.fold(g=>C.some(Ke.remove(g)),g=>C.some(Ke.moveToElement(g)),g=>En(f,g,p)?C.none():C.some(Ke.moveToPosition(g))))(d,u,m)));var d,c,u,m,p})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),er(r,s,S(a)),!0)),((r,s)=>a=>{const i=s?M.before(a):M.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(ht))})(t,e):((n,o)=>{const r=n.selection.getNode();return Rt(r)&&!ti(r)?fC(n,r.parentNode).filter(Rt).fold(()=>C.some(()=>{var s;s=S(n.getBody()),z(se(s,".mce-offscreen-selection"),Ot),er(n,o,S(n.selection.getNode())),su(n)}),()=>C.some(ht)):im(n)?C.some(()=>{H0(n,n.selection.getRng(),S(n.getBody()))}):C.none()})(t,e),dm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=M.fromRangeStart(n.selection.getRng());return je(o,n.getBody(),r).filter(s=>o?gN(s):pN(s)).bind(s=>dc(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),Gr=$,pC=t=>Gr(t)&&t.data[0]===ne,hC=t=>Gr(t)&&t.data[t.data.length-1]===ne,bC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(ne)},il=(t,e)=>t?(n=>{var o;if(Gr(n.previousSibling))return hC(n.previousSibling)||n.previousSibling.appendData(ne),n.previousSibling;if(Gr(n))return pC(n)||n.insertData(0,ne),n;{const r=bC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(Gr(n.nextSibling))return pC(n.nextSibling)||n.nextSibling.insertData(0,ne),n.nextSibling;if(Gr(n))return hC(n)||n.appendData(ne),n;{const s=bC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),iA=ot(il,!0),lA=ot(il,!1),vC=(t,e)=>$(t.container())?il(e,t.container()):il(e,t.getNode()),yC=(t,e)=>{const n=e.get();return n&&t.container()===n&&ao(n)},cm=(t,e)=>e.fold(n=>{Ko(t.get());const o=iA(n);return t.set(o),C.some(M(o,o.length-1))},n=>ue(n).map(o=>{if(yC(o,t)){const r=t.get();return M(r,1)}{Ko(t.get());const r=vC(o,!0);return t.set(r),M(r,1)}}),n=>tn(n).map(o=>{if(yC(o,t)){const r=t.get();return M(r,r.length-1)}{Ko(t.get());const r=vC(o,!1);return t.set(r),M(r,r.length-1)}}),n=>{Ko(t.get());const o=lA(n);return t.set(o),C.some(M(o,1))}),CC=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},he=kn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),wC=(t,e)=>go(e,t)||t,dA=(t,e,n)=>{const o=I0(n),r=wC(e,o.container());return Co(t,r,o).fold(()=>xe(r,o).bind(ot(Co,t,r)).map(s=>he.before(s)),C.none)},cA=(t,e)=>null===Yo(t,e),xC=(t,e,n)=>Co(t,e,n).filter(ot(cA,e)),uA=(t,e,n)=>{const o=F0(n);return xC(t,e,o).bind(r=>Ae(r,o).isNone()?C.some(he.start(r)):C.none())},mA=(t,e,n)=>{const o=I0(n);return xC(t,e,o).bind(r=>xe(r,o).isNone()?C.some(he.end(r)):C.none())},fA=(t,e,n)=>{const o=F0(n),r=wC(e,o.container());return Co(t,r,o).fold(()=>Ae(r,o).bind(ot(Co,t,r)).map(s=>he.after(s)),C.none)},kC=t=>!M0(um(t)),Tn=(t,e,n)=>CC([dA,uA,mA,fA],[t,e,n]).filter(kC),um=t=>t.fold(Ce,Ce,Ce,Ce),EC=t=>t.fold(J("before"),J("start"),J("end"),J("after")),ll=t=>t.fold(he.before,he.before,he.after,he.after),mm=t=>t.fold(he.start,he.start,he.end,he.end),gA=(t,e,n,o,r,s)=>ge(Co(e,n,o),Co(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=go(d,l),m=go(c,l);return Y(u)&&u===m})(n,a,i)?he.after(t?a:i):s).getOr(s),pA=(t,e)=>t.fold(Ut,n=>{return r=e,!(EC(o=n)===EC(r)&&um(o)===um(r));var o,r}),hA=(t,e)=>t?e.fold(hn(C.some,he.start),C.none,hn(C.some,he.after),C.none):e.fold(C.none,hn(C.some,he.before),C.none,hn(C.some,he.end)),SC=(t,e,n)=>{const o=t?1:-1;return e.setRng(M(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Bn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Bn||(Bn={}));const dl=(t,e)=>t===Yt.Backwards?ms(e):e,bA=(t,e,n)=>t===Yt.Forwards?e.next(n):e.prev(n),vA=(t,e,n,o)=>Bt(o.getNode(e===Yt.Forwards))?Bn.Br:!1===En(n,o)?Bn.Block:Bn.Wrap,_C=(t,e,n,o)=>{const r=_n(n);let s=o;const a=[];for(;s;){const i=bA(e,r,s);if(!i)break;if(Bt(i.getNode(!1)))return e===Yt.Forwards?{positions:dl(e,a).concat([i]),breakType:Bn.Br,breakAt:C.some(i)}:{positions:dl(e,a),breakType:Bn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=vA(0,e,s,i);return{positions:dl(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:dl(e,a),breakType:Bn.Eol,breakAt:C.none()}},NC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===Yt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),fm=(t,e)=>Be(t,(n,o)=>n.fold(()=>C.some(o),r=>ge(Se(r.getClientRects()),Se(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),cl=(t,e)=>Se(e.getClientRects()).bind(n=>fm(t,n.left)),va=ot(_C,M.isAbove,-1),ya=ot(_C,M.isBelow,1),RC=ot(NC,-1,va),AC=ot(NC,1,ya),OC=(t,e)=>va(t,e).breakAt.isNone(),TC=(t,e)=>ya(t,e).breakAt.isNone(),yA=(t,e)=>cl(RC(t,e),e),CA=(t,e)=>cl(AC(t,e),e),wA=Rt,BC=(t,e)=>Math.abs(t.left-e),DC=(t,e)=>Math.abs(t.right-e),PC=(t,e)=>qa(t,(n,o)=>{const r=Math.min(BC(n,e),DC(n,e)),s=Math.min(BC(o,e),DC(o,e));return s===r&&br(o,"node")&&wA(o.node)||s<r?o:n}),xA=t=>{const e=n=>yt(n,o=>{const r=Vo(o);return r.node=t,r});if(tt(t))return e(t.getClientRects());if($(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},LC=t=>Je(t,xA);var Ca;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ca||(Ca={}));const MC=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let m=LC([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,Ro(i))&&a++,f.line=a,r(f))return!0;i.push(f)}}return!1},d=Ro(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=Xs(h,u,Gg,m);)if(p(h))return})(t,o,l,c)),i},kA=ot(MC,Ca.Up,Hs,$s),EA=ot(MC,Ca.Down,$s,Hs),IC=t=>Ro(t.getClientRects()),FC=t=>e=>e.line>t,gm=t=>e=>e.line===t,Gn=(t,e)=>{t.selection.setRng(e),sa(t,t.selection.getRng())},pm=(t,e,n)=>C.some(rm(t,e,n)),UC=(t,e,n,o,r,s)=>{const a=e===Yt.Forwards,i=_n(t.getBody()),l=ot(uc,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const f=gi(n);if(s(f))return Kn(e,t,f,e===Yt.Backwards,!1);if(im(t)){const h=n.cloneRange();return h.collapse(e===Yt.Backwards),C.from(h)}}const c=Zs(e,t.getBody(),n);if(d(c))return ba(t,c.getNode(!a));let u=l(c);const m=Vg(n);if(!u)return m?C.some(n):C.none();if(u=Ve(a,u),d(u))return Kn(e,t,u.getNode(!a),a,!1);const p=l(u);return p&&d(p)&&xi(u,p)?Kn(e,t,p.getNode(!a),a,!1):m?pm(t,u.toRange(),!1):C.none()},zC=(t,e,n,o,r,s)=>{const a=Zs(e,t.getBody(),n),i=Ro(a.getClientRects()),l=e===Ca.Down,d=t.getBody();if(!i)return C.none();if(im(t)){const h=l?M.fromRangeEnd(n):M.fromRangeStart(n);return(l?CA:yA)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?EA:kA)(d,FC(1),a),u=mt(c,gm(1)),m=i.left,p=PC(u,m);if(p&&s(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return Kn(e,t,p.node,h<g,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):gi(n),f){const h=((b,v,y,x)=>{const w=_n(v);let k,R,A,T;const L=[];let E=0;1===b?(k=w.next,R=$s,A=Hs,T=M.after(x)):(k=w.prev,R=Hs,A=$s,T=M.before(x));const _=IC(T);do{if(!T.isVisible())continue;const D=IC(T);if(A(D,_))continue;L.length>0&&R(D,Ro(L))&&E++;const F=Vo(D);if(F.position=T,F.line=E,y(F))return L;L.push(F)}while(T=k(T));return L})(e,d,FC(1),f);let g=PC(mt(h,gm(1)),m);if(g||(g=Ro(mt(h,gm(0))),g))return pm(t,g.position.toRange(),!1)}return 0===u.length?hm(t,l).filter(l?r:o).map(h=>rm(t,h.toRange(),!1)):C.none()},hm=(t,e)=>{const n=t.selection.getRng(),o=e?M.fromRangeEnd(n):M.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),zn(S(s),i=>b_(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=ya(r,o);return No(i.positions)}{const i=va(r,o);return Se(i.positions)}},jC=(t,e,n)=>hm(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),ul=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},HC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},$C=(t,e,n)=>cm(e,n).map(o=>(ul(t,o),n)),qC=(t,e,n)=>!!Ks(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=M.fromRangeStart(s);if(s.collapsed)return l;{const d=M.fromRangeEnd(s);return i?Ae(a,d).getOr(d):xe(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Ve(s,l),c=Tn(a,i,d);return Tn(a,i,d).bind(ot(hA,s)).orThunk(()=>((u,m,p,f,h)=>{const g=Ve(u,h);return je(u,p,g).map(ot(Ve,u)).fold(()=>f.map(ll),b=>Tn(m,p,b).map(ot(gA,u,m,p,g,b)).filter(ot(pA,f))).filter(kC)})(s,a,i,c,l))})(n,ot(nr,t),o,r).bind(s=>$C(t,e,s))})(t,e,n).isSome(),VC=(t,e,n)=>!!Ks(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?M.fromRangeEnd(s):M.fromRangeStart(s);return!!Ct(r.selection.getSel().modify)&&(o&&_d(a)?SC(!0,r.selection,a):!(o||!Nd(a))&&SC(!1,r.selection,a))})(t,e),NA=ot(VC,!0),RA=ot(VC,!1),ml=(t,e,n)=>{if(Ks(t)){const o=hm(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?M.fromRangeEnd(r):M.fromRangeStart(r)});return Tn(ot(nr,t),t.getBody(),o).exists(r=>{const s=ll(r);return cm(n,s).exists(a=>(ul(t,a),!0))})}return!1},WC=(t,e)=>n=>cm(e,n).map(o=>()=>ul(t,o)),KC=(t,e,n,o)=>{const r=t.getBody(),s=ot(nr,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),ru(t),Tn(s,r,M.fromRangeStart(t.selection.getRng())).map(mm).bind(WC(t,e)).each(ls)}),t.nodeChanged()},bm=(t,e,n)=>{if(t.selection.isCollapsed()&&Ks(t)){const o=M.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),m=i.container(),go(m,u)||u),d=ot(nr,r),c=Tn(d,l,i);var u,m;return c.bind(u=>a?u.fold(J(C.some(mm(u))),C.none,J(C.some(ll(u))),C.none):u.fold(C.none,J(C.some(ll(u))),C.none,J(C.some(mm(u))))).map(WC(r,s)).getOrThunk(()=>{const u=Lr(a,l,i),m=u.bind(p=>Tn(d,l,p));return ge(c,m,()=>Co(d,l,i).bind(p=>{return ge(ue(f=p),tn(f),(h,g)=>{const b=Ve(!0,h),v=Ve(!1,g);return xe(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{er(r,a,S(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{a?KC(r,s,i,p):KC(r,s,p,i)})))})})(t,e,n,o)}return C.none()},GC=(t,e)=>{const n=S(t.getBody()),o=S(t.selection.getStart()),r=Wn(o,n);return us(r,e).fold(J(r),s=>r.slice(0,s))},AA=t=>1===pd(t),YC=(t,e)=>{const n=ot(gv,t);return Je(e,o=>n(o)?[o.dom]:[])},XC=t=>{const e=GC(t,Ue);return YC(t,e)},JC=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Bt(s)&&!ye(a)&&r.dom.isEmpty(a)})(t,n)||pv(S(n))?fv(n,e):((r,s)=>{const{caretContainer:a,caretPosition:i}=mv(s);return r.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},QC=t=>$(t.startContainer),vm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=mt(GC(t,r=>Ue(r)||pd(r)>1),AA);return No(n).bind(o=>{const r=M.fromRangeStart(t.selection.getRng());return z0(e,r,o.dom)&&!pv(o)?C.some(()=>((s,a,i,l)=>{const d=YC(a,l);if(0===d.length)er(a,s,i);else{const c=fv(i.dom,d);a.selection.setRng(c.toRange())}})(e,t,o,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&QC(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!ye(r)&&gv(n,S(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!ye(s)&&!ye(a)&&s.isEqualNode(a)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===($(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=XC(n);return C.some(()=>{ru(n),((r,s)=>{const a=za(s,XC(r));a.length>0&&JC(r,a)})(n,o)})}return C.none()})(t),wa=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(QC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>zn(t,r=>en(r.dom),Ue).isSome())(S(e.selection.getStart()))})(t)&&JC(t,[]),!0),ym=(t,e,n)=>Y(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),er(t,e,S(n))}):C.none(),Cm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?aa:ia,a=Zs(o?Yt.Forwards:Yt.Backwards,n.getBody(),n.selection.getRng());return r(a)?ym(n,o,a.getNode(!o)):C.from(Ve(o,a)).filter(i=>r(i)&&xi(a,i)).bind(i=>ym(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return xn(r)?ym(n,o,r):C.none()})(t,e),wm=t=>Va(t??"").getOr(0),ZC=(t,e)=>(t||"table"===Nt(e)?"margin":"padding")+("rtl"===wn(e,"direction")?"-right":"-left"),t1=t=>{const e=n1(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,to(e,r=>{const s=ZC(dh(n),r),a=Ya(r,s).map(wm).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},e1=t=>Sd(t)||Os(t),n1=t=>mt(vd(t.selection.getSelectedBlocks()),e=>!e1(e)&&!Qe(e).exists(e1)&&Bo(e,n=>sn(n.dom)||Rt(n.dom)).exists(n=>sn(n.dom))),o1=(t,e)=>{var n,o;const{dom:r}=t,s=uS(t),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=wm(s),l=dh(t);z(n1(t),d=>{((c,u,m,p,f,h)=>{const g=ZC(m,S(h)),b=wm(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(r,e,l,i,a,d.dom)})},r1=t=>o1(t,"outdent"),s1=t=>{if(t.selection.isCollapsed()&&t1(t)){const e=t.dom,n=t.selection.getRng(),o=M.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Jc(S(r),o))return C.some(()=>r1(t))}return C.none()},a1=(t,e,n)=>hr([s1,lm,sm,(o,r)=>bm(o,e,r),nm,fu,dm,Cm,om,vm],o=>o(t,n)).filter(o=>t.selection.isEditable()),i1=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),xm=(t,e)=>pt(t,e.nodeName),PA=(t,e)=>!!$(e)||!!tt(e)&&!xm(t.getBlockElements(),e)&&!He(e)&&!Uo(t,e),LA=(t,e)=>!(!$(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!xm(t,e.nextSibling))),l1=t=>t.dom.create(ce(t),Ws(t)),MA=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,d=!1;const c=ce(t);if(!s||!tt(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(y=r,x=a,Pt(b0(S(s),S(x)),k=>xm(y,k.dom))))return;var y,x;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=tr(t);let v=a.firstChild;for(;v;)if(tt(v)&&kE(o,v),PA(o,v)){if(LA(r,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=l1(t),a.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),t.nodeChanged())},d1=(t,e,n)=>{const o=S(l1(t)),r=Bs();Mt(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},c1=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),IA=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},u1=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Rd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},FA=(t,e)=>{const n=Ss(S(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void u1(t,n)):void(qg(n)&&(u1(t,n),t.undoManager.add()))},m1=Rt,f1=(t,e,n)=>{const o=_n(t.getBody()),r=ot(uc,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(M.fromRangeStart(n))){const a=S((i=>{const l=i.dom.create(ce(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?jn(S(s),a):Re(S(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},g1=(t,e)=>((n,o)=>{const r=o?Yt.Forwards:Yt.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,UC(i,a,l,vo,yo,m1)).orThunk(()=>(f1(n,r,s),C.none()));var a,i,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return M0(r)?!o:o})(t.selection,e)).exists(n=>(Gn(t,n),!0)),p1=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,zC(i,a,l,d=>vo(d)||p0(d),d=>yo(d)||h0(d),m1)).orThunk(()=>(f1(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(Gn(t,n),!0)),h1=(t,e)=>jC(t,e,e?yo:vo),fl=(t,e)=>am(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Gn(t,n),!0)),UA=t=>kt(["figcaption"],Nt(t)),b1=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=S(n.getBody()),s=M.fromRangeStart(n.selection.getRng());return((a,i)=>{const l=ot(wt,i);return Bo(S(a.container()),Ue,l).filter(UA)})(s,r).exists(()=>{if(a=r,l=s,o?TC(a.dom,l):OC(a.dom,l)){const a=d1(n,r,o?Mt:Rg);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),v1=(t,e)=>{return n=t,e?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=M.fromRangeStart(i);return!(s.getBody().lastChild!==a||!TC(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>C.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const d=a.selection.getRng(),c=M.fromRangeStart(d);return!(a.getBody().firstChild!==i||!OC(l,c)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1);var n},y1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},C1=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,it=(t,...e)=>()=>t.apply(null,e),xa=(t,e)=>{return $t((o=e,Je(yt(t,s=>({...y1,...s})),r=>C1(r,o)?[r]:[])),n=>n.action());var o},w1=(t,e)=>{return hr((o=e,Je(yt(t,s=>({...y1,...s})),r=>C1(r,o)?[r]:[])),n=>n.action());var o},x1=(t,e)=>{const n=e?Yt.Forwards:Yt.Backwards,o=t.selection.getRng();return UC(t,n,o,aa,ia,xn).exists(r=>(Gn(t,r),!0))},k1=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return zC(t,n,o,aa,ia,xn).exists(r=>(Gn(t,r),!0))},E1=(t,e)=>jC(t,e,e?ia:aa),S1=kn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ka={...S1,none:t=>S1.none(t)},_1=(t,e,n)=>Je(re(t),o=>on(o,e)?n(o)?[o]:[]:_1(o,e,n)),N1=(t,e)=>Do(t,"table",e),km=(t,e,n,o,r=Ut)=>{const s=1===o;if(!s&&n<=0)return ka.first(t[0]);if(s&&n>=t.length-1)return ka.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?ka.middle(e,i):km(t,e,a,o,r)}},R1=(t,e)=>N1(t,e).bind(n=>{const o=_1(n,"th,td",Ut);return us(o,r=>wt(t,r)).map(r=>({index:r,all:o}))}),A1=(t,e,n,o,r)=>{const s=se(S(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Be(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(mt((i=t,Je(s,d=>{const c={left:(u=Vo(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},zA=ot(A1,t=>t.bottom,(t,e)=>t.y<e),jA=ot(A1,t=>t.top,(t,e)=>t.y>e),O1=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Bn.Wrap&&0===r.positions.length||!Bt(n.getNode())&&(r=>r.breakType===Bn.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},HA=ot(O1,va),$A=ot(O1,ya),qA=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!Eh()||!((a,i,l)=>{const d=M.fromRangeStart(i);return Mr(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(Kn(s,t,n,!e,!1).each(a=>{Gn(t,a)}),0))},T1=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return $n(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>Gn(t,n.toRange()),s=>Mr(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Gn(t,n.toRange()),a=>{return i=e,d=s,void(l=t).undoManager.transact(()=>{const c=i?jn:Re,u=d1(l,S(d),c);Gn(l,u)});var i,l,d}))},VA=(t,e,n,o)=>{const r=t.selection.getRng(),s=M.fromRangeStart(r),a=t.getBody();if(!e&&HA(o,s)){const i=(l=a,(u=d=n,m=c=s,Se(m.getClientRects()).bind(p=>zA(u,p.left,p.top)).bind(p=>{return cl(tn(f=p).map(h=>va(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>Se(c.getClientRects()).bind(u=>fm(RC(l,M.before(d)),u.left))).getOr(M.before(d)));return T1(t,e,i),!0}var l,d,c,u,m;if(e&&$A(o,s)){const i=((l,d,c)=>((u,m)=>No(m.getClientRects()).bind(p=>jA(u,p.left,p.top)).bind(p=>{return cl(ue(f=p).map(h=>[h].concat(ya(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Se(c.getClientRects()).bind(u=>fm(AC(l,M.after(d)),u.left))).getOr(M.after(d)))(a,n,s);return T1(t,e,i),!0}return!1},B1=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),D1=(t,e)=>B1(t,e,qA),Em=(t,e)=>B1(t,e,VA),P1=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,((a,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=S(d.childNodes[c]);if(i(u))return C.some(u);const m=l(d.childNodes[c]);if(m.isSome())return m}return C.none()};return l(a.dom)})(s,Xb)).map(a=>{return(t=>{const e=jr.getWin(t).dom,n=(r,s,a,i)=>Tc(e,r,s,a,i),o=t.match({domRange:s=>{const a=S(s.startContainer),i=S(s.endContainer);return Sb(a,s.startOffset,i,s.endOffset)},relative:I_,exact:Sb});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>ra.rtl(S(c.endContainer),c.endOffset,S(c.startContainer),c.startOffset)).getOrThunk(()=>kb(0,ra.ltr,d)):kb(0,ra.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:J(d),rtl:C.none}),relative:(d,c)=>({ltr:Ao(()=>xb(i,d,c)),rtl:Ao(()=>C.some(xb(i,c,d)))}),exact:(d,c,u,m)=>({ltr:Ao(()=>Tc(i,d,c,u,m)),rtl:Ao(()=>C.some(Tc(i,u,m,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})(jr.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),L1(t,e,o))),L1=(t,e,n)=>{return P1(t,e,(r=Po,R1(o=n,void 0).fold(()=>ka.none(o),s=>km(s.all,o,s.index,1,r))));var o,r},WA=(t,e,n)=>{return P1(t,e,(r=Po,R1(o=n,void 0).fold(()=>ka.none(),s=>km(s.all,o,s.index,-1,r))));var o,r},M1=(t,e)=>{const n=["table","li","dl"],o=S(t.getBody()),r=a=>{const i=Nt(a);return wt(a,o)||kt(n,i)},s=t.selection.getRng();return(a=S(e?s.endContainer:s.startContainer),i=r,((l,d,c=Tt)=>c(d)?C.none():kt(l,Nt(d))?C.some(d):Es(d,l.join(","),u=>on(u,"table")||c(u)))(["td","th"],a,i)).map(a=>(N1(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?L1:WA)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},fn=(t,e)=>({container:t,offset:e}),gl=Et.DOM,pl=t=>e=>t===e?-1:0,Sm=(t,e,n)=>{if($(t)&&e>=0)return C.some(fn(t,e));{const o=qo(gl);return C.from(o.backwards(t,e,pl(t),n)).map(r=>fn(r.container,r.container.data.length))}},_m=(t,e,n)=>{if(!$(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(fn(t,e));{const r=qo(gl);return C.from(r.backwards(t,e,pl(t),n)).bind(s=>_m(s.container,e+s.container.data.length,n))}},I1=(t,e,n)=>{if(!$(t))return C.none();const o=t.data;if(e<=o.length)return C.some(fn(t,e));{const r=qo(gl);return C.from(r.forwards(t,e,pl(t),n)).bind(s=>I1(s.container,e-o.length,n))}},Nm=(t,e,n,o,r)=>{const s=qo(t,(a=t,i=>a.isBlock(i)||kt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return C.from(s.backwards(e,n,o,r))},F1=t=>Le(t.toString().replace(/\u00A0/g," ")),U1=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Rm=(t,e)=>t.substring(e.length),z1=(t,e,n,o=0)=>{return(r=S(e.startContainer),Do(r,Jb)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||!$(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return Nm(s,a.startContainer,a.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const x=h.charAt(v);if(U1(x))return C.none();if(y===x&&le(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=a.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(a.endContainer,a.endOffset),p.collapsed)return C.none();const f=F1(p);return 0!==f.lastIndexOf(i)||Rm(f,i).length<l?C.none():C.some({text:Rm(f,i),range:p,trigger:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=F1(a);return C.some({range:a,text:Rm(i,n),trigger:n})});var r},j1=t=>{if(3===t.nodeType)return fn(t,t.data.length);{const e=t.childNodes;return e.length>0?j1(e[e.length-1]):fn(t,e.length)}},H1=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?H1(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?j1(n[n.length-1]):fn(t,e)},$1=(t,e,n,o={})=>{var r;const s=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=mt(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const m=H1(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return Nm(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!U1(v)}).isSome()})(c,m)};var c})(n.range,a,n.text));if(0===i.length)return C.none();const l=Promise.all(yt(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var Dn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Dn||(Dn={}));const Am=(t,e,n)=>t.stype===Dn.Error?e(t.serror):n(t.svalue),Yr=t=>({stype:Dn.Value,svalue:t}),Ea=t=>({stype:Dn.Error,serror:t}),KA=Am,Om=t=>fe(t)&&_e(t).length>100?" removed due to size":JSON.stringify(t,null,2),hl=(t,e)=>Ea([{path:t,getErrorInfo:e}]),q1=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)pt(r,s)&&(n[s]=t(n[s],r[s]))}return n},Tm=q1((t,e)=>Sf(t)&&Sf(e)?Tm(t,e):e),V1=(q1((t,e)=>e),t=>({tag:"defaultedThunk",process:J(t)})),W1=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Bm=t=>({extract:(e,n)=>{return(o=t(n)).stype===Dn.Error?hl(e,J(o.serror)):o;var o},toString:J("val")}),XA=Bm(Yr),K1=(t,e,n,o)=>o(At(t,e).getOrThunk(()=>n(t))),JA=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>Yr(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Dn.Value?{stype:Dn.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,At(l=n,d=o).fold(()=>{return m=d,p=l,hl(i,()=>'Could not find valid *required* value for "'+m+'" in '+Om(p));var m,p},c);case"defaultedThunk":return K1(n,o,t.process,s);case"option":return((i,l,d)=>d(At(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(At(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return K1(n,o,J({}),i=>{const l=Tm(t.process(n),i);return s(l)})}var i,l,d,c},Dm=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)W1(l,(d,c,u,m)=>{const p=JA(u,o,r,d,m);KA(p,f=>{i.push(...f)},f=>{a[c]=f})},(d,c)=>{a[d]=c(r)});return i.length>0?Ea(i):Yr(a)})(e,n,t),toString:()=>"obj{\n"+yt(t,n=>W1(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),G1=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return z(o,a=>{Am(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,hn(Ea,Bf)(n)):Yr(e.values);var n})(yt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),Y1=(t,e)=>((t,e)=>({extract:(n,o)=>At(o,t).fold(()=>{return s=t,hl(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,At(i=e,l=r).fold(()=>{return c=i,u=l,hl(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Om(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+_e(e)}))(t,Ha(e,Dm)),ZA=J(XA),bl=(t,e)=>Bm(n=>{const o=typeof n;return t(n)?Yr(n):Ea(`Expected type: ${e} but got: ${o}`)}),tO=bl(nn,"number"),vl=bl(st,"string"),eO=bl(So,"boolean"),Pm=bl(Ct,"function"),Sa=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),X1=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),J1=(t,e)=>Sa(t,t,{tag:"required",process:{}},e),Q1=t=>J1(t,vl),Z1=t=>J1(t,Pm),Lm=(t,e)=>Sa(t,t,{tag:"option",process:{}},e),yl=t=>Lm(t,vl),Xr=(t,e,n)=>Sa(t,t,V1(e),n),tw=(t,e)=>Xr(t,e,tO),ew=(t,e,n)=>{return Xr(t,e,(o=n,r=s=>kt(o,s)?we.value(s):we.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Bm(s=>r(s).fold(Ea,Yr))));var o,r},Mm=(t,e)=>Xr(t,e,eO),Im=(t,e)=>Xr(t,e,Pm),nO=Q1("type"),oO=Z1("fetch"),Fm=Z1("onAction"),rO=Im("onSetup",()=>ht),sO=yl("text"),aO=yl("icon"),iO=yl("tooltip"),lO=yl("label"),dO=Mm("active",!1),cO=Mm("enabled",!0),nw=Mm("primary",!1),_a=t=>Xr("type",t,vl),uO=Dm([nO,Q1("trigger"),tw("minChars",1),((t,e)=>Sa(t,t,V1(1),ZA()))("columns"),tw("maxResults",10),Lm("matches",Pm),oO,Fm,(ow=vl,Xr("highlightOn",[],G1(ow)))]);var ow;const Um=[cO,iO,aO,sO,rO],rw=[dO].concat(Um),mO=[Im("predicate",Tt),ew("scope","node",["node","editor"]),ew("position","selection",["node","selection","line"])],fO=Um.concat([_a("contextformbutton"),nw,Fm,X1("original",Ce)]),gO=rw.concat([_a("contextformbutton"),nw,Fm,X1("original",Ce)]),pO=Um.concat([_a("contextformbutton")]),hO=rw.concat([_a("contextformtogglebutton")]),bO=Y1("type",{contextformbutton:fO,contextformtogglebutton:gO});Dm([_a("contextform"),Im("initValue",J("")),lO,((t,e)=>Sa(t,t,{tag:"required",process:{}},G1(e)))("commands",bO),Lm("launch",Y1("type",{contextformbutton:pO,contextformtogglebutton:hO}))].concat(mO));const yO=t=>{const e=uo(),n=Gt(!1),o=e.isSet,r=()=>{o()&&(Lt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=Ao(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ha(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===Dn.Error?{stype:Dn.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Am(o,we.error,we.value);var a,i,o})("Autocompleter",uO,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):d;return yt(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Om(l.input));var l},Ce);var a}),o=Pf(td(n,s=>s.trigger)),r=ed(n);return{dataset:n,triggers:o,lookupByTrigger:s=>mt(r,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>z1(t.dom,t.selection.getRng(),d.trigger).bind(c=>$1(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,hr(h.triggers,g=>z1(p,f,g))).bind(p=>$1(d,c,p));var p,f,h})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Lt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=fe(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=Kd(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},CO=vn().browser.isSafari(),sw=t=>so(S(t)),aw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Cl=(t,e)=>C.from(t.getParent(e.container(),"details")),iw=(t,e)=>Cl(t,e).isSome(),lw=(t,e)=>{const n=e.getNode();ie(n)||t.selection.setCursorLocation(n,e.offset())},dw=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?ue(r):tn(r)).each(s=>lw(t,s))}else lw(t,e)},cw=(t,e,n)=>{const{dom:o,selection:r}=t,s=t.getBody();if("character"===n){const a=M.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Cl(o,a),d=i&&o.isEmpty(i),c=ye(i?.previousSibling),u=ye(i?.nextSibling);return!!(d&&(e?u:c)&&Lr(!e,s,a).exists(m=>iw(o,m)&&!sg(l,Cl(o,m))))||Lr(e,s,a).fold(Tt,m=>{const p=Cl(o,m);if(iw(o,m)&&!sg(l,p)){if(e||dw(t,m,!1),i&&d){if(e&&c||!e&&u)return!0;dw(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},lr=(t,e,n)=>{return r=e,s=n,((a,i)=>{const l=C.from(a.getParent(i.startContainer,"details")),d=C.from(a.getParent(i.endContainer,"details"));if(l.isSome()||d.isSome()){const c=l.bind(u=>C.from(a.select("summary",u)[0]));return C.some({startSummary:c,startDetails:l,endDetails:d})}return C.none()})((o=t).dom,o.selection.getRng()).fold(()=>cw(o,r,s),a=>((t,e,n,o)=>{const r=t.selection.getRng(),s=M.fromRangeStart(r),a=t.getBody();return"selection"===o?((i,l)=>{const d=l.startSummary.exists(m=>m.contains(i.startContainer)),c=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(d||c)&&!(d&&c)||u})(r,e):n?(i=s,e.startSummary.exists(d=>{return c=i,tn(u=d).exists(m=>Bt(m.getNode())&&Ae(u,m).exists(p=>p.isEqual(c))||m.isEqual(c));var c,u})||((i,l,d)=>d.startDetails.exists(c=>xe(i,l).forall(u=>!c.contains(u.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(d=>{return c=i,ue(d).exists(m=>m.isEqual(c));var c}))(s,e)||((i,l)=>l.startDetails.exists(d=>Ae(d,i).forall(c=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(c.container())))))(s,e);var i})(o,a,r,s)||cw(o,r,s))||CO&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),d=M.fromRangeStart(l);return!!rE(i)&&("selection"===s&&aw(l,i)||z0(r,d,i)?sw(i):o.undoManager.transact(()=>{const c=a.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=c??{};const h=()=>{Y(u)&&Y(m)&&Y(p)&&Y(f)&&c?.setBaseAndExtent(u,m,p,f)},g=(v,y)=>{z(v.childNodes,x=>{ea(x)&&y.appendChild(x)})},b=o.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),"word"!==s&&"line"!==s||null==c||c.modify("extend",r?"right":"left",s),!a.isCollapsed()&&aw(a.getRng(),b)?sw(i):(o.execCommand(r?"ForwardDelete":"Delete"),u=c?.anchorNode,m=c?.anchorOffset,p=c?.focusNode,f=c?.focusOffset,g(b,i),h()),o.dom.remove(b)}),!0)})(t,e,n)?C.some(ht):C.none();var o,r,s},uw=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:ht,inputType:n},a=fp(new InputEvent(t));return e.dispatch(t,{...a,...s,...o})},Na=uw("input"),wl=uw("beforeinput"),mw=vn(),fw=mw.os,gw=fw.isMacOS()||fw.isiOS(),xO=mw.browser.isFirefox(),Jr=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(tt(a)||$(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Kt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new qt(e,e);let a,i=e;for(;a=s.current();){if($(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Bt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),sa(t,r)},Ra=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},zm=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),jm=t=>{t.innerHTML='<br data-mce-bogus="1">'},Aa=(t,e)=>{ce(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u={..._g(S(o)),...c};s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>mt(c.split(/\s+/),u=>""!==u));ge(a,i,(c,u)=>{const m=mt(u,f=>!kt(c,f)),p=[...c,...m];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=fs(r,(c,u)=>!kt(l,u));s.setAttribs(o,d)})(t,e,Ws(t))},pw=(t,e,n,o,r=!0,s)=>{const a=t.dom,i=t.schema,l=ce(t),d=n?n.nodeName.toUpperCase():"";let c=e;const u=i.getTextInlineElements();let m;m=s||"TABLE"===d||"HR"===d?a.create(s||l):n.cloneNode(!1);let p=m;if(r){do{if(u[c.nodeName]){if(en(c)||He(c))continue;const f=c.cloneNode(!1);a.setAttrib(f,"id",""),m.hasChildNodes()?(f.appendChild(m.firstChild),m.appendChild(f)):(p=f,m.appendChild(f))}}while((c=c.parentNode)&&c!==o)}else a.setAttrib(m,"style",null),a.setAttrib(m,"class",null);return Aa(t,m),jm(p),m},hw=(t,e)=>{const n=t?.parentNode;return Y(n)&&n.nodeName===e},bw=t=>Y(t)&&/^(OL|UL|LI)$/.test(t.nodeName),xl=t=>{const e=t.parentNode;return Y(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},kl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!tt(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},kO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Hm=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,$m=(t,e)=>Y(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),qm=(t,e,n)=>$(e)?t?1===n&&e.data.charAt(n-1)===ne?0:n:n===e.data.length-1&&e.data.charAt(n)===ne?e.data.length:n:n,vw={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),d=t.selection.getRng(),c=ce(t),u=S(d.startContainer),m=kr(u,d.startOffset),p=m.exists(T=>dd(T)&&!Po(T)),f=d.collapsed&&p,h=T=>pw(t,n,w,x,eS(t),T),g=T=>{const L=qm(T,n,o);if($(n)&&(T?L>0:L<n.data.length))return!1;if(n.parentNode===w&&a&&!T||T&&tt(n)&&n===w.firstChild)return!0;if(Hm(n,"TABLE")||Hm(n,"HR"))return a&&!T||!a&&T;const E=new qt(n,w);let _;for($(n)&&(T&&0===L?E.prev():T||L!==n.data.length||E.next());_=E.current();){if(tt(_)){if(!_.getAttribute("data-mce-bogus")){const D=_.nodeName.toLowerCase();if(l[D]&&"br"!==D)return!1}}else if($(_)&&!io(_.data))return!1;T?E.prev():E.next()}return!0},b=()=>{let T;return T=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==k?h(c):h(),((L,E)=>{const _=nS(L);return!Ft(E)&&(st(_)?kt(q.explode(_),E.nodeName.toLowerCase()):_)})(t,s)&&$m(i,s)&&i.isEmpty(w,void 0,{includeZwsp:!0})?T=i.split(s,w):i.insertAfter(T,w),Jr(t,T),T};Pi(i,d).each(T=>{d.setStart(T.startContainer,T.startOffset),d.setEnd(T.endContainer,T.endOffset)}),n=d.startContainer,o=d.startOffset;const v=!(!e||!e.shiftKey),y=!(!e||!e.ctrlKey);tt(n)&&n.hasChildNodes()&&!f&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&$(n)?n.data.length:0);const x=Ra(i,n);if(!x||((T,L)=>{const E=T.dom.getParent(L,"ol,ul,dl");return null!==E&&"false"===T.dom.getContentEditableParent(E)})(t,n))return;v||(n=((T,L,E,_,D)=>{var F,X;const H=T.dom,rt=null!==(F=Ra(H,_))&&void 0!==F?F:H.getRoot();let nt=H.getParent(_,H.isBlock);if(!nt||!$m(H,nt)){if(nt=nt||rt,!nt.hasChildNodes()){const lt=H.create(L);return Aa(T,lt),nt.appendChild(lt),E.setStart(lt,0),E.setEnd(lt,0),lt}let ct,ut=_;for(;ut&&ut.parentNode!==nt;)ut=ut.parentNode;for(;ut&&!H.isBlock(ut);)ct=ut,ut=ut.previousSibling;const Z=null===(X=ct?.parentElement)||void 0===X?void 0:X.nodeName;if(ct&&Z&&T.schema.isValidChild(Z,L.toLowerCase())){const lt=ct.parentNode,ft=H.create(L);for(Aa(T,ft),lt.insertBefore(ft,ct),ut=ct;ut&&!H.isBlock(ut);){const N=ut.nextSibling;ft.appendChild(ut),ut=N}E.setStart(_,D),E.setEnd(_,D)}}return _})(t,c,d,n,o));let w=i.getParent(n,i.isBlock)||i.getRoot();s=Y(w?.parentNode)?i.getParent(w.parentNode,i.isBlock):null,r=w?w.nodeName.toUpperCase():"";const k=s?s.nodeName.toUpperCase():"";if("LI"!==k||y||(w=s,s=s.parentNode,r=k),tt(s)&&(T=t,E=w,!v&&E.nodeName.toLowerCase()===ce(T)&&T.dom.isEmpty(E)&&((_,D,F)=>{let X=D;for(;X&&X!==_&&ye(X.nextSibling);){const rt=X.parentElement;if(!rt||(H=rt,!pt(T.schema.getTextBlockElements(),H.nodeName.toLowerCase())))return jg(rt);X=rt}var H;return!1})(T.getBody(),E)))return((T,L,E)=>{var _,D,F;const X=L(ce(T)),H=T.dom.getParent(E,jg);H&&(T.dom.insertAfter(X,H),Jr(T,X),(null!==(F=null===(D=null===(_=E.parentElement)||void 0===_?void 0:_.childNodes)||void 0===D?void 0:D.length)&&void 0!==F?F:0)>1&&T.dom.remove(E))})(t,h,w);var T,E;if(/^(LI|DT|DD)$/.test(r)&&tt(s)&&i.isEmpty(w))return void((T,L,E,_,D)=>{const F=T.dom,X=T.selection.getRng(),H=E.parentNode;if(E===T.getBody()||!H)return;var rt;bw(rt=E)&&bw(rt.parentNode)&&(D="LI");let nt=L(D);if(kl(E,_,!0)&&kl(E,_,!1))if(hw(E,"LI")){const ct=xl(E);F.insertAfter(nt,ct),(null===(Z=(ut=E).parentNode)||void 0===Z?void 0:Z.firstChild)===ut?F.remove(ct):F.remove(E)}else F.replace(nt,E);else if(kl(E,_,!0))hw(E,"LI")?(F.insertAfter(nt,xl(E)),nt.appendChild(F.doc.createTextNode(" ")),nt.appendChild(E)):H.insertBefore(nt,E),F.remove(_);else if(kl(E,_,!1))F.insertAfter(nt,xl(E)),F.remove(_);else{E=xl(E);const ct=X.cloneRange();ct.setStartAfter(_),ct.setEndAfter(E);const ut=ct.extractContents();"LI"===D&&((Z,lt)=>Z.firstChild&&"LI"===Z.firstChild.nodeName)(ut)?(nt=ut.firstChild,F.insertAfter(ut,E)):(F.insertAfter(ut,E),F.insertAfter(nt,E)),F.remove(_)}var ut,Z;Jr(T,nt)})(t,h,s,w,c);if(!(f||w!==t.getBody()&&$m(i,w)))return;const R=w.parentNode;let A;if(f)A=h(c),m.fold(()=>{Mt(u,S(A))},T=>{Re(T,S(A))}),t.selection.setCursorLocation(A,0);else if(Rr(w))A=Rd(w),i.isEmpty(w)&&jm(w),Aa(t,A),Jr(t,A);else if(g(!1))A=b();else if(g(!0)&&R){A=R.insertBefore(h(),w);const T=S(d.startContainer).dom.hasChildNodes()&&d.collapsed;Jr(t,Hm(w,"HR")||T?A:w)}else{const T=(E=>{const _=E.cloneRange();return _.setStart(E.startContainer,qm(!0,E.startContainer,E.startOffset)),_.setEnd(E.endContainer,qm(!1,E.endContainer,E.endOffset)),_})(d).cloneRange();T.setEndAfter(w);const L=T.extractContents();(E=>{z(Mg(S(E),Fe),_=>{const D=_.dom;D.nodeValue=Le(D.data)})})(L),(E=>{let _=E;do{$(_)&&(_.data=_.data.replace(/^[\r\n]+/,"")),_=_.firstChild}while(_)})(L),A=L.firstChild,i.insertAfter(L,w),((E,_,D)=>{var F;const X=[];if(!D)return;let H=D;for(;H=H.firstChild;){if(E.isBlock(H))return;tt(H)&&!_[H.nodeName.toLowerCase()]&&X.push(H)}let rt=X.length;for(;rt--;)H=X[rt],(!H.hasChildNodes()||H.firstChild===H.lastChild&&""===(null===(F=H.firstChild)||void 0===F?void 0:F.nodeValue)||kO(E,H))&&E.remove(H)})(i,l,A),((E,_)=>{_.normalize();const D=_.lastChild;(!D||tt(D)&&/^(left|right)$/gi.test(E.getStyle(D,"float",!0)))&&E.add(_,"br")})(i,w),i.isEmpty(w)&&jm(w),A.normalize(),i.isEmpty(A)?(i.remove(A),b()):(Aa(t,A),Jr(t,A))}i.setAttrib(A,"id",""),t.dispatch("NewBlock",{newBlock:A})},fakeEventName:"insertParagraph"},yw=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),sa(t,o)},EO=(t,e)=>{const n=ee("br");Re(S(e),n),t.undoManager.add()},SO=(t,e)=>{_O(t.getBody(),e)||jn(S(e),ee("br"));const n=ee("br");jn(S(e),n),yw(t,n.dom,!1),t.undoManager.add()},_O=(t,e)=>{return n=M.after(e),!!Bt(n.getNode())||xe(t,M.after(e)).map(o=>Bt(o.getNode())).getOr(!1);var n},Cw=t=>t&&"A"===t.nodeName&&"href"in t,NO=t=>t.fold(Tt,Cw,Cw,Tt),RO=(t,e)=>{e.fold(ht,ot(EO,t),ot(SO,t),ht)},ww={insert:(t,e)=>{const n=(o=>{const r=ot(nr,o),s=M.fromRangeStart(o.selection.getRng());return Tn(r,o.getBody(),s).filter(NO)})(t);n.isSome()?n.each(ot(RO,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d=!1;Pi(a,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(tt(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&$(u)?u.data.length:0}let m=a.getParent(u,a.isBlock);const p=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(m=p),$(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new qt(b,v);let x;const w=g.getNonEmptyElements();for(;x=y.next();)if(w[x.nodeName.toLowerCase()]||$(x)&&x.length>0)return!0;return!1})(o.schema,u,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),Qd(a,i,l),yw(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},xw=(t,e)=>zm(t).filter(n=>e.length>0&&on(S(n),e)).isSome(),Me=kn([{br:[]},{block:[]},{none:[]}]),AO=(t,e)=>{return xw(n=t,tS(n));var n},kw=t=>(e,n)=>zm(e).filter(r=>Os(S(r))).isSome()===t,Ew=(t,e)=>(n,o)=>zm(n).fold(J(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,OO=t=>{const e=Ra(t.dom,t.selection.getStart());return Ft(e)},Oa=t=>Ew("pre",t),El=t=>(e,n)=>JE(e)===t,TO=(t,e)=>{return xw(n=t,ZE(n));var n},Sl=(t,e)=>e,BO=t=>{const e=ce(t),n=Ra(t.dom,t.selection.getStart());return Y(n)&&t.schema.isValidChild(n.nodeName,e)},DO=t=>{const e=t.selection.getRng(),n=S(e.startContainer),o=kr(n,e.startOffset).map(r=>dd(r)&&!Po(r));return e.collapsed&&o.getOr(!0)},Ge=(t,e)=>(n,o)=>Be(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),_l=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),Y(n)&&wl(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),Y(n)&&Na(e,t.fakeEventName))},Sw=(t,e)=>{const n=()=>_l(ww,t,e),o=()=>_l(vw,t,e),r=(s=t,a=e,CC([Ge([AO],Me.none()),Ge([Oa(!0),OO],Me.none()),Ge([Ew("summary",!0)],Me.br()),Ge([Oa(!0),El(!1),Sl],Me.br()),Ge([Oa(!0),El(!1)],Me.block()),Ge([Oa(!0),El(!0),Sl],Me.block()),Ge([Oa(!0),El(!0)],Me.br()),Ge([kw(!0),Sl],Me.br()),Ge([kw(!0)],Me.block()),Ge([TO],Me.br()),Ge([Sl],Me.br()),Ge([BO],Me.block()),Ge([DO],Me.block())],[s,!(!a||!a.shiftKey)]).getOr(Me.none()));var s,a;switch(QE(t)){case"linebreak":r.fold(n,n,ht);break;case"block":r.fold(o,o,ht);break;case"invert":r.fold(o,n,ht);break;default:r.fold(n,o,ht)}},_w=vn(),PO=_w.os.isiOS()&&_w.browser.isSafari(),Nw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Sw(t,e)}))},LO=vn(),Rw=t=>t.stopImmediatePropagation(),Aw=t=>t.keyCode===Q.PAGE_UP||t.keyCode===Q.PAGE_DOWN,Ow=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Rw,!0):!n&&t.get()&&e.off("NodeChange",Rw),t.set(n)},Tw=(t,e)=>{const n=e.container(),o=e.offset();return $(n)?(n.insertData(o,t),C.some(M(n,o+t.length))):wi(e).map(r=>{const s=xr(t);return e.isAtEnd()?jn(r,s):Re(r,s),M(s.dom,t.length)})},Bw=ot(Tw,Kt),Dw=ot(Tw," "),Pw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},MO=t=>{const e=M.fromRangeStart(t.selection.getRng()),n=S(t.getBody());if(t.selection.isCollapsed()){const o=ot(nr,t),r=M.fromRangeStart(t.selection.getRng());return Tn(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>Ae(s.dom,M.before(i)),i=>ue(i),i=>tn(i),i=>xe(s.dom,M.after(i))))).map(s=>()=>{return(a=n,i=e,l=>N0(a,l)?Bw(i):Dw(i))(s).each(Pw(t));var a,i})}var s;return C.none()},IO=t=>{return Cr(bt.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=S(t.getBody());var r,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,s=M.fromRangeStart(t.selection.getRng()),N0(r,s)?Bw(s):Dw(s)).each(Pw(t))});var e,n},FO=t=>l_(t)?[{keyCode:Q.TAB,action:it(M1,t,!0)},{keyCode:Q.TAB,shiftKey:!0,action:it(M1,t,!1)}]:[],UO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),yO(t),On(t))return Gt(null);{const e=(t=>{const e=Gt(null),n=ot(nr,t);return t.on("NodeChange",o=>{Ks(t)&&(((r,s,a)=>{const i=yt(se(S(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=mt(i,r),d=mt(a,r);z(za(l,d),ot(HC,!1)),z(za(d,l),ot(HC,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=M.fromRangeStart(r.selection.getRng());M.isTextPosition(i)&&!_d(l=i)&&!Nd(l)&&(ul(r,((t,e)=>{return M.isTextPosition(e)?(o=e,vh(n=t)&&o.container()===n?((r,s)=>{const a=Ch(r.data.substr(0,s.offset())),i=Ch(r.data.substr(s.offset()));return(a.text+i.text).length>0?(wh(r),M(r,s.offset()-a.count)):s})(n,o):xh(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=Af(l,d);return-1===c?C.none():C.some(c)})(De(a.childNodes),r).map(l=>l<s.offset()?M(a,s.offset()-1):s).getOr(s);return Ko(r),i})(n,o):xh(n,o))(t,e);var n,o})(a,i)),s.set(null))}var l})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=mt(i,r);z(l,d=>{const c=M.fromRangeStart(s.selection.getRng());Tn(r,s.getBody(),c).bind(u=>$C(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",ot(FA,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=bt.os.isMacOS()||bt.os.isiOS();xa([{keyCode:Q.RIGHT,action:it(g1,s,!0)},{keyCode:Q.LEFT,action:it(g1,s,!1)},{keyCode:Q.UP,action:it(p1,s,!1)},{keyCode:Q.DOWN,action:it(p1,s,!0)},...l?[{keyCode:Q.UP,action:it(fl,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Q.DOWN,action:it(fl,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Q.RIGHT,action:it(D1,s,!0)},{keyCode:Q.LEFT,action:it(D1,s,!1)},{keyCode:Q.UP,action:it(Em,s,!1)},{keyCode:Q.DOWN,action:it(Em,s,!0)},{keyCode:Q.UP,action:it(Em,s,!1)},{keyCode:Q.UP,action:it(v1,s,!1)},{keyCode:Q.DOWN,action:it(v1,s,!0)},{keyCode:Q.RIGHT,action:it(x1,s,!0)},{keyCode:Q.LEFT,action:it(x1,s,!1)},{keyCode:Q.UP,action:it(k1,s,!1)},{keyCode:Q.DOWN,action:it(k1,s,!0)},{keyCode:Q.RIGHT,action:it(qC,s,a,!0)},{keyCode:Q.LEFT,action:it(qC,s,a,!1)},{keyCode:Q.RIGHT,ctrlKey:!l,altKey:l,action:it(NA,s,a)},{keyCode:Q.LEFT,ctrlKey:!l,altKey:l,action:it(RA,s,a)},{keyCode:Q.UP,action:it(b1,s,!1)},{keyCode:Q.DOWN,action:it(b1,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===Q.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const d=l.keyCode===Q.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=a.selection.isCollapsed(),u=c?"character":"selection",m=p=>c?p?"word":"line":"selection";w1([{keyCode:Q.BACKSPACE,action:it(s1,a)},{keyCode:Q.BACKSPACE,action:it(lm,a,!1)},{keyCode:Q.DELETE,action:it(lm,a,!0)},{keyCode:Q.BACKSPACE,action:it(sm,a,!1)},{keyCode:Q.DELETE,action:it(sm,a,!0)},{keyCode:Q.BACKSPACE,action:it(bm,a,i,!1)},{keyCode:Q.DELETE,action:it(bm,a,i,!0)},{keyCode:Q.BACKSPACE,action:it(fu,a,!1)},{keyCode:Q.DELETE,action:it(fu,a,!0)},{keyCode:Q.BACKSPACE,action:it(lr,a,!1,u)},{keyCode:Q.DELETE,action:it(lr,a,!0,u)},...gw?[{keyCode:Q.BACKSPACE,altKey:!0,action:it(lr,a,!1,m(!0))},{keyCode:Q.DELETE,altKey:!0,action:it(lr,a,!0,m(!0))},{keyCode:Q.BACKSPACE,metaKey:!0,action:it(lr,a,!1,m(!1))}]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:it(lr,a,!1,m(!0))},{keyCode:Q.DELETE,ctrlKey:!0,action:it(lr,a,!0,m(!0))}],{keyCode:Q.BACKSPACE,action:it(dm,a,!1)},{keyCode:Q.DELETE,action:it(dm,a,!0)},{keyCode:Q.BACKSPACE,action:it(Cm,a,!1)},{keyCode:Q.DELETE,action:it(Cm,a,!0)},{keyCode:Q.BACKSPACE,action:it(om,a,!1)},{keyCode:Q.DELETE,action:it(om,a,!0)},{keyCode:Q.BACKSPACE,action:it(nm,a,!1)},{keyCode:Q.DELETE,action:it(nm,a,!0)},{keyCode:Q.BACKSPACE,action:it(vm,a,!1)},{keyCode:Q.DELETE,action:it(vm,a,!0)}],l).filter(p=>a.selection.isEditable()).each(p=>{l.preventDefault(),wl(a,d).isDefaultPrevented()||(p(),Na(a,d))})})(n,o,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=r,xa([{keyCode:Q.BACKSPACE,action:it(gC,a=n)},{keyCode:Q.DELETE,action:it(gC,a)},...gw?[{keyCode:Q.BACKSPACE,altKey:!0,action:it(wa,a)},{keyCode:Q.DELETE,altKey:!0,action:it(wa,a)},...l?[{keyCode:xO?224:91,action:it(wa,a)}]:[]]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:it(wa,a)},{keyCode:Q.DELETE,ctrlKey:!0,action:it(wa,a)}]],i)),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{var s;r.keyCode===Q.ENTER&&(PO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if($(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=C.some((s=n).selection.getBookmark()),s.undoManager.add()):Nw(n,r))}),n.on("keyup",r=>{r.keyCode===Q.ENTER&&o.each(()=>{return a=r,(s=n).undoManager.undo(),o.fold(ht,i=>s.selection.moveToBookmark(i)),Nw(s,a),void(o=C.none());var s,a})})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,w1([{keyCode:Q.SPACEBAR,action:it(MO,r=n)},{keyCode:Q.SPACEBAR,action:it(IO,r)}],s).each(a=>{s.preventDefault(),wl(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Na(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=S(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!$(n))return C.none();if((o=>{const r=o.container();return $(r)&&le(r.data,Kt)})(e)){const o=O0(t,n,!1)||(r=>{const s=r.data,a=(i=>{const l=i.split("");return yt(l,(d,c)=>Si(d)&&c>0&&c<l.length-1&&hc(l[c-1])&&hc(l[c+1])?" ":d).join("")})(s);return a!==s&&(r.data=a,!0)})(n)||T0(t,n,!1);return Cr(o,e)}if(eu(t,e)){const o=O0(t,n,!0)||T0(t,n,!0);return Cr(o,e)}return C.none()})(s,M.fromRangeStart(r.selection.getRng())).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,xa([...FO(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=bt.os.isMacOS()||bt.os.isiOS();xa([{keyCode:Q.END,action:it(h1,s,!0)},{keyCode:Q.HOME,action:it(h1,s,!1)},...l?[]:[{keyCode:Q.HOME,action:it(fl,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Q.END,action:it(fl,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Q.END,action:it(E1,s,!0)},{keyCode:Q.HOME,action:it(E1,s,!1)},{keyCode:Q.END,action:it(ml,s,!0,a)},{keyCode:Q.HOME,action:it(ml,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(LO.os.isMacOS())return;const r=Gt(!1);n.on("keydown",s=>{Aw(s)&&Ow(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,xa([{keyCode:Q.PAGE_UP,action:it(ml,a=n,!1,i=o)},{keyCode:Q.PAGE_DOWN,action:it(ml,a,!0,i)}],l)),Aw(s)&&r.get()&&(Ow(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class zO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&Pc(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Ni(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Ni(e)&&("IMG"===e.selection.getNode().nodeName?qe.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!TS(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,a=>a===r||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=ms(o.dom.getParents(e,Ut,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Lw=js("image"),Vm=js("event"),Nl=t=>e=>{e[Vm]=t},Mw=Nl(0),jO=Nl(2),HO=Nl(1),Wm=js("mode"),Rl=t=>e=>{e[Wm]=t},Iw=(t,e)=>Rl(e)(t),Fw=Rl(0),Km=Rl(2),qO=Rl(1),Uw=t=>e=>C.from(e[Wm]).exists(o=>o===t),Qr=Uw(0),zw=Uw(1),VO=["none","copy","link","move"],WO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Gm=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){kt(VO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>C.from(t[Vm]).exists(n=>0===n))(o)&&kt(WO,r)&&(n=r)},get items(){return r=o,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(Qr(r)){if(!st(a))return s.add(a);if(!ie(i))return s.add(a,i)}return null},remove:a=>{Qr(r)&&s.remove(a)},clear:()=>{Qr(r)&&s.clear()}};var r,s},get files(){return zw(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,a)=>{Qr(o)&&(o[Lw]={image:r,x:s,y:a},t.setDragImage(r,s,a))},getData:r=>zw(o)?"":t.getData(r),setData:(r,s)=>{Qr(o)&&t.setData(r,s)},clearData:r=>{Qr(o)&&t.clearData(r)}};return Fw(o),o},jw=(t,e)=>t.setData("text/html",e),Hw="x-tinymce/html",Al=J(Hw),Ym="\x3c!-- "+Hw+" --\x3e",KO=t=>Ym+t,$w=t=>-1!==t.indexOf(Ym),qw="%MCEPASTEBIN%",Xm=t=>t.dom.get("mcepastebin"),GO=t=>Y(t)&&"mcepastebin"===t.id,Vw=t=>t===qw,Ww=(t,e)=>(q.each(e,n=>{t=Fa(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Kw=t=>Ww(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Kt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Gw=(t,e)=>({content:t,cancelled:e}),Jm=(t,e)=>(t.insertContent(e,{merge:XS(t),paste:!0}),!0),Qm=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),YO=(t,e,n)=>{return!(t.selection.isCollapsed()||!Qm(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},XO=(t,e,n)=>{return o=t,!(!Qm(r=e)||!Pt(bh(o),s=>sd(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},JO=(t=>{let e=0;return()=>"mceclip"+e++})(),QO=t=>{const e=Gm();return jw(e,t),Km(e),e},Yw=(t,e,n,o,r)=>{const s=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=qr({sanitize:ic(f)},f.schema);g.addNodeFilter("meta",v=>{q.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return ho({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return Gw(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):Gw(p,m.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,d=a,void(o||!JS(l)?Jm(l,d):(u=l,m=d,q.each([YO,XO,Jm],p=>!p(u,m,Jm))));var l,d,u,m};r?wl(t,"insertFromPaste",{dataTransfer:QO(a)}).isDefaultPrevented()||(i(),Na(t,"insertFromPaste")):i()}},Ol=(t,e,n,o)=>{const r=n||$w(e);Yw(t,e.replace(Ym,""),r,!1,o)},Zm=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((s,a,i)=>{const l=s.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=td(p,(g,b)=>b+'="'+lo.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(a,i),c="</"+a+">",u=yt(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:yt(u,m=>d+m+c).join("")})(Xg(o,ZS(t)),ce(t),Ws(t));Yw(t,r,!1,!0,n)},Xw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},xo=(t,e)=>e in t&&t[e].length>0,Jw=t=>xo(t,"text/html")||xo(t,"text/plain"),Qw=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(yi(t)&&o){const s=((a,i)=>{const l=i.items?Je(De(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?De(i.files):[];return mt(l.length>0?l:d,(c=>{const u=bh(c);return m=>de(m.type,"image/")&&Pt(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return q.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(yt(r,a=>Xv(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),z(a,i=>{var l,d;l=t,Pu((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,b=h.getByData(p,u)??((v,y,x,w)=>{const k=JO(),R=ah(v)&&Y(x.name),A=R?((E,_)=>{const D=_.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Y(D)?E.dom.encode(D[1]):void 0})(v,x.name):k,L=y.create(k,x,w,A,R?x.name:void 0);return y.add(L),L})(l,h,f,p);Ol(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},tf=(t,e,n,o,r)=>{let s=Kw(n);const a=xo(e,Al())||$w(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=Qm(s);(Vw(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=xo(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=co(),u=qr({},c);let m="";const p=c.getVoidElements(),f=q.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let x=b.firstChild;if(x)do{g(x)}while(x=x.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=Ww(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(s)),Vw(s)||(o?Zm(t,s,r):Ol(t,s,a,r))},Zw=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Al(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},tx=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),qe.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},ex=t=>({html:KO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),nx=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},ox=(t,e)=>{var n,o;return Zo.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},rx=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},tT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,sx=t=>q.trim(t).replace(tT,_i).toLowerCase(),eT=(t,e,n)=>{const o=GS(t);if(n||"all"===o||!YS(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=s.getStyle(a,r[f],!0);/color/.test(r[f])&&(g=sx(g),b=sx(b)),b!==g&&(m[r[f]]=h)}const p=s.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},oT=Bt,ax=$,rT=t=>Rt(t.dom),ix=t=>e=>wt(S(t),e),lx=(t,e)=>Bo(S(t),rT,ix(e)),dx=(t,e,n)=>{const o=new qt(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!oT(a);a=r())Ze(a)&&(s=a);return s};var Zr;!function(t){t.Before="before",t.After="after"}(Zr||(Zr={}));const aT=(t,e)=>Math.abs(t.left-e),iT=(t,e)=>Math.abs(t.right-e),dT=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),ef=(t,e,n)=>{const o=d=>Ze(d.node)?C.some(d):tt(d.node)?ef(De(d.node.childNodes),e,n):C.none(),r=(d,c)=>{const u=_o(d,(m,p)=>c(m,e,n)-c(p,e,n));return((m,p)=>{if(m.length>=2){const f=o(m[0]).getOr(m[0]),h=o(m[1]).getOr(m[1]);if(Math.abs(p(f,e,n)-p(h,e,n))<2){if($(f.node))return C.some(f);if($(h.node))return C.some(h)}}return C.none()})(u,c).orThunk(()=>hr(u,o))},[s,a]=((t,e)=>{return(n=mt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Be(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=ds(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(LC(t),n),{pass:i,fail:l}=ds(a,d=>d.top<n);return r(s,dT).orThunk(()=>r(l,Ap)).orThunk(()=>r(i,Ap))},cx=(t,e,n)=>((o,r,s)=>{const a=S(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(Cs))(Un(a),r,s).filter(d=>Fn(a,d)).getOr(a);return((d,c,u,m)=>{const p=(f,h)=>{const g=mt(f.dom.childNodes,Ua(b=>tt(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>ef(g,u,m),b=>{const v=mt(g,y=>y!==b.dom);return ef(v,u,m)}).orThunk(()=>(wt(f,d)?C.none():Ka(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>Ys(o.node)).map(o=>{return{node:(r=o).node,position:aT(r,s=e)<iT(r,s)?Zr.Before:Zr.After};var r,s}),ux=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},mx=t=>({target:t,srcElement:t}),fx=Rt,uT=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(fx,sn),mT=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Tl=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},gx=Tl("left",-32),px=Tl("left",32),hx=Tl("top",-32),bx=Tl("top",32),vx=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Ta=(t,e,n,o,r)=>{"dragstart"===e&&jw(o,t.dom.getOuterHTML(n));const s=((t,e,n,o)=>{const r=((s,a)=>{const i=(l=>{const d=Gm(),c=C.from(l[Wm]);return Km(l),Mw(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[Lw])).each(u=>d.setDragImage(u.image,u.x,u.y)),z(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),z(l.files,u=>d.items.add(u)),(u=>C.from(u[Vm]))(l).each(u=>{var m;m=d,Nl(u)(m)}),c.each(u=>{Iw(l,u),Iw(d,u)}),d;var u})(s);return"dragstart"===a?(Mw(i),Fw(i)):"drop"===a?(jO(i),Km(i)):(HO(i),qO(i)),i})(n,t);return ie(o)?((s,a,i)=>{const l=Rf("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:ht,stopImmediatePropagation:ht,stopPropagation:ht,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...mx(a)}})(t,e,r):(s=t,a=o,i=e,l=r,{...a,dataTransfer:l,type:s,...mx(i)});var s,a,i,l})(e,n,o,r);return t.dispatch(e,s)},yx=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>Ta(e,"dragend",o.element,o.dataTransfer),r=>Ta(e,"dragend",o.element,o.dataTransfer,r))}),Cx(t)},Cx=t=>{t.on(e=>{e.intervalId.clear(),vx(e.ghost)}),t.clear()},Ba=Rt,wx=(t,e)=>or(t.getBody(),e),pT=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=uo();let s,a;const i=ce(t),l=t.dom,d=()=>{(c=>{var u,m;const p=se(S(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(ai(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,si(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),a&&(Ko(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let m;if(d(),p_(u))return null;if(!n(u))return a=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(ne),b=p.parentNode;if(f){const v=p.previousSibling;if(Nr(v)){if(ze(v))return v;if(ai(v))return v.splitText(v.data.length-1)}b?.insertBefore(g,p)}else{const v=p.nextSibling;if(Nr(v)){if(ze(v))return v;if(si(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(g,p.nextSibling):b?.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),Gs(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const p=((g,b,v)=>{var y;const x=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);x.setAttribute("data-mce-caret",v?"before":"after"),x.setAttribute("data-mce-bogus","all"),x.appendChild(Bs().dom);const w=b.parentNode;return v?w?.insertBefore(x,b):b.nextSibling?w?.insertBefore(x,b.nextSibling):w?.appendChild(x),x})(i,u,c),f=kh(e,u,c);l.setStyle(p,"top",f.top),a=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=kh(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>tr(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=g=>g!==o&&(Ba(g)||xn(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),r.show(v,b)),c=g=>ze(g)||si(g)||ai(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,k=Zs(w,o,g),R=k.getNode(!b);if(Y(R)){if(Ys(R))return d(w,R,!!b&&!k.isAtEnd(),!1);if(ao(R)&&Rt(R.nextSibling)){const T=n.createRng();return T.setStart(R,0),T.setEnd(R,0),T}}const A=k.getNode(b);if(Y(A)){if(Ys(A))return d(w,A,!b&&!k.isAtEnd(),!1);if(ao(A)&&Rt(A.previousSibling)){const T=n.createRng();return T.setStart(A,1),T.setEnd(A,1),T}}}return null}let v=g.startContainer,y=g.startOffset;const x=g.endOffset;if($(v)&&0===y&&Ba(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!tt(v))return null;if(x===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(k=>{const R=k.cloneNode(!0),A=t.dispatch("ObjectSelected",{target:k,targetClone:R});if(A.isDefaultPrevented())return null;const T=((E,_)=>{const D=S(t.getBody()),F=t.getDoc(),X=Ss(D,"#"+s).getOrThunk(()=>{const nt=ws('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',F);return Zt(nt,"id",s),Mt(D,nt),nt}),H=n.createRng();Sr(X),Lo(X,[xr(Kt,F),S(_),xr(Kt,F)]),H.setStart(X.dom.firstChild,1),H.setEnd(X.dom.lastChild,0),Ga(X,{top:n.getPos(E,t.getBody()).y+"px"}),Ub(X);const rt=e.getSel();return rt&&(rt.removeAllRanges(),rt.addRange(H)),H})(k,A.targetClone),L=S(k);return z(se(S(t.getBody()),`*[${a}]`),E=>{wt(L,E)||te(E,a)}),n.getAttrib(k,a)||k.setAttribute(a,"1"),i=k,h(),T})(w)}return null},f=()=>{i&&i.removeAttribute(a),Ss(S(t.getBody()),"#"+s).each(Ot),i=null},h=()=>{r.hide()};return On(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=wx(t,b);Ba(v)?(g.preventDefault(),ba(t,v).each(p)):l(b)&&ba(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,x,w)=>{const k=S(y.getBody()),R=y.inline?k:S(Un(k).dom.documentElement),A=((T,L,E,_)=>{const D=L.dom.getBoundingClientRect();return{x:E-(T?D.left+L.dom.clientLeft+qR(L):0),y:_-(T?D.top+L.dom.clientTop+$R(L):0)}})(y.inline,R,x,w);return((T,L,E)=>{const _=jR(T),D=HR(T);return L>=0&&E>=0&&L<=_&&E<=D})(R,A.x,A.y)})(t,g.clientX,g.clientY))return;f(),h();const v=wx(t,b);Ba(v)?(g.preventDefault(),ba(t,v).each(p)):cx(o,g.clientX,g.clientY).each(y=>{var x;g.preventDefault(),(x=d(1,y.node,y.position===Zr.Before,!1))&&e.setRng(x),tt(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{Q.modifierPressed(g)||Ba(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,x=g.startOffset,w=g.endContainer,k=g.endOffset;return pt(b,y.nodeName.toLowerCase())?0===x?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,x),pt(b,w.nodeName.toLowerCase())?0===k?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,k),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,x;u(b)||tt(y=v)&&"mcepastebin"===y.id||h(),Y(x=v)&&n.hasClass(x,"mce-offscreen-selection")||f()}),(t=>{const e=uo(),n=Et.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const u=$t(d.dom.getParents(c.target),uT).getOr(null);if(Y(u)&&(m=d.dom,p=d.getBody(),fx(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:Gm(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:mT(d,u,u.offsetWidth,u.offsetHeight),intervalId:IE(100)})}}var m,p,f}),s=((t,e)=>{const n=fi((r,s)=>{return i=r,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void cx(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),d=>{const c=a._selectionOverrides.showCaret(1,d.node,d.position===Zr.Before,!1);c?a.selection.setRng(c):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const d=Ta(e,"dragstart",s.element,s.dataTransfer,r);if(Y(d.dataTransfer)&&(s.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(s,(m=r,p=(g=u=e).inline?ux(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=ux(g.getContentAreaContainer()),y=(x=>{const w=x.getBody(),k=x.getDoc().documentElement;return x.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||k.scrollLeft,top:w.scrollTop||k.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,x,w,k)=>{let R=0,A=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(R=m.pageX+p-h),m.pageY+f>g&&(A=m.pageY+f-g),u.style.width=p-R+"px",u.style.height=f-A+"px";const T=y.clientHeight,L=y.clientWidth,E=b+y.getBoundingClientRect().top,_=v+y.getBoundingClientRect().left;w.on(D=>{D.intervalId.clear(),D.dragging&&k&&(b+8>=T?D.intervalId.set(bx(x)):b-8<=0?D.intervalId.set(hx(x)):v+8>=L?D.intervalId.set(px(x)):v-8<=0?D.intervalId.set(gx(x)):E+16>=window.innerHeight?D.intervalId.set(bx(window)):E-16<=0?D.intervalId.set(hx(window)):_+16>=window.innerWidth?D.intervalId.set(px(window)):_-16<=0&&D.intervalId.set(gx(window)))})})(s.ghost,c,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var u,m,g,p,f,h,i,l})})(e,t),a=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(Y(f)){const h=f.getRangeAt(0).startContainer;return $(h)?h.parentNode:h}return null})(d.selection),h=u.element,!Ft(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();Ta(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);vx(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&so(S(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}Ta(d,"dragend",d.getBody(),u.dataTransfer,c)}}),Cx(l)})(e,t),i=((l,d)=>c=>yx(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Q.ESC&&yx(e,t,C.none())})})(g=t),PS(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const k=w.dataTransfer;k&&(kt(k.types,"Files")||k.files.length>0)&&(w.preventDefault(),"drop"===w.type&&rl(b,"Dropped file type is not supported"))}},y=w=>{Ii(b,w.target)&&v(w)},x=()=>{const w=Et.DOM,k=b.dom,R=document,A=b.inline?b.getBody():b.getDoc(),T=["drop","dragover"];z(T,L=>{w.bind(R,L,y),k.bind(A,L,v)}),b.on("remove",()=>{z(T,L=>{w.unbind(R,L,y),k.unbind(A,L,v)})})};b.on("init",()=>{qe.setEditorTimeout(b,x,0)})})(g),(g=>{const b=fi(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=rm(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(xn(v)){const y=or(g.getBody(),v),x=Rt(y)?y:v;g.selection.getNode()!==x&&ba(g,x).each(w=>g.selection.setRng(w))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Rd(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var g},hT=(t,e)=>{let n=e;for(let o=t.previousSibling;$(o);o=o.previousSibling)n+=o.data.length;return n},xx=(t,e,n,o,r)=>{if($(n)&&(o<0||o>n.data.length))return[];const s=r&&$(n)?[hT(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},nf=(t,e,n,o,r,s,a=!1)=>({start:xx(t,e,n,o,a),end:xx(t,e,r,s,a)}),kx=(t,e)=>{const n=e.slice(),o=n.pop();return nn(o)?Be(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>$(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},Ex=(t,e)=>kx(t,e.start).bind(({node:n,offset:o})=>kx(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),ts=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,$(e.firstChild)&&io(e.firstChild.data)),ts(t,o,n)}},Bl=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&($(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),$(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ts(t,r,n),r!==s&&ts(t,s,n))},of=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Sx=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Qp(o).concat(t.blockPatterns),inlinePatterns:Zp(o).concat(t.inlinePatterns)}},_x=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},Nx=(t,e,n)=>{((o,r,s)=>{if($(o)&&0>=o.length)return C.some(fn(o,0));{const a=qo(gl);return C.from(a.forwards(o,0,pl(o),s)).map(i=>fn(i.container,0))}})(e,0,e).each(o=>{const r=o.container;I1(r,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(r,0),l.setEnd(i.container,i.offset),Bl(t,l,d=>d===e)});const s=S(r),a=ei(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),Ed.set(i,l))})},Rx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Dl=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Ax=(t,e,n)=>{const o=Ex(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Rx(t,e+"-end"),a),start:l.insertBefore(Rx(t,e+"-start"),i)}},Ox=(t,e,n)=>{ts(t,t.get(e.prefix+"-end"),n),ts(t,t.get(e.prefix+"-start"),n)},rf=t=>0===t.start.length,Tx=(t,e,n,o)=>{const r=e.start;var s;return Nm(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==d&&a.offset>=d+r.length){const c=t.createRng();return c.setStart(a.container,a.offset-r.length),c.setEnd(a.container,a.offset),C.some(c)}return _m(a.container,a.offset-r.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(a.container,a.offset),m}).filter(u=>u.toString()===r).orThunk(()=>Tx(t,e,n,fn(a.container,0)))})},bT=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return _m(i,l-n.pattern.end.length,e).bind(d=>{const c=nf(r,s,d.container,d.offset,i,l,o);if(rf(a))return C.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=Pl(t,n.remainingPatterns,d.container,d.offset,e,o),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,x=!1)=>{if(0===g.start.length&&!x){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return Sm(b,v,y).bind(w=>Tx(h,g,y,w).bind(k=>{var R;return x&&(k.endContainer===w.container&&k.endOffset===w.offset||0===w.offset&&(null===(R=k.endContainer.textContent)||void 0===R?void 0:R.length)===k.endOffset)?C.none():C.some(k)}))})(r,a,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,x=!1)=>nf(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,x))(r,s,h,o);return{matches:m.matches.concat([{pattern:a,startRng:g,endRng:c}]),position:fn(h.startContainer,h.startOffset)}})}})},Pl=(t,e,n,o,r,s)=>{const a=t.dom;return Sm(n,o,a.getRoot()).bind(i=>{const l=_x(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!sd(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=bT(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(m.isNone()&&o>0)return Pl(t,e,n,o-1,r,s);if(m.isSome())return m}return C.none()})},Bx=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?z(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},Dx=(t,e,n,o,r,s)=>{var a;return((i,l)=>{const d=to(i,c=>Pt(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(Pl(t,r.inlinePatterns,n,o,e,s).fold(()=>[],i=>i.matches),Pl(t,(a=r.inlinePatterns,_o(a,(i,l)=>l.end.length-i.end.length)),n,o,e,s).fold(()=>[],i=>i.matches))},Px=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=js("mce_textpattern"),l=cs(a,(d,c)=>{const u=Ax(s,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return cs(l,(d,c)=>{const u=l.length-d.length-1,m=rf(c.pattern)?c.endMarker:Ax(s,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);z(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;rf(s.pattern)?((l,d,c,u)=>{const m=Dl(l.dom,c);Bl(l.dom,m,u),Bx(l,d,m)})(t,s.pattern,s.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=Dl(p,u),h=Dl(p,c);Bl(p,h,m),Bl(p,f,m);const b=Dl(p,{prefix:c.prefix,start:c.end,end:u.start});Bx(l,d,b)})(t,s.pattern,s.startMarker,s.endMarker,i),Ox(n,s.endMarker,i),Ox(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},Lx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},sf=Et.DOM,CT=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,af=t=>fs(t,e=>!1===ie(e)),Mx=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return af({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:CT(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},Ix=t=>{const e=t.options.get;return af({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Fx=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Ux=t=>{const e=Fx(t),n=ch(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";q.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const u=[Fx(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=fS(t);return i&&((l,d)=>{const c=S(l.getBody()),u=bd(no(c)),m=ee("style");Zt(m,"type","text/css"),Mt(m,xr(d)),Mt(u,m),l.on("remove",()=>{Ot(m)})})(t,i),a},lf=t=>{var e;!0!==t.removed&&(On(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Ni(o)&&o.selection.getStart(!0)!==r||ue(r).each(s=>{const a=s.getNode(),i=$n(a)?ue(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=US(e);Ct(n)&&n.call(e,e),(o=>{const r=jS(o);r&&qe.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},zx=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(sf.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a,i;o.disabled=!0,t.readonly=fh(t),t._editableRoot=BS(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===sf.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const x=y.id||"blobid"+WR+++(()=>{const A=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+A()+A()+A()})(),w=y.name||x,k=y.blob;var R;return{id:J(x),name:J(w),filename:J(y.filename||w+"."+(R=k.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[R.toLowerCase()]||"dat")),blob:J(k),base64:J(y.base64),blobUri:J(y.blobUri||URL.createObjectURL(k)),uri:J(y.uri)}},b=y=>$t(h,y).getOrUndefined(),v=y=>b(x=>x.id()===y);return{create:(y,x,w,k,R)=>{if(st(y))return g({id:y,name:k,filename:R,blob:x,base64:w});if(fe(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(x=>x.blobUri()===y),getByData:(y,x)=>b(w=>w.base64()===y&&w.blob().type===x),findFirst:b,removeByUri:y=>{h=mt(h,x=>x.blobUri()!==y||(URL.revokeObjectURL(x.blobUri()),!1))},destroy:()=>{z(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=Ky(),s=[],a=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===bt.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{z(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=yt(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=Yy(t,r)),p().then(a(h=>{const g=yt(h,b=>b.blobInfo);return n.upload(g,Gy(t)).then(a(b=>{const v=[];let y=!1;const x=yt(b,(w,k)=>{const{blobInfo:R,image:A}=h[k];let T=!1;return w.status&&oS(t)?(w.url&&!le(A.src,w.url)&&(y=!0),e.removeByUri(A.src),On(t)||((L,E)=>{const _=t.convertURL(E,"src");var D;d(L.src,E),eo(S(L),{src:ah(t)?(D=E,D+(-1===D.indexOf("?")?"?":"&")+(new Date).getTime()):E,"data-mce-src":_})})(A,w.url)):w.error&&(w.error.remove&&(d(A.src,bt.transparentSrc),v.push(A),T=!0),rl(t,ln.translate(["Failed to upload image: {0}",w.error.message]))),{element:A,status:w.status,uploadUri:w.url,blobInfo:R,removed:T}});return v.length>0&&!On(t)?t.undoManager.transact(()=>{z(vd(v),w=>{const k=Qe(w);var R;Ot(w),k.each((R=t,A=>{var T,L;(T=R).dom.isEmpty((L=A).dom)&&Y(T.schema.getTextBlockElements()[Nt(L)])&&Mt(A,ws('<br data-mce-bogus="1" />'))})),e.removeByUri(w.dom.src)})}):y&&t.undoManager.dispatchChange(),x}))}))),u=()=>sh(t)?c():Promise.resolve([]),m=h=>to(s,g=>g(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Ut)=>{const s=mt((i=o)?De(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===bt.transparentSrc)&&(de(l,"blob:")?!t.isUploaded(l)&&r(i):!!de(l,"data:")&&r(i))}),a=yt(s,i=>{const l=i.src;if(pt(n,l))return n[l].then(d=>st(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(de(u,"blob:")){const h=c.getByUri(u);return Y(h)?Promise.resolve(h):(p=u,de(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):de(p,"data:")?(f=p,new Promise((g,b)=>{Pu(f).bind(({type:v,data:y,base64Encoded:x})=>Yv(v,y,x)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>Xv(g).then(b=>Jv(b,!1,v=>C.some(Qv(c,g,v))).getOrThunk(m)))}var g,p,f;return de(u,"data:")?Zv(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(a)}}})(r,e)),o.findAll(t.getBody(),m).then(a(h=>{const g=mt(h,b=>st(b)?(rl(t,b),!1):"blob"!==b.uriType);return On(t)||z(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Be(t.editorManager.get(),(x,w)=>x||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{sh(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{z(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=co(Ix(t)),t.dom=Et(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:dS(t),referrerPolicy:rc(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=qr(Mx(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,a.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),s_(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new ke("br",1))}}),i})(t),t.serializer=Iy((a=>{const i=a.options.get;return{...Mx(a),...Ix(a),...af({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=My(t.dom,t.getWin(),t.serializer,t),t.annotator=mb(t),t.formatter=Qy(t),t.undoManager=tC(t),t._nodeChangeDispatcher=new zO(t),t._selectionOverrides=pT(t),(a=>{const i=uo(),l=Gt(!1),d=Kd(c=>{a.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);a.on("touchstart",c=>{i1(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),a.on("touchmove",c=>{d.cancel(),i1(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const d=d_(i);z(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const d=c_(i);z(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+q.trim(o_(a))+" ",d=" "+q.trim(hh(a))+" ",c=c1(l),u=c1(d),m=r_(a);m.length>0&&a.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],IA(f,v,hh(f)));g.content=v}})(a,m,p)}),a.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];(c(h)||u(h))&&(m.length>0&&h.attr("data-mce-content")?(h.name="#text",h.type=3,h.raw=!0,h.value=h.attr("data-mce-content")):h.attr(i,null))}})})(t),On(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o)=>{const r=M.fromRangeStart(n).getNode(),s=(c=o,Bo(S(r),u=>sn(u.dom)||Ue(u),ix(c)).getOr(S(c)).dom),a=dx(r,s,!1),i=dx(r,s,!0),l=document.createRange();var c;return lx(a,s).fold(()=>{ax(a)?l.setStart(a,0):l.setStartBefore(a)},d=>l.setStartBefore(d.dom)),lx(i,s).fold(()=>{ax(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},d=>l.setEndAfter(d.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(vu(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=e_(i),f=n_(i),{inlinePatterns:Zp(p),blockPatterns:Qp(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!Q.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return of(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),a=Sx(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=Dx(t,o,n.startContainer,s,a,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=ce(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=_o(b,(k,R)=>R.start.length-k.start.length),x=v.replace(Kt," ");return $t(y,w=>0===v.indexOf(w.start)||0===x.indexOf(w.start))})(u.blockPatterns,g).map(b=>q.trim(g).length===b.start.length?[]:[{pattern:b,range:nf(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(ne,{preserve_zwsp:!0}),Px(t,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();z(m,f=>((h,g)=>{const v=g.pattern,y=Ex(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return of(h,y).each(x=>{"block-format"===v.type?((w,k)=>{const R=k.get(w);return Ht(R)&&Se(R).exists(A=>pt(A,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{Nx(h.dom,x,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{Nx(h.dom,x,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=Sm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),ts(t.dom,m.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();of(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=_x(f.dom,b,g.startContainer,v),x=Sx(h,b,y),w=Dx(f,b,g.startContainer,v,x,!1);w.length>0&&f.undoManager.transact(()=>{Px(f,w)})})})(i,p)}};i.on("keyup",p=>{Lx(d,p,(f,h)=>f===h.keyCode&&!Q.modifierPressed(h))&&m()}),i.on("keypress",p=>{Lx(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&qe.setEditorTimeout(i,m)})})(a)})(t));const r=UO(t);((t,e)=>{t.addCommand("delete",()=>{var n;a1(n=t,e,!1).fold(()=>{ru(n),su(n)},ls)}),t.addCommand("forwardDelete",()=>{var n;a1(n=t,e,!0).fold(()=>U0(n,"ForwardDelete"),ls)})})(t,r),(a=>{a.on("NodeChange",ot(MA,a))})(t),(a=>{var i;const l=a.dom,d=ce(a),c=null!==(i=bS(a))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(nC(g)){const b=g.keyCode;return!oC(g)&&(Q.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||kt(ZR,b))}return!1})(m))return;const f=a.getBody(),h=!(nC(g=m)&&!(oC(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(It(S(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,eC)!==h||p)&&(l.setAttrib(f,eC,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};bn(c)&&a.on("init",m=>{u(m,!0),a.on("change SetContent ExecCommand",u),a.on("paste",p=>qe.setEditorTimeout(a,()=>u(p)))})})(t),(t=>{const e=Gt(!1),n=Gt(QS(t)?"text":"html"),o=(r=>{const s=Gt(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},qw);bt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(Xm(a)){let d;const c=i.get();for(;d=Xm(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>Xm(r),getHtml:()=>(a=>{const i=a.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=mt(a.getBody().childNodes,GO);z(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(bt.browser.isChromium()||bt.browser.isSafari())&&(a=eT,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),yb(a,!1)):(i.set("text"),yb(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Ol(r,i.html,i.internal,!1),i.text&&Zm(r,i.text,!1)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=VS(r);Ct(a)&&r.on("PastePreProcess",s(a));const i=WS(r);Ct(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&nx(s)&&Zw(a,ex(s),tx(s),()=>{if(bt.browser.isChromium()||bt.browser.isFirefox()){const i=s.selection.getRng();qe.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&nx(s)&&Zw(a,ex(s),tx(s),ht)})(r))})(t),((r,s)=>{qS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),yi(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&Pt(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=ox(r,a);if(Ft(i))return;const l=Xw(a.dataTransfer),d=xo(l,Al());if((!Jw(l)||(f=>{const h=f["text/plain"];return!!h&&0===h.indexOf("file://")})(l))&&Qw(r,a,i))return;const c=l[Al()],u=c||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>Uo(h,y));if(!ye(f.getParent(g,"summary")))return!0;if(v&&pt(b,"text/html")){const y=(new DOMParser).parseFromString(b["text/html"],"text/html").body;return!ye(y.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),p=s.get();p&&!m||u&&(a.preventDefault(),qe.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(c||p&&m)&&r.execCommand("Delete"),rx(r,i);const f=Kw(u);l["text/html"]?Ol(r,f,d,!0):Zm(r,f,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{yi(r)&&!s.get()&&(a.preventDefault(),rx(r,ox(r,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=d=>ye(d.querySelector("summary"));if("deleteByDrag"===i.inputType){const d=mt(a.dom.select("details"),l);z(d,c=>{Bt(c.firstChild)&&c.firstChild.remove();const u=a.dom.create("summary");u.appendChild(Bs().dom),c.prepend(u)})}})})(r)})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(Q.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,bt.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===s.get()||a;a=!1;const d=Xw(i.clipboardData);!Jw(d)&&Qw(o,i,r.getLastRng()||o.selection.getRng())||(xo(d,"text/html")?(i.preventDefault(),tf(o,d,d["text/html"],l,!0)):xo(d,"text/plain")&&xo(d,"text/uri-list")?(i.preventDefault(),tf(o,d,d["text/plain"],l,!0)):(r.create(),qe.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),tf(o,d,c,l,!1)},0)))})})(t,e,n),(o=>{const r=a=>de(a,"webkit-fake-url"),s=a=>de(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!yi(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");st(c)&&!d.attr("data-mce-object")&&c!==bt.transparentSrc&&(r(c)||!t_(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,At(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=Oy(a),C.none()),l=>(i.rtcInstance=(()=>{const d=J(null),c=J("");return{init:{bindEvents:ht},undoManager:{beforeChange:ht,add:d,undo:d,redo:d,clear:ht,reset:ht,hasUndo:Tt,hasRedo:Tt,transact:d,ignore:ht,extra:ht},formatter:{match:Tt,matchAll:J([]),matchNode:J(void 0),canApply:Tt,closest:c,apply:ht,remove:ht,toggle:ht,formatChanged:J({unbind:ht})},editor:{getContent:c,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:ht},selection:{getContent:c},autocompleter:{addDecoration:ht,removeDecoration:ht},raw:{getModel:J(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>fe(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,x,w)=>p.transact(w),ignore:(y,x)=>p.ignore(x),extra:(y,x,w,k)=>p.extra(w,k)},formatter:{match:(y,x,w,k)=>f.match(y,u(x),k),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,x,w)=>f.apply(y,u(x)),remove:(y,x,w,k)=>f.remove(y,u(x)),toggle:(y,x,w)=>f.toggle(y,u(x)),formatChanged:(y,x,w,k,R)=>f.formatChanged(x,w,k,R)},editor:{getContent:y=>h.getContent(y),setContent:(y,x)=>({content:h.setContent(y,x),html:""}),insertContent:(y,x)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,x)=>g.getContent(x)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),HS(a)||(i.body.spellcheck=!1,sf.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=q.each,n=Q.BACKSPACE,o=Q.DELETE,r=t.dom,s=t.selection,a=t.parser,i=bt.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=bt.deviceType.isiPhone()||bt.deviceType.isiPad(),u=bt.os.isMacOS()||bt.os.isiOS(),m=(E,_)=>{try{t.getDoc().execCommand(E,!1,String(_))}catch{}},p=E=>E.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",E=>{let _;if(E.target===t.getDoc().documentElement)if(_=s.getRng(),t.getBody().focus(),"mousedown"===E.type){if(ze(_.startContainer))return;s.placeCaretAt(E.clientX,E.clientY)}else s.setRng(_)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",E=>{if(!p(E)&&"HTML"===E.target.nodeName){const _=t.getBody();_.blur(),qe.setEditorTimeout(t,()=>{_.focus()})}})},b=()=>{const E=ph(t);t.on("click",_=>{const D=_.target;/^(IMG|HR)$/.test(D.nodeName)&&r.isEditable(D.parentNode)&&(_.preventDefault(),t.selection.select(D),t.nodeChanged()),"A"===D.nodeName&&r.hasClass(D,E)&&0===D.childNodes.length&&r.isEditable(D.parentNode)&&(_.preventDefault(),s.select(D))})},v=()=>{t.on("keydown",E=>{if(!p(E)&&E.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const _=s.getNode().previousSibling;if(_&&_.nodeName&&"table"===_.nodeName.toLowerCase())return E.preventDefault(),!1}return!0})},y=()=>{fh(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),uh(t)||m("enableObjectResizing",!1)})},x=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},k=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",E=>{let _;"HTML"===E.target.nodeName&&(_=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(_),t.selection.normalize(),t.nodeChanged())}))},R=()=>{u&&t.on("keydown",E=>{!Q.metaKeyPressed(E)||E.shiftKey||37!==E.keyCode&&39!==E.keyCode||(E.preventDefault(),t.selection.getSel().modify("move",37===E.keyCode?"backward":"forward","lineboundary"))})},A=()=>{t.on("click",E=>{let _=E.target;do{if("A"===_.tagName)return void E.preventDefault()}while(_=_.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},T=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",E=>{E.preventDefault()})})},L=ht;return On(t)?(d&&(h(),b(),T(),f(),c&&(w(),k(),A())),l&&(g(),y(),x(),R())):(t.on("keydown",E=>{if(p(E)||E.keyCode!==Q.BACKSPACE)return;let _=s.getRng();const D=_.startContainer,F=_.startOffset,X=r.getRoot();let H=D;if(_.collapsed&&0===F){for(;H.parentNode&&H.parentNode.firstChild===H&&H.parentNode!==X;)H=H.parentNode;"BLOCKQUOTE"===H.nodeName&&(t.formatter.toggle("blockquote",void 0,H),_=r.createRng(),_.setStart(D,0),_.setEnd(D,0),s.setRng(_))}}),(()=>{const E=_=>{const D=r.create("body"),F=_.cloneContents();return D.appendChild(F),s.serializer.serialize(D,{format:"html"})};t.on("keydown",_=>{const D=_.keyCode;if(!p(_)&&(D===o||D===n)&&t.selection.isEditable()){const F=t.selection.isCollapsed(),X=t.getBody();if(F&&(!r.isEmpty(X)||(H=>{const rt=S(H);return Pt(se(rt,'[contenteditable="true"]'),nt=>Ka(nt).exists(ct=>!Po(ct)))})(X))||!F&&!(H=>{const rt=E(H),nt=r.createRng();return nt.selectNode(t.getBody()),rt===E(nt)})(t.selection.getRng()))return;_.preventDefault(),t.setContent(""),X.firstChild&&r.isBlock(X.firstChild)?t.selection.setCursorLocation(X.firstChild,0):t.selection.setCursorLocation(X,0),t.nodeChanged()}})})(),bt.windowsPhone||t.on("keyup focusin mouseup",E=>{Q.modifierPressed(E)||(_=>{const D=_.getBody(),F=_.selection.getRng();return F.startContainer===F.endContainer&&F.startContainer===D&&0===F.startOffset&&F.endOffset===D.childNodes.length})(t)||s.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",ce(t))}),T(),v(),a.addNodeFilter("br",E=>{let _=E.length;for(;_--;)"Apple-interchange-newline"===E[_].attr("class")&&E[_].remove()}),c?(w(),k(),A()):f()),l&&(t.on("keydown",E=>{if(!p(E)&&E.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const _=s.getNode(),D=_.previousSibling;if("HR"===_.nodeName)return r.remove(_),void E.preventDefault();D&&D.nodeName&&"hr"===D.nodeName.toLowerCase()&&(r.remove(D),E.preventDefault())}}}),g(),(()=>{const E=()=>{const D=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const F=s.getStart();F!==t.getBody()&&(r.setAttrib(F,"style",null),e(D,X=>{F.setAttributeNode(X.cloneNode(!0))}))}},_=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",D=>{let F;return!(!(p(D)||8!==D.keyCode&&46!==D.keyCode)&&_()&&(F=E(),t.getDoc().execCommand("delete",!1),F(),D.preventDefault(),1))}),r.bind(t.getDoc(),"cut",D=>{if(!p(D)&&_()){const F=E();qe.setEditorTimeout(t,()=>{F()})}})})(),y(),t.on("SetContent ExecCommand",E=>{"setcontent"!==E.type&&"mceInsertLink"!==E.command||e(r.select("a:not([data-mce-block])"),_=>{var D;let F=_.parentNode;const X=r.getRoot();if(F?.lastChild===_){for(;F&&!r.isBlock(F);){if((null===(D=F.parentNode)||void 0===D?void 0:D.lastChild)!==F||F===X)return;F=F.parentNode}r.add(F,"br",{"data-mce-bogus":1})}})}),x(),R(),v(),t.on("drop",E=>{var _;const D=null===(_=E.dataTransfer)||void 0===_?void 0:_.getData("text/html");st(D)&&/^<img[^>]*>$/.test(D)&&t.dispatch("dragend",new window.DragEvent("dragend",E))}))),{refreshContentEditable:L,isHidden:()=>{if(!l||t.removed)return!1;const E=t.selection.getSel();return!E||!E.rangeCount||0===E.rangeCount}}})(a),a.dispatch("PostRender");const d=gS(a);void 0!==d&&(l.dir=d);const c=$S(a);c&&a.on("BeforeSetContent",u=>{q.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{const a=(i=>{let l=!1;const d=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(d),l=!0,i.setProgressState(!1)}})(t);Ux(t).then(()=>{lf(t),a()})},a=>{t.setProgressState(!0),Ux(t).then(()=>{a().then(i=>{t.setProgressState(!1),lf(t),Ty(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),lf(t),Ty(t)})})})},wT=Ut,df=Et.DOM,jx=Et.DOM,Hx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),$x=t=>{const e=t.getElement();return t.inline?Hx(null):(n=>{const o=jx.create("div");return jx.insertAfter(o,n),Hx(o,o)})(e)},xT=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=q.trim(ih(n)),r=n.ui.registry.getAll().icons,s={...ol.get("default").icons,...ol.get(o).icons};_t(s,(a,i)=>{pt(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=Br(n);if(st(o)){const r=ir.get(o);n.theme=r(n,ir.urls[o])||{},Ct(n.theme.init)&&n.theme.init(n,ir.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=sc(n),r=Vr.get(o);n.model=r(n,Vr.urls[o])})(t),(n=>{const o=[];z(vi(n),r=>{((s,a,i)=>{const l=Wr.get(i),d=Wr.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=q.trim(i),l&&-1===q.inArray(a,i)){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,Ct(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,m,p)=>{const f=ln.translate(["Failed to initialize plugin: {0}",m]);gb(u,"PluginLoadError",{message:f}),sl(f,p),rl(u,f)})(s,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,st(Br(n))?(r=>{const s=r.theme.renderUI;return s?s():$x(r)})(n):Ct(Br(n))?(r=>{const s=r.getElement(),a=Br(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):$x(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(ht),hide:C.from(o.hide).getOr(ht),isEnabled:C.from(o.isEnabled).getOr(Ut),setEnabled:s=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Wy(o=n,mS(o)),(o=>Wy(o,ch(o)))(n)),t.inline?zx(t):((n,o)=>{((r,s)=>{const a=r.translate("Rich Text Area"),i=In(S(r.getElement()),"tabindex").bind(Va),l=((d,c,u,m)=>{const p=ee("iframe");return m.each(f=>Zt(p,"tabindex",f)),eo(p,u),eo(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),wr(p,"tox-edit-area__iframe"),p})(r.id,a,KE(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=GE(d)+"<html><head>";oh(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=YE(d),m=XE(d),p=d.translate(IS(d));return rh(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+rh(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(r),df.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=df.isHidden(o.editorContainer)),n.getElement().style.display="none",df.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,zx(r)};if(i_(r)||bt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,m=>{c(m)&&u((p=>{const f=S(wg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=hn(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:ot(Zk,r,s,d,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(S(s),0,wT);s.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},dr=Et.DOM,qx=t=>"-"===t.charAt(0),Vx=(t,e,n)=>C.from(e).filter(o=>bn(o)&&!ol.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),Wx=vn().deviceType,Kx=Wx.isPhone(),ET=Wx.isTablet(),Da=t=>{if(Ft(t))return[];{const e=Ht(t)?t:t.split(/[ ,]/),n=yt(e,vr);return mt(n,bn)}},cf=(t,e)=>pt(t.sections(),e),_T=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:At(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),NT=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?q.extend({},t.external_plugins,o):o},OT=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a)=>{const i=S(r.getRoot());return a=la(i,M.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),da(i,M.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},Ll=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=q.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Vu(t,{...o,content:OT(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(i=r.content,l=o,Qu(t).editor.insertContent(i,l));var i,l;Wu(t,s,r),t.addVisual()})}},TT={"font-size":"size","font-family":"face"},BT=cd("font"),Gx=t=>(e,n)=>C.from(n).map(S).filter(Ne).bind(o=>{return(r=t,s=e,a=o.dom,xu(S(a),i=>{return Ya(l=i,r).orThunk(()=>BT(l)?At(TT,r).bind(d=>In(l,d)):C.none());var l},i=>wt(S(s),i))).or(((r,s)=>C.from(Et.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),DT=Gx("font-size"),PT=hn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Gx("font-family")),LT=t=>ue(t.getBody()).bind(e=>{const n=e.container();return C.from($(n)?n.parentNode:n)}),uf=(t,e)=>{return n=t,o=_f(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(ot(LT,n)).map(S).filter(Ne).bind(o);var n,o,r},Yx=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=q.explode(t.options.get("font_size_style_values")),r=q.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},MT=t=>{const e=t.split(/\s*,\s*/);return yt(e,n=>-1===n.indexOf(" ")||de(n,'"')||de(n,"'")?n:`'${n}'`).join(",")},Xx=(t,e)=>{const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),s=e?o.startContainer:o.endContainer,a=Ra(n,s);if(!a||!a.isContentEditable)return;const i=e?Re:jn,l=ce(t);((d,c,u,m)=>{const p=d.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(c)?c:p.getParent(m,f,u);return C.from(h).map(S)})(t,r,a,s).each(d=>{const c=pw(t,s,d.dom,a,!1,l);i(d,S(c)),t.selection.setCursorLocation(c,0),t.dispatch("NewBlock",{newBlock:c}),Na(t,"insertParagraph")})},FT=["toggleview"],Jx=t=>kt(FT,t.toLowerCase());class Qx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=r?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?zc(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!Ct(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!Jx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Ct(o)&&o(n)}queryCommandValue(e){if(!Jx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Ct(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;_t(e,(r,s)=>{z(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const cr="data-mce-contenteditable",mf=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Ml=(t,e)=>{t.dom.contentEditable=e?"true":"false"},ur=t=>t.readonly,Zx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{ur(t)&&z(e,n=>{n.attr(cr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(cr,e=>{ur(t)&&z(e,n=>{n.attr("contenteditable",n.attr(cr))})}),t.serializer.addTempAttr(cr)},zT=["copy"],jT=q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ff{static isNative(e){return!!jT[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Tt}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Hd(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Tt),n){const s={func:n,removed:!1};r&&q.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return _t(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=ds(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,z(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else _t(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Pa=t=>(t._eventDispatcher||(t._eventDispatcher=new ff({scope:t,toggleEvent:(e,n)=>{ff.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),gf={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Hd(t.toLowerCase(),e??{},o);const r=Pa(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return Pa(this).on(t,e,n)},off(t,e){return Pa(this).off(t,e)},once(t,e){return Pa(this).once(t,e)},hasEventListeners(t){return Pa(this).has(t)}},Il=Et.DOM;let mr;const Fl=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=mh(t);return n?(t.eventRoot||(t.eventRoot=Il.select(n)[0]),t.eventRoot):t.getBody()},tk=(t,e,n)=>{var o;(o=t).hidden||ur(o)?ur(t)&&((o,r)=>{if("click"!==r.type||Q.metaKeyPressed(r))kt(zT,r.type)&&o.dispatch(r.type,r);else{const s=S(r.target);(a=o,i=s,Do(i,"a",l=>wt(l,S(a.getBody()))).bind(l=>In(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${zf(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},ek=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Fl(t,e);if(mh(t)){if(mr||(mr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||mr&&(_t(mr,(r,s)=>{t.dom.unbind(Fl(t,s))}),mr=null)})),mr[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Il.isChildOf(s,l))&&tk(a[i],e,r)}};mr[e]=o,Il.bind(n,e,o)}else{const o=r=>{tk(t,e,r)};Il.bind(n,e,o),t.delegates[e]=o}},nk={...gf,bindPendingEventDelegates(){const t=this;q.each(t._pendingNativeEvents,e=>{ek(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?ek(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Fl(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(_t(t.delegates,(o,r)=>{t.dom.unbind(Fl(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},HT=t=>st(t)?{value:t.split(/[ ,]/),valid:!0}:pr(t,st)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ok=(t,e)=>t+(hs(e.message)?"":`. ${e.message}`),rk=t=>t.valid,pf=(t,e,n="")=>{const o=e(t);return So(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},$T=["design","readonly"],sk=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=S(t.getBody());var o,r,s;s=e,md(o=n,r="mce-content-readonly")&&!s?ys(o,r):s&&wr(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{C.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Ml(n,!1),z(se(n,'*[contenteditable="true"]'),o=>{Zt(o,cr,"true"),Ml(o,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Ml(n,!0),z(se(n,`*[${cr}="true"]`),o=>{te(o,cr),Ml(o,!0)}),mf(t,"StyleWithCSS",!1),mf(t,"enableInlineTableEditing",!1),mf(t,"enableObjectResizing",!1),(o=>tr(o)||(r=>{const s=no(S(r.getElement()));return Fc(s).filter(a=>!Hc(a.dom)&&Ii(r,a.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},hf=q.each,bf=q.explode,qT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ak=q.makeMap("alt,ctrl,shift,meta,access"),VT=t=>{const e={},n=bt.os.isMacOS()||bt.os.isiOS();hf(bf(t.toLowerCase(),"+"),s=>{s in ak?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=qT[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in ak)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class ik{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(hf(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return hf(bf(q.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:q.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=q.map(bf(e,">"),VT);return s[s.length-1]=q.extend(s[s.length-1],{func:o,scope:r||this.editor}),q.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const WT=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:d(a,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>r[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},fr=Et.DOM,lk=q.extend,KT=q.each;class Ul{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,lk(this,nk);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:_T(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Df(s,(d,c)=>kt(t,c),Zl(i),Zl(l)),{t:i,f:l}})(e);return r=n.f,{sections:J(n.t),options:J(r)};var r})(["mobile"],Tm(a,r)),l=q.extend(n,o,i.options(),t&&cf(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=At(m,c).getOr({});return q.extend({},u,p)})(i,"mobile"):{},{external_plugins:NT(o,i.options())});return((d,c,u,m)=>{const p=Da(u.forced_plugins),f=Da(m.plugins),h=cf(v=c,"mobile")?v.sections().mobile:{},g=((v,y,x,w)=>v&&cf(y,"mobile")?w:x)(d,c,f,h.plugins?Da(h.plugins):f),b=((v,y)=>[...Da(v),...Da(y)])(p,g);var v;return q.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)})(Kx||ET,Kx,f=n,o.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,x,w)=>{const k=pf(x,w);return rk(k)?(g[y]=k.value,!0):(console.warn(ok(`Invalid value passed for the ${y} option`,k)),!1)},v=y=>pt(h,y);return{register:(y,x)=>{const w=st(x.processor)?(R=>{const A=(()=>{switch(R){case"array":return Ht;case"boolean":return So;case"function":return Ct;case"number":return nn;case"object":return fe;case"string":return st;case"string[]":return HT;case"object[]":return T=>pr(T,fe);case"regexp":return T=>Fa(T,RegExp);default:return Ut}})();return T=>pf(T,A,`The value must be a ${R}.`)})(x.processor):x.processor,k=((R,A,T)=>{if(!ie(A)){const L=pf(A,T);if(rk(L))return L.value;console.error(ok(`Invalid default value passed for the "${R}" option`,L))}})(y,x.default,w);h[y]={...x,default:k,processor:w},At(g,y).orThunk(()=>At(f,y)).each(R=>b(y,R,w))},isRegistered:v,get:y=>At(g,y).orThunk(()=>At(h,y).map(x=>x.default)).getOrUndefined(),set:(y,x)=>{if(v(y)){const w=h[y];return w.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,x,w.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const x=v(y);return x&&delete g[y],x},isSet:y=>pt(g,y)}})(0,s),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:nh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:nh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=st(h)&&bn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=kt(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>So(h)||st(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||st(h)||pr(h,st);return g?st(h)?{value:yt(h.split(","),vr),valid:g}:Ht(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ac(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=st(h)||pr(h,st);return g?{value:Ht(h)?h:yt(h.split(","),vr),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=So(h)||st(h);return g?!1===h||nc.isiPhone()||nc.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!VE}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||st(h)||Ct(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||st(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:oc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:oc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:oc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>st(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>pr(h,fe)||!1===h?{value:th(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Ct(h)?{value:(g=h,b=>{const v=g(b);return th(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>pr(h,eh)?{value:h,valid:!0}:eh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=kt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=kt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:ln.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:WE.getAttrib(p.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(t=>{const e=Uy(t,DR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),_o(e)})(h),v=(t=>zy(t,LR))(g),y=v.length>0,x=b.length>0,w="mobile"===g.theme;if(y||x||w){const k="\n- ",R=w?`\n\nThemes:${k}mobile`:"",A=y?`\n\nPlugins:${k}${v.join(k)}`:"",T=x?`\n\nOptions:${k}${b.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+R+A+T)}})(p,f),((h,g)=>{const b=(t=>Uy(t,PR))(h),v=(t=>zy(t,Fy.map(e=>e.name)))(g),y=v.length>0,x=b.length>0;if(y||x){const w="\n- ",k=y?`\n\nPlugins:${w}${v.map(zR).join(w)}`:"",R=x?`\n\nOptions:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+k+R)}})(p,f)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=rc(r);d&&(qn.ScriptLoader._setReferrerPolicy(d),Et.DOM.styleSheetLoader._setReferrerPolicy(d));const c=gh(r);Y(c)&&Et.DOM.styleSheetLoader._setContentCssCors(c),pe.languageLoad=a("language_load"),pe.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new mn(oh(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ac(r),this.hasVisual=LS(r),this.shortcuts=new ik(this),this.editorCommands=new Qx(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{z("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Pt(s,a=>Y(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(bt.os.isMacOS()||bt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!tt(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),sn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Ll(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Ll(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Ll(e,r)},mceInsertContent:(n,o,r)=>{Ll(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(KS(e))}})})(t),(e=>{const n=(o,r,s)=>{const a=st(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");fe(a)&&st(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{o1(e,"indent")},Outdent:()=>{r1(e)}}),e.editorCommands.addCommands({Outdent:()=>t1(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Xx(e,!0)},InsertNewBlockAfter:()=>{Xx(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{_l(vw,e)},mceInsertNewLine:(n,o,r)=>{Sw(e,r)},InsertLineBreak:(n,o,r)=>{_l(ww,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=Yx(i,l);i.formatter.toggle("fontname",{value:MT(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:Yx(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(st(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return uf(r=n,s=>PT(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return uf(r=n,s=>DT(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return uf(r=n,s=>{const a=S(r.getBody());return xu(s,l=>Ya(l,"line-height"),ot(wt,a)).getOrThunk(()=>{const l=parseFloat(wn(s,"line-height")),d=parseFloat(wn(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Vc(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),Y(i.bookmark)&&!tr(i)&&zc(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return qc(u),Vb(i,c),void Vc(i);i.inline||(bt.browser.isOpera()||qc(d),i.getWin().focus()),(bt.browser.isFirefox()||i.inline)&&(qc(d),Vb(i,c)),Vc(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=a("cache_suffix");u&&(bt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:WT(),styleSheetLoader:void 0,show:ht,hide:ht,setEnabled:ht,isEnabled:Ut},this.mode=(p=>{const f=Gt("design"),h=Gt({design:{activate:ht,deactivate:ht,editorReadOnly:!1},readonly:{activate:ht,deactivate:ht,editorReadOnly:!0}});return(g=p).serializer?Zx(g):g.on("PreInit",()=>{Zx(g)}),(g=>{g.on("ShowCaret",b=>{ur(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{ur(g)&&b.preventDefault()})})(p),{isReadOnly:()=>ur(p),set:g=>((b,v,y,x)=>{if(x!==y.get()){if(!pt(v,x))throw new Error(`Editor mode '${x}' is invalid`);b.initialized?sk(b,y,v,x):b.on("init",()=>sk(b,y,v,x))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,x)=>{if(kt($T,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...x,deactivate:()=>{try{x.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${y}:`,w)}}}}})(h.get(),g,b))}};var g})(r),o.dispatch("SetupEditor",{editor:this});const m=FS(r);Ct(m)&&m.call(r,r)}render(){(e=>{const n=e.id;ln.setCode(lh(e));const o=()=>{dr.unbind(window,"ready",o),e.render()};if(!jo.Event.domLoaded)return void dr.bind(window,"ready",o);if(!e.getElement())return;const r=S(e.getElement()),s=dg(r);var l;e.on("remove",()=>{Of(r.dom.attributes,i=>te(r,i.name)),eo(r,s)}),e.ui.styleSheetLoader=op.forElement(r,{contentCssCors:gh(l=e),referrerPolicy:rc(l)}),ac(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||dr.getParent(n,"form");a&&(e.formElement=a,_S(e)&&!wd(e.getElement())&&(dr.insertAfter(dr.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},dr.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!NS(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=qy(e),e.notificationManager=$y(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=dr.encode(i.content))}),RS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),AS(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=qn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Br(r);return!st(s)||Y(ir.get(s))})(t)&&(r=>{const s=sc(r);return Y(Vr.get(s))})(t)&&xT(t)};((r,s)=>{const a=Br(r);if(st(a)&&!qx(a)&&!pt(ir.urls,a)){const i=yS(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ir.load(a,l).catch(()=>{pa(r,"ThemeLoadError",ha("theme",l,a))})}})(t,e),((r,s)=>{const a=sc(r);if("plugin"!==a&&!pt(Vr.urls,a)){const i=CS(r),l=st(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Vr.load(a,l).catch(()=>{pa(r,"ModelLoadError",ha("model",l,a))})}})(t,e),((r,s)=>{const a=lh(s),i=cS(s);if(!ln.hasCode(a)&&"en"!==a){const l=bn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{pa(s,"LanguageLoadError",ha("language",l,a))})}})(n,t),((r,s,a)=>{const i=Vx(s,"default",a),l=(d=s,C.from(rS(d)).filter(bn).map(c=>({url:c,name:C.none()}))).orThunk(()=>Vx(s,ih(s),""));var d;z((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,m;c=s,u=d.url,m=d.name.getOrUndefined(),pa(c,"IconsLoadError",ha("icons",u,m))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Wr.load(i,l).catch(()=>{pa(r,"PluginLoadError",ha("plugin",l,i))})};_t(DS(r),(i,l)=>{a(l,i),r.options.set("plugins",vi(r).concat(l))}),z(vi(r),i=>{!(i=q.trim(i))||Wr.urls[i]||qx(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return tr(this)}translate(e){return ln.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(Y(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Ut,default:n})),r.isSet(e)||ie(n)?r.get(e):n}hasPlugin(e,n){return!(!kt(vi(this),e)||n&&void 0===Wr.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(fr.show(e.getContainer()),fr.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(fr.hide(e.getContainer()),fr.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=wd(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,wd(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=fr.getParent(n.id,"form");i&&KT(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Zu(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,a=o.format?o.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return vy(n,r).fold(Ce,s=>{const a=(l=s,Qu(n).editor.getContent(l));var l;return yy(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=lk({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Zu(this,this.startContent,{format:"raw"}):Zu(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||fr.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=fr.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=zS(r);return Ct(a)?a.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||fe(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Lt(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Y(s?.nextSibling)&&el.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&el.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),el.remove(e.getContainer()),nl(n),nl(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),nl(r),nl(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),el.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const es=Et.DOM,zl=q.each;let jl,dk=!1,Ee=[];const Hl=t=>{const e=t.type;zl(ko.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},ck=t=>{if(t!==dk){const e=Et.DOM;t?(e.bind(window,"resize",Hl),e.bind(window,"scroll",Hl)):(e.unbind(window,"resize",Hl),e.unbind(window,"scroll",Hl)),dk=t}},uk=t=>{const e=Ee;return Ee=mt(Ee,n=>t!==n),ko.activeEditor===t&&(ko.activeEditor=Ee.length>0?Ee[0]:null),ko.focusedEditor===t&&(ko.focusedEditor=null),e.length!==Ee.length},GT="CSS1Compat"!==document.compatMode,ko={...gf,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.3",releaseDate:"2023-11-15",i18n:ln,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=mn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new mn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new mn(t.baseURL),t.suffix=n,(s=t).on("AddEditor",ot(Q_,s)),s.on("RemoveEditor",ot(Z_,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&_t(o,(r,s)=>{pe.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;es.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],m=Ct(c)?p=>Pt(u,f=>c(f,p)):p=>kt(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=t,bt.browser.isIE()||bt.browser.isEdge()?(sl("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):GT?(sl("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):st(d.selector)?es.select(d.selector):Y(d.target)?[d.target]:[])),q.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(uk(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=q.grep(l,d=>!e.get(d.id)),0===l.length?r([]):zl(l,d=>{t.inline&&d.tagName.toLowerCase()in o?sl("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new Ul(c,u,e);i.push(p),p.on("init",()=>{++a===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=At(c,"name").filter(m=>!es.get(m)).getOrThunk(es.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return es.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?Ee.slice(0):st(t)?$t(Ee,e=>e.id===t).getOr(null):nn(t)&&Ee[t]?Ee[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Ee.push(t),ck(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),jl||(jl=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",jl))),t},createEditor(t,e){return this.add(new Ul(t,e,this))},remove(t){const e=this;let n;if(t){if(!st(t))return n=t,ye(e.get(n.id))?null:(uk(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Ee.length&&window.removeEventListener("beforeunload",jl),n.remove(),ck(Ee.length>0),n);zl(es.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Ee.length-1;o>=0;o--)e.remove(Ee[o])},execCommand(t,e,n){var o;const r=this,s=fe(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Ul(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{zl(Ee,t=>{t.save()})},addI18n:(t,e)=>{ln.add(t,e)},translate:t=>ln.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new mn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new mn(this.baseURL)}};ko.setup();const YT=(()=>{const t=uo();return{FakeClipboardItem:e=>({items:e,types:_e(e),getType:n=>At(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),mk=Math.min,ns=Math.max,$l=Math.round,fk=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=$l(l/2)),"c"===d[1]&&(o+=$l(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=$l(a/2)),"c"===d[4]&&(o-=$l(s/2)),os(o,r,s,a)},os=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),XT={inflate:(t,e,n)=>os(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:fk,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=fk(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=ns(t.x,e.x),o=ns(t.y,e.y),r=mk(t.x+t.w,e.x+e.w),s=mk(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:os(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=ns(0,e.x-o),c=ns(0,e.y-r),u=ns(0,s-i),m=ns(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=m),s-=u,a-=m,os(o,r,s-o,a-r)},create:os,fromClientRect:t=>os(t.left,t.top,t.width,t.height)},JT=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const d=((c,u,m=1e3)=>{let p=!1,f=null;const h=v=>(...y)=>{p||(p=!0,null!==f&&(clearTimeout(f),f=null),v.apply(null,y))},g=h(c),b=h(u);return{start:(...v)=>{p||null!==f||(f=setTimeout(()=>b.apply(null,v),m))},resolve:g,reject:b}})(i,l);e[n]=d.resolve,qn.ScriptLoader.loadScript(o).then(()=>d.start(s),()=>d.reject(r))});return t[n]=a,a}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let La;try{const t="__storage_test__";La=window.localStorage,La.setItem(t,t),La.removeItem(t)}catch{La=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const QT={geom:{Rect:XT},util:{Delay:qe,Tools:q,VK:Q,URI:mn,EventDispatcher:ff,Observable:gf,I18n:ln,LocalStorage:La,ImageUploader:t=>{const e=Ky(),n=Yy(t,e);return{upload:(o,r=!0)=>n.upload(o,r?Gy(t):void 0)}}},dom:{EventUtils:jo,TreeWalker:qt,TextSeeker:qo,DOMUtils:Et,ScriptLoader:qn,RangeUtils:Zo,Serializer:Iy,StyleSheetLoader:np,ControlSelection:wb,BookmarkManager:oa,Selection:My,Event:jo.Event},html:{Styles:jd,Entities:lo,Node:ke,Schema:co,DomParser:qr,Writer:d0,Serializer:ho},Env:bt,AddOnManager:pe,Annotator:mb,Formatter:Qy,UndoManager:tC,EditorCommands:Qx,WindowManager:qy,NotificationManager:$y,EditorObservable:nk,Shortcuts:ik,Editor:Ul,FocusManager:qb,EditorManager:ko,DOM:Et.DOM,ScriptLoader:qn.ScriptLoader,PluginManager:Wr,ThemeManager:ir,ModelManager:Vr,IconManager:ol,Resource:JT,FakeClipboard:YT,trim:q.trim,isArray:q.isArray,is:q.is,toArray:q.toArray,makeMap:q.makeMap,each:q.each,map:q.map,grep:q.grep,inArray:q.inArray,extend:q.extend,walk:q.walk,resolve:q.resolve,explode:q.explode,_addCacheSuffix:q._addCacheSuffix},gk=q.extend(ko,QT);(t=>{window.tinymce=t,window.tinyMCE=t})(gk),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(gk)}();